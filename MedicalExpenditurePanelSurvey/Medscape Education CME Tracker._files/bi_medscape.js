function Visitor(a,b){if(!a)throw"Visitor requires Adobe Marketing Cloud Org ID";var c=this;c.version="1.3.5";var d=window,e=d.Visitor;d.s_c_in||(d.s_c_il=[],d.s_c_in=0),c._c="Visitor",c._il=d.s_c_il,c._in=d.s_c_in,c._il[c._in]=c,d.s_c_in++;var f=d.document,g=d.O;g||(g=null);var h=d.P;h||(h=!0);var i=d.N;i||(i=!1),c.C=function(a){var b,c,d=0;if(a)for(b=0;b<a.length;b++)c=a.charCodeAt(b),d=(d<<5)-d+c,d&=d;return d},c.m=function(a){var b,c="0123456789",d="",e="",f=8,g=10,h=10;if(1==a){for(c+="ABCDEF",a=0;16>a;a++)b=Math.floor(Math.random()*f),d+=c.substring(b,b+1),b=Math.floor(Math.random()*f),e+=c.substring(b,b+1),f=16;return d+"-"+e}for(a=0;19>a;a++)b=Math.floor(Math.random()*g),d+=c.substring(b,b+1),0==a&&9==b?g=3:(1==a||2==a)&&10!=g&&2>b?g=10:a>2&&(g=10),b=Math.floor(Math.random()*h),e+=c.substring(b,b+1),0==a&&9==b?h=3:(1==a||2==a)&&10!=h&&2>b?h=10:a>2&&(h=10);return d+e},c.I=function(){var a;if(!a&&d.location&&(a=d.location.hostname),a)if(/^[0-9.]+$/.test(a))a="";else{var b=a.split("."),c=b.length-1,e=c-1;if(c>1&&2>=b[c].length&&(2==b[c-1].length||0>",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,nd,".indexOf(","+b[c]+","))&&e--,e>0)for(a="";c>=e;)a=b[c]+(a?".":"")+a,c--}return a},c.cookieRead=function(a){var a=encodeURIComponent(a),b=(";"+f.cookie).split(" ").join(";"),c=b.indexOf(";"+a+"="),d=0>c?c:b.indexOf(";",c+1);return 0>c?"":decodeURIComponent(b.substring(c+2+a.length,0>d?b.length:d))},c.cookieWrite=function(a,b,d){var e,g=c.cookieLifetime,b=""+b,g=g?(""+g).toUpperCase():"";return d&&"SESSION"!=g&&"NONE"!=g?(e=""!=b?parseInt(g?g:0):-60)?(d=new Date,d.setTime(d.getTime()+1e3*e)):1==d&&(d=new Date,e=d.getYear(),d.setYear(e+2+(1900>e?1900:0))):d=0,a&&"NONE"!=g?(f.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+"; path=/;"+(d?" expires="+d.toGMTString()+";":"")+(c.cookieDomain?" domain="+c.cookieDomain+";":""),c.cookieRead(a)==b):0},c.e=g,c.w=function(a,b){try{"function"==typeof a?a.apply(d,b):a[1].apply(a[0],b)}catch(c){}},c.L=function(a,b){b&&(c.e==g&&(c.e={}),void 0==c.e[a]&&(c.e[a]=[]),c.e[a].push(b))},c.l=function(a,b){if(c.e!=g){var d=c.e[a];if(d)for(;0<d.length;)c.w(d.shift(),b)}},c.j=g,c.J=function(a,b,d){var e,h=0,i=0;if(b&&f){for(e=0;!h&&2>e;){try{h=(h=f.getElementsByTagName(e>0?"HEAD":"head"))&&0<h.length?h[0]:0}catch(j){h=0}e++}if(!h)try{f.body&&(h=f.body)}catch(k){h=0}if(h)for(e=0;!i&&2>e;){try{i=f.createElement(e>0?"SCRIPT":"script")}catch(l){i=0}e++}}b&&h&&i?(i.type="text/javascript",i.setAttribute("async","async"),i.src=b,h.firstChild?h.insertBefore(i,h.firstChild):h.appendChild(i),d&&(c.j==g&&(c.j={}),c.j[a]=setTimeout(d,c.loadTimeout))):d&&d()},c.H=function(a){c.j!=g&&c.j[a]&&(clearTimeout(c.j[a]),c.j[a]=0)},c.D=i,c.F=i,c.isAllowed=function(){return!c.D&&(c.D=h,c.cookieRead(c.cookieName)||c.cookieWrite(c.cookieName,"T",1))&&(c.F=h),c.F},c.a=g,c.c=g;var j=c.V;j||(j="MC");var k=c.Y;k||(k="MCMID");var l=c.X;l||(l="MCCIDH");var m=c.W;m||(m="MCAS");var n=c.T;n||(n="A");var o=c.Q;o||(o="MCAID");var p=c.U;p||(p="AAM");var q=c.S;q||(q="MCAAMLH");var r=c.R;r||(r="MCAAMB");var s=c.Z;if(s||(s="NONE"),c.t=0,c.B=function(){if(!c.t){var a=c.version;if(c.audienceManagerServer&&(a+="|"+c.audienceManagerServer),c.audienceManagerServerSecure&&(a+="|"+c.audienceManagerServerSecure),c.audienceManagerCustomerIDDPIDs)for(var b in c.audienceManagerCustomerIDDPIDs)!Object.prototype[b]&&c.audienceManagerCustomerIDDPIDs[b]&&(a+=b+"="+c.audienceManagerCustomerIDDPIDs[b]);c.t=c.C(a)}return c.t},c.G=i,c.h=function(){if(!c.G){c.G=h;var a,b,d,e=c.B(),f=i,j=c.cookieRead(c.cookieName),k=new Date;if(c.a==g&&(c.a={}),j&&"T"!=j)for(j=j.split("|"),j[0].match(/^[\-0-9]+$/)&&(parseInt(j[0])!=e&&(f=h),j.shift()),1==j.length%2&&j.pop(),e=0;e<j.length;e+=2)a=j[e].split("-"),b=a[0],d=j[e+1],a=1<a.length?parseInt(a[1]):0,f&&(b==l&&(d=""),a>0&&(a=k.getTime()/1e3-60)),b&&d&&(c.d(b,d,1),a>0&&(c.a["expire"+b]=a,k.getTime()>=1e3*a&&(c.c||(c.c={}),c.c[b]=h)));!c.b(o)&&(j=c.cookieRead("s_vi"))&&(j=j.split("|"),1<j.length&&0<=j[0].indexOf("v1")&&(d=j[1],e=d.indexOf("["),e>=0&&(d=d.substring(0,e)),d&&d.match(/^[0-9a-fA-F\-]+$/)&&c.d(o,d)))}},c.M=function(){var a,b,d=c.B();for(a in c.a)!Object.prototype[a]&&c.a[a]&&"expire"!=a.substring(0,6)&&(b=c.a[a],d+=(d?"|":"")+a+(c.a["expire"+a]?"-"+c.a["expire"+a]:"")+"|"+b);c.cookieWrite(c.cookieName,d,1)},c.b=function(a,b){return c.a==g||!b&&c.c&&c.c[a]?g:c.a[a]},c.d=function(a,b,d){c.a==g&&(c.a={}),c.a[a]=b,d||c.M()},c.p=function(a,b){var d=new Date;d.setTime(d.getTime()+1e3*b),c.a==g&&(c.a={}),c.a["expire"+a]=Math.floor(d.getTime()/1e3),0>b?(c.c||(c.c={}),c.c[a]=h):c.c&&(c.c[a]=i)},c.A=function(a){return a&&("object"==typeof a&&(a=a.d_mid?a.d_mid:a.visitorID?a.visitorID:a.id?a.id:a.uuid?a.uuid:""+a),a&&(a=a.toUpperCase(),"NOTARGET"==a&&(a=s)),!a||a!=s&&!a.match(/^[0-9a-fA-F\-]+$/))&&(a=""),a},c.i=function(a,b){if(c.H(a),c.g!=g&&(c.g[a]=i),a==j){var d=c.b(k);if(!d){if(d="object"==typeof b&&b.mid?b.mid:c.A(b),!d){if(c.r)return void c.getAnalyticsVisitorID(null,!1,!0);d=c.m()}c.d(k,d)}d&&d!=s||(d=""),"object"==typeof b&&((b.d_region||b.dcs_region||b.d_blob||b.blob)&&c.i(p,b),c.r&&b.mid&&c.i(n,{id:b.id})),c.l(k,[d])}if(a==p&&"object"==typeof b){d=604800,void 0!=b.id_sync_ttl&&b.id_sync_ttl&&(d=parseInt(b.id_sync_ttl));var e=c.b(q);e||((e=b.d_region)||(e=b.dcs_region),e&&(c.p(q,d),c.d(q,e))),e||(e=""),c.l(q,[e]),e=c.b(r),(b.d_blob||b.blob)&&((e=b.d_blob)||(e=b.blob),c.p(r,d),c.d(r,e)),e||(e=""),c.l(r,[e]),!b.error_msg&&c.o&&c.d(l,c.o)}a==n&&(d=c.b(o),d||((d=c.A(b))?c.p(r,-1):d=s,c.d(o,d)),d&&d!=s||(d=""),c.l(o,[d]))},c.g=g,c.n=function(a,b,d,e){var f,i="";return c.isAllowed()&&(c.h(),i=c.b(a),!i&&(a==k?f=j:a==q||a==r?f=p:a==o&&(f=n),f))?(!b||c.g!=g&&c.g[f]||(c.g==g&&(c.g={}),c.g[f]=h,c.J(f,b,function(){if(!c.b(a)){var b="";a==k?b=c.m():f==p&&(b={error_msg:"timeout"}),c.i(f,b)}})),c.L(a,d),b||c.i(f,{id:s}),""):(a!=k&&a!=o||i!=s||(i="",e=h),d&&e&&c.w(d,[i]),i)},c._setMarketingCloudFields=function(a){c.h(),c.i(j,a)},c.setMarketingCloudVisitorID=function(a){c._setMarketingCloudFields(a)},c.r=i,c.getMarketingCloudVisitorID=function(a,b){return c.isAllowed()?(c.marketingCloudServer&&0>c.marketingCloudServer.indexOf(".demdex.net")&&(c.r=h),c.n(k,c.s("_setMarketingCloudFields"),a,b)):""},c.K=function(){c.getAudienceManagerBlob()},c.f={},c.z=i,c.o="",c.setCustomerIDs=function(a){if(c.f=a,c.isAllowed()){c.h();var b,d,a=c.b(l),e="";a||(a=0);for(b in c.f)d=c.f[b],!Object.prototype[b]&&d&&(e+=(e?"|":"")+b+"|"+d);c.o=c.C(e),c.o!=a&&(c.z=h,c.K())}},c.getCustomerIDs=function(){return c.f},c._setAnalyticsFields=function(a){c.h(),c.i(n,a)},c.setAnalyticsVisitorID=function(a){c._setAnalyticsFields(a)},c.getAnalyticsVisitorID=function(a,b,d){if(c.isAllowed()){var e="";if(d||(e=c.getMarketingCloudVisitorID(function(){c.getAnalyticsVisitorID(a,h)})),e||d){var f=d?c.marketingCloudServer:c.trackingServer,g="";return c.loadSSL&&(d?c.marketingCloudServerSecure&&(f=c.marketingCloudServerSecure):c.trackingServerSecure&&(f=c.trackingServerSecure)),f&&(g="http"+(c.loadSSL?"s":"")+"://"+f+"/id?callback=s_c_il%5B"+c._in+"%5D._set"+(d?"MarketingCloud":"Analytics")+"Fields&mcorgid="+encodeURIComponent(c.marketingCloudOrgID)+(e?"&mid="+e:"")),c.n(d?k:o,g,a,b)}}return""},c._setAudienceManagerFields=function(a){c.h(),c.i(p,a)},c.s=function(a){var b,d,e=c.audienceManagerServer,f="",g=c.b(k),i=c.b(r,h),j=c.b(o),j=j&&j!=s?"&d_cid_ic=AVID%01"+encodeURIComponent(j):"",l="";if(c.loadSSL&&c.audienceManagerServerSecure&&(e=c.audienceManagerServerSecure),e){if(c.f)for(b in c.f)!Object.prototype[b]&&(f=c.f[b])&&(j+="&d_cid_ic="+encodeURIComponent(b)+"%01"+encodeURIComponent(f),c.audienceManagerCustomerIDDPIDs&&(d=c.audienceManagerCustomerIDDPIDs[b])&&(l+="&d_cid="+d+"%01"+encodeURIComponent(f)));a||(a="_setAudienceManagerFields"),f="http"+(c.loadSSL?"s":"")+"://"+e+"/id?d_rtbd=json&d_ver=2"+(!g&&c.r?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(c.marketingCloudOrgID)+(g?"&d_mid="+g:"")+(i?"&d_blob="+encodeURIComponent(i):"")+j+l+"&d_cb=s_c_il%5B"+c._in+"%5D."+a}return f},c.getAudienceManagerLocationHint=function(a,b){if(c.isAllowed()&&c.getMarketingCloudVisitorID(function(){c.getAudienceManagerLocationHint(a,h)})){var d=c.b(o);if(d||(d=c.getAnalyticsVisitorID(function(){c.getAudienceManagerLocationHint(a,h)})),d)return c.n(q,c.s(),a,b)}return""},c.getAudienceManagerBlob=function(a,b){if(c.isAllowed()&&c.getMarketingCloudVisitorID(function(){c.getAudienceManagerBlob(a,h)})){var d=c.b(o);if(d||(d=c.getAnalyticsVisitorID(function(){c.getAudienceManagerBlob(a,h)})),d)return d=c.s(),c.z&&c.p(r,-1),c.n(r,d,a,b)}return""},e.AUTH_STATE_UNAUTHENTICATED=0,e.AUTH_STATE_AUTHENTICATED=1,e.AUTH_STATE_ASSUMED_AUTHENTICATED=2,e.AUTH_STATE_LOGGEDOUT=3,c.setAuthState=function(a){c.isAllowed()&&(c.h(),c.d(m,a))},c.getAuthState=function(){return c.isAllowed()?(c.h(),c.b(m)):0},c.k="",c.q={},c.u="",c.v={},c.getSupplementalDataID=function(a,b){!c.k&&!b&&(c.k=c.m(1));var d=c.k;return c.u&&!c.v[a]?(d=c.u,c.v[a]=h):d&&(c.q[a]&&(c.u=c.k,c.v=c.q,c.k=d=b?"":c.m(1),c.q={}),d&&(c.q[a]=h)),d},0>a.indexOf("@")&&(a+="@AdobeOrg"),c.marketingCloudOrgID=a,c.namespace=b,c.cookieName="AMCV_"+a,c.cookieDomain=c.I(),c.cookieDomain==d.location.hostname&&(c.cookieDomain=""),b){var e="AMCV_"+b,t=c.cookieRead(c.cookieName),u=c.cookieRead(e);!t&&u&&(c.cookieWrite(c.cookieName,u,1),c.cookieWrite(e,"",-60))}c.loadSSL=0<=d.location.protocol.toLowerCase().indexOf("https"),c.loadTimeout=500,c.marketingCloudServer=c.audienceManagerServer="dpm.demdex.net"}function AppMeasurement(){var a=this;a.version="1.4.4";var b=window;b.s_c_in||(b.s_c_il=[],b.s_c_in=0),a._il=b.s_c_il,a._in=b.s_c_in,a._il[a._in]=a,b.s_c_in++,a._c="s_c";var c=b.yb;c||(c=null);var d,e,f=b;try{for(d=f.parent,e=f.location;d&&d.location&&e&&""+d.location!=""+e&&f.location&&""+d.location!=""+f.location&&d.location.host==e.host;)f=d,d=f.parent}catch(g){}a.nb=function(a){try{}catch(b){}},a.za=function(a){return""+parseInt(a)==""+a},a.replace=function(a,b,c){return!a||0>a.indexOf(b)?a:a.split(b).join(c)},a.escape=function(b){var c,d;if(!b)return b;for(b=encodeURIComponent(b),c=0;7>c;c++)d="+~!*()'".substring(c,c+1),0<=b.indexOf(d)&&(b=a.replace(b,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return b},a.unescape=function(b){if(!b)return b;b=0<=b.indexOf("+")?a.replace(b,"+"," "):b;try{return decodeURIComponent(b)}catch(c){}return unescape(b)},a.eb=function(){var c,d=b.location.hostname,e=a.fpCookieDomainPeriods;if(e||(e=a.cookieDomainPeriods),d&&!a.cookieDomain&&!/^[0-9.]+$/.test(d)&&(e=e?parseInt(e):2,e=e>2?e:2,c=d.lastIndexOf("."),c>=0)){for(;c>=0&&e>1;)c=d.lastIndexOf(".",c-1),e--;a.cookieDomain=c>0?d.substring(c):d}return a.cookieDomain},a.c_r=a.cookieRead=function(b){b=a.escape(b);var c=" "+a.d.cookie,d=c.indexOf(" "+b+"="),e=0>d?d:c.indexOf(";",d);return b=0>d?"":a.unescape(c.substring(d+2+b.length,0>e?c.length:e)),"[[B]]"!=b?b:""},a.c_w=a.cookieWrite=function(b,c,d){var e,f=a.eb(),g=a.cookieLifetime;return c=""+c,g=g?(""+g).toUpperCase():"",d&&"SESSION"!=g&&"NONE"!=g&&((e=""!=c?parseInt(g?g:0):-60)?(d=new Date,d.setTime(d.getTime()+1e3*e)):1==d&&(d=new Date,e=d.getYear(),d.setYear(e+5+(1900>e?1900:0)))),b&&"NONE"!=g?(a.d.cookie=b+"="+a.escape(""!=c?c:"[[B]]")+"; path=/;"+(d&&"SESSION"!=g?" expires="+d.toGMTString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(b)==c):0},a.F=[],a.ba=function(b,c,d){if(a.ta)return 0;a.maxDelay||(a.maxDelay=250);var e=0,f=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,h=["webkitvisibilitychange","visibilitychange"];if(g||(g=a.d.webkitVisibilityState),g&&"prerender"==g){if(!a.ca)for(a.ca=1,d=0;d<h.length;d++)a.d.addEventListener(h[d],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState),"visible"==b&&(a.ca=0,a.delayReady())});e=1,f=0}else d||a.l("_d")&&(e=1);return e&&(a.F.push({m:b,a:c,t:f}),a.ca||setTimeout(a.delayReady,a.maxDelay)),e},a.delayReady=function(){var b,c=(new Date).getTime(),d=0;for(a.l("_d")?d=1:a.na();0<a.F.length;){if(b=a.F.shift(),d&&!b.t&&b.t>c){a.F.unshift(b),setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.ta=1,a[b.m].apply(a,b.a),a.ta=0}},a.setAccount=a.sa=function(b){var c,d;if(!a.ba("setAccount",arguments))if(a.account=b,a.allAccounts)for(c=a.allAccounts.concat(b.split(",")),a.allAccounts=[],c.sort(),d=0;d<c.length;d++)0!=d&&c[d-1]==c[d]||a.allAccounts.push(c[d]);else a.allAccounts=b.split(",")},a.foreachVar=function(b,c){var d,e,f,g,h="";for(f=e="",a.lightProfileID?(d=a.J,(h=a.lightTrackVars)&&(h=","+h+","+a.ga.join(",")+",")):(d=a.c,(a.pe||a.linkType)&&(h=a.linkTrackVars,e=a.linkTrackEvents,a.pe&&(f=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[f]&&(h=a[f].xb,e=a[f].wb))),h&&(h=","+h+","+a.A.join(",")+","),e&&h&&(h+=",events,")),c&&(c=","+c+","),e=0;e<d.length;e++)f=d[e],(g=a[f])&&(!h||0<=h.indexOf(","+f+","))&&(!c||0<=c.indexOf(","+f+","))&&b(f,g)},a.L=function(b,c,d,e,f){var g,h,i,j,k="",l=0;if("contextData"==b&&(b="c"),c){for(g in c)if(!(Object.prototype[g]||f&&g.substring(0,f.length)!=f)&&c[g]&&(!d||0<=d.indexOf(","+(e?e+".":"")+g+","))){if(i=!1,l)for(h=0;h<l.length;h++)g.substring(0,l[h].length)==l[h]&&(i=!0);if(!i&&(""==k&&(k+="&"+b+"."),h=c[g],f&&(g=g.substring(f.length)),0<g.length))if(i=g.indexOf("."),i>0)h=g.substring(0,i),i=(f?f:"")+h+".",l||(l=[]),l.push(i),k+=a.L(h,c,d,e,i);else if("boolean"==typeof h&&(h=h?"true":"false"),h){if("retrieveLightData"==e&&0>f.indexOf(".contextData."))switch(i=g.substring(0,4),j=g.substring(4),g){case"transactionID":g="xact";break;case"channel":g="ch";break;case"campaign":g="v0";break;default:a.za(j)&&("prop"==i?g="c"+j:"eVar"==i?g="v"+j:"list"==i?g="l"+j:"hier"==i&&(g="h"+j,h=h.substring(0,255)))}k+="&"+a.escape(g)+"="+a.escape(h)}}""!=k&&(k+="&."+b)}return k},a.gb=function(){var b,c,d,e,f,g,h,i,j="",k="",l="",m=c="";for(a.lightProfileID?(b=a.J,(k=a.lightTrackVars)&&(k=","+k+","+a.ga.join(",")+",")):(b=a.c,(a.pe||a.linkType)&&(k=a.linkTrackVars,l=a.linkTrackEvents,a.pe&&(c=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[c]&&(k=a[c].xb,l=a[c].wb))),k&&(k=","+k+","+a.A.join(",")+","),l&&(l=","+l+",",k&&(k+=",events,")),a.events2&&(m+=(""!=m?",":"")+a.events2)),a.AudienceManagement&&a.AudienceManagement.isReady()&&(j+=a.L("d",a.AudienceManagement.getEventCallConfigParams())),c=0;c<b.length;c++){if(e=b[c],f=a[e],d=e.substring(0,4),g=e.substring(4),!f&&"events"==e&&m&&(f=m,m=""),f&&(!k||0<=k.indexOf(","+e+","))){switch(e){case"supplementalDataID":e="sdid";break;case"timestamp":e="ts";break;case"dynamicVariablePrefix":e="D";break;case"visitorID":e="vid";break;case"marketingCloudVisitorID":e="mid";break;case"analyticsVisitorID":e="aid";break;case"audienceManagerLocationHint":e="aamlh";break;case"audienceManagerBlob":e="aamb";break;case"authState":e="as";break;case"pageURL":e="g",255<f.length&&(a.pageURLRest=f.substring(255),f=f.substring(0,255));break;case"pageURLRest":e="-g";break;case"referrer":e="r";break;case"vmk":case"visitorMigrationKey":e="vmt";break;case"visitorMigrationServer":e="vmf",a.ssl&&a.visitorMigrationServerSecure&&(f="");break;case"visitorMigrationServerSecure":e="vmf",!a.ssl&&a.visitorMigrationServer&&(f="");break;case"charSet":e="ce";break;case"visitorNamespace":e="ns";break;case"cookieDomainPeriods":e="cdp";break;case"cookieLifetime":e="cl";break;case"variableProvider":e="vvp";break;case"currencyCode":e="cc";break;case"channel":e="ch";break;case"transactionID":e="xact";break;case"campaign":e="v0";break;case"latitude":e="lat";break;case"longitude":e="lon";break;case"resolution":e="s";break;case"colorDepth":e="c";break;case"javascriptVersion":e="j";break;case"javaEnabled":e="v";break;case"cookiesEnabled":e="k";break;case"browserWidth":e="bw";break;case"browserHeight":e="bh";break;case"connectionType":e="ct";break;case"homepage":e="hp";break;case"events":if(m&&(f+=(""!=f?",":"")+m),l)for(g=f.split(","),f="",d=0;d<g.length;d++)h=g[d],i=h.indexOf("="),i>=0&&(h=h.substring(0,i)),i=h.indexOf(":"),i>=0&&(h=h.substring(0,i)),0<=l.indexOf(","+h+",")&&(f+=(f?",":"")+g[d]);break;case"events2":f="";break;case"contextData":j+=a.L("c",a[e],k,e),f="";break;case"lightProfileID":e="mtp";break;case"lightStoreForSeconds":e="mtss",a.lightProfileID||(f="");break;case"lightIncrementBy":e="mti",a.lightProfileID||(f="");break;case"retrieveLightProfiles":e="mtsr";break;case"deleteLightProfiles":e="mtsd";break;case"retrieveLightData":a.retrieveLightProfiles&&(j+=a.L("mts",a[e],k,e)),f="";break;default:a.za(g)&&("prop"==d?e="c"+g:"eVar"==d?e="v"+g:"list"==d?e="l"+g:"hier"==d&&(e="h"+g,f=f.substring(0,255)))}f&&(j+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(f):f))}"pev3"==e&&a.e&&(j+=a.e)}return j},a.u=function(a){var b=a.tagName;return"undefined"!=""+a.Bb||"undefined"!=""+a.rb&&"HTML"!=(""+a.rb).toUpperCase()?"":(b=b&&b.toUpperCase?b.toUpperCase():"","SHAPE"==b&&(b=""),b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A")),b)},a.va=function(a){var b,c,d,e=a.href?a.href:"";return b=e.indexOf(":"),c=e.indexOf("?"),d=e.indexOf("/"),e&&(0>b||c>=0&&b>c||d>=0&&b>d)&&(c=a.protocol&&1<a.protocol.length?a.protocol:l.protocol?l.protocol:"",b=l.pathname.lastIndexOf("/"),e=(c?c+"//":"")+(a.host?a.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>b?0:b)+"/":"")+e),e},a.G=function(b){var c,d,e=a.u(b),f="",g=0;return e&&(c=b.protocol,d=b.onclick,!b.href||"A"!=e&&"AREA"!=e||d&&c&&!(0>c.toLowerCase().indexOf("javascript"))?d?(f=a.replace(a.replace(a.replace(a.replace(""+d,"\r",""),"\n",""),"	","")," ",""),g=2):"INPUT"==e||"SUBMIT"==e?(b.value?f=b.value:b.innerText?f=b.innerText:b.textContent&&(f=b.textContent),g=3):b.src&&"IMAGE"==e&&(f=b.src):f=a.va(b),f)?{id:f.substring(0,100),type:g}:0},a.zb=function(b){for(var c=a.u(b),d=a.G(b);b&&!d&&"BODY"!=c;)(b=b.parentElement?b.parentElement:b.parentNode)&&(c=a.u(b),d=a.G(b));return d&&"BODY"!=c||(b=0),b&&(c=b.onclick?""+b.onclick:"",0<=c.indexOf(".tl(")||0<=c.indexOf(".trackLink("))&&(b=0),b},a.qb=function(){var c,d,e,f,g=a.linkObject,h=a.linkType,i=a.linkURL;if(a.ha=1,g||(a.ha=0,g=a.clickObject),g){for(c=a.u(g),d=a.G(g);g&&!d&&"BODY"!=c;)(g=g.parentElement?g.parentElement:g.parentNode)&&(c=a.u(g),d=a.G(g));if(d&&"BODY"!=c||(g=0),g){var j=g.onclick?""+g.onclick:"";(0<=j.indexOf(".tl(")||0<=j.indexOf(".trackLink("))&&(g=0)}}else a.ha=1;if(!i&&g&&(i=a.va(g)),i&&!a.linkLeaveQueryString&&(e=i.indexOf("?"),e>=0&&(i=i.substring(0,e))),!h&&i){var k,l=0,m=0;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(j=i.toLowerCase(),e=j.indexOf("?"),f=j.indexOf("#"),e>=0?f>=0&&e>f&&(e=f):e=f,e>=0&&(j=j.substring(0,e)),e=a.linkDownloadFileTypes.toLowerCase().split(","),f=0;f<e.length;f++)(k=e[f])&&j.substring(j.length-(k.length+1))=="."+k&&(h="d");if(a.trackExternalLinks&&!h&&(j=i.toLowerCase(),a.ya(j)&&(a.linkInternalFilters||(a.linkInternalFilters=b.location.hostname),e=0,a.linkExternalFilters?(e=a.linkExternalFilters.toLowerCase().split(","),l=1):a.linkInternalFilters&&(e=a.linkInternalFilters.toLowerCase().split(",")),e))){for(f=0;f<e.length;f++)k=e[f],0<=j.indexOf(k)&&(m=1);m?l&&(h="e"):l||(h="e")}}a.linkObject=g,a.linkURL=i,a.linkType=h,(a.trackClickMap||a.trackInlineStats)&&(a.e="",g&&(h=a.pageName,i=1,g=g.sourceIndex,h||(h=a.pageURL,i=0),b.s_objectID&&(d.id=b.s_objectID,g=d.type=1),h&&d&&d.id&&c&&(a.e="&pid="+a.escape(h.substring(0,255))+(i?"&pidt="+i:"")+"&oid="+a.escape(d.id.substring(0,100))+(d.type?"&oidt="+d.type:"")+"&ot="+c+(g?"&oi="+g:""))))},a.hb=function(){var b=a.ha,c=a.linkType,d=a.linkURL,e=a.linkName;if(c&&(d||e)&&(c=c.toLowerCase(),"d"!=c&&"e"!=c&&(c="o"),a.pe="lnk_"+c,a.pev1=d?a.escape(d):"",a.pev2=e?a.escape(e):"",b=1),a.abort&&(b=0),a.trackClickMap||a.trackInlineStats){var f,g,h,c={},d=0,i=a.cookieRead("s_sq"),j=i?i.split("&"):0,i=0;if(j)for(f=0;f<j.length;f++)g=j[f].split("="),e=a.unescape(g[0]).split(","),g=a.unescape(g[1]),c[g]=e;if(e=a.account.split(","),b||a.e){b&&!a.e&&(i=1);for(g in c)if(!Object.prototype[g])for(f=0;f<e.length;f++)for(i&&(h=c[g].join(","),h==a.account&&(a.e+=("&"!=g.charAt(0)?"&":"")+g,c[g]=[],d=1)),j=0;j<c[g].length;j++)h=c[g][j],h==e[f]&&(i&&(a.e+="&u="+a.escape(h)+("&"!=g.charAt(0)?"&":"")+g+"&u=0"),c[g].splice(j,1),d=1);if(b||(d=1),d){i="",f=2,!b&&a.e&&(i=a.escape(e.join(","))+"="+a.escape(a.e),f=1);for(g in c)!Object.prototype[g]&&f>0&&0<c[g].length&&(i+=(i?"&":"")+a.escape(c[g].join(","))+"="+a.escape(g),f--);a.cookieWrite("s_sq",i)}}}return b},a.ib=function(){if(!a.vb){var b,c,d=new Date,e=f.location,g=c=b="",h="",i="",j="1.2",k=a.cookieWrite("s_cc","true",0)?"Y":"N",l="",m="";if(d.setUTCDate&&(j="1.3",0..toPrecision&&(j="1.5",d=[],d.forEach))){j="1.6",c=0,b={};try{c=new Iterator(b),c.next&&(j="1.7",d.reduce&&(j="1.8",j.trim&&(j="1.8.1",Date.parse&&(j="1.8.2",Object.create&&(j="1.8.5")))))}catch(n){}}b=screen.width+"x"+screen.height,g=navigator.javaEnabled()?"Y":"N",c=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,h=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth,i=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),l=a.b.Ab(e)?"Y":"N"}catch(o){}try{a.b.addBehavior("#default#clientCaps"),m=a.b.connectionType}catch(p){}a.resolution=b,a.colorDepth=c,a.javascriptVersion=j,a.javaEnabled=g,a.cookiesEnabled=k,a.browserWidth=h,a.browserHeight=i,a.connectionType=m,a.homepage=l,a.vb=1}},a.K={},a.loadModule=function(c,d){var e=a.K[c];if(!e){e=b["AppMeasurement_Module_"+c]?new b["AppMeasurement_Module_"+c](a):{},a.K[c]=a[c]=e,e.Na=function(){return e.Ra},e.Sa=function(b){(e.Ra=b)&&(a[c+"_onLoad"]=b,a.ba(c+"_onLoad",[a,e],1)||b(a,e))};try{Object.defineProperty?Object.defineProperty(e,"onLoad",{get:e.Na,set:e.Sa}):e._olc=1}catch(f){e._olc=1}}d&&(a[c+"_onLoad"]=d,a.ba(c+"_onLoad",[a,e],1)||d(a,e))},a.l=function(b){var c,d;for(c in a.K)if(!Object.prototype[c]&&(d=a.K[c])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[b]&&d[b]()))return 1;return 0},a.lb=function(){var b=Math.floor(1e13*Math.random()),c=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),e=a.cookieRead(d);if(c){if(e&&(e=parseInt(e)),!e){if(!a.cookieWrite(d,b))return 0;e=b}if(e%1e4>v)return 0}return 1},a.M=function(b,c){var d,e,f,g,h,i;for(d=0;2>d;d++)for(e=d>0?a.oa:a.c,f=0;f<e.length;f++)if(g=e[f],(h=b[g])||b["!"+g]){if(!c&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(i in a[g])h[i]||(h[i]=a[g][i]);a[g]=h}},a.Ga=function(b,c){var d,e,f,g;for(d=0;2>d;d++)for(e=d>0?a.oa:a.c,f=0;f<e.length;f++)g=e[f],b[g]=a[g],c||b[g]||(b["!"+g]=1)},a.cb=function(a){var b,c,d,e,f,g,h=0,i="",j="";if(a&&255<a.length&&(b=""+a,c=b.indexOf("?"),c>0&&(g=b.substring(c+1),b=b.substring(0,c),e=b.toLowerCase(),d=0,"http://"==e.substring(0,7)?d+=7:"https://"==e.substring(0,8)&&(d+=8),c=e.indexOf("/",d),c>0&&(e=e.substring(d,c),f=b.substring(c),b=b.substring(0,c),0<=e.indexOf("google")?h=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(h=",p,ei,"),h&&g)))){if((a=g.split("&"))&&1<a.length){for(d=0;d<a.length;d++)e=a[d],c=e.indexOf("="),c>0&&0<=h.indexOf(","+e.substring(0,c)+",")?i+=(i?"&":"")+e:j+=(j?"&":"")+e;i&&j?g=i+"&"+j:j=""}c=253-(g.length-j.length)-b.length,a=b+(c>0?f.substring(0,c):"")+"?"+g}return a},a.Ma=function(b){var c=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];if(c||(c=a.d.webkitVisibilityState),c&&"prerender"==c){if(b)for(c=0;c<d.length;c++)a.d.addEventListener(d[c],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState),"visible"==c&&b()});return!1}return!0},a.Y=!1,a.C=!1,a.Ta=function(){a.C=!0,a.i()},a.W=!1,a.Q=!1,a.Qa=function(b){a.marketingCloudVisitorID=b,a.Q=!0,a.i()},a.T=!1,a.N=!1,a.Ia=function(b){a.analyticsVisitorID=b,a.N=!0,a.i()},a.V=!1,a.P=!1,a.Ka=function(b){a.audienceManagerLocationHint=b,a.P=!0,a.i()},a.U=!1,a.O=!1,a.Ja=function(b){a.audienceManagerBlob=b,a.O=!0,a.i()},a.La=function(b){return a.maxDelay||(a.maxDelay=250),a.l("_d")?(b&&setTimeout(function(){b()},a.maxDelay),!1):!0},a.X=!1,a.B=!1,a.na=function(){a.B=!0,a.i()},a.isReadyToTrack=function(){var b=!0,c=a.visitor;return a.Y||a.C||(a.Ma(a.Ta)?a.C=!0:a.Y=!0),a.Y&&!a.C?!1:(c&&c.isAllowed()&&(a.W||a.marketingCloudVisitorID||!c.getMarketingCloudVisitorID||(a.W=!0,a.marketingCloudVisitorID=c.getMarketingCloudVisitorID([a,a.Qa]),a.marketingCloudVisitorID&&(a.Q=!0)),a.T||a.analyticsVisitorID||!c.getAnalyticsVisitorID||(a.T=!0,a.analyticsVisitorID=c.getAnalyticsVisitorID([a,a.Ia]),a.analyticsVisitorID&&(a.N=!0)),a.V||a.audienceManagerLocationHint||!c.getAudienceManagerLocationHint||(a.V=!0,a.audienceManagerLocationHint=c.getAudienceManagerLocationHint([a,a.Ka]),a.audienceManagerLocationHint&&(a.P=!0)),a.U||a.audienceManagerBlob||!c.getAudienceManagerBlob||(a.U=!0,a.audienceManagerBlob=c.getAudienceManagerBlob([a,a.Ja]),a.audienceManagerBlob&&(a.O=!0)),a.W&&!a.Q&&!a.marketingCloudVisitorID||a.T&&!a.N&&!a.analyticsVisitorID||a.V&&!a.P&&!a.audienceManagerLocationHint||a.U&&!a.O&&!a.audienceManagerBlob)&&(b=!1),a.X||a.B||(a.La(a.na)?a.B=!0:a.X=!0),a.X&&!a.B&&(b=!1),b)},a.k=c,a.o=0,a.callbackWhenReadyToTrack=function(b,d,e){var f;f={},f.Xa=b,f.Wa=d,f.Ua=e,a.k==c&&(a.k=[]),a.k.push(f),0==a.o&&(a.o=setInterval(a.i,100))},a.i=function(){var b;if(a.isReadyToTrack()&&(a.o&&(clearInterval(a.o),a.o=0),a.k!=c))for(;0<a.k.length;)b=a.k.shift(),b.Wa.apply(b.Xa,b.Ua)},a.Oa=function(b){var d,e,f=c,g=c;if(!a.isReadyToTrack()){if(d=[],b!=c)for(e in f={},b)f[e]=b[e];return g={},a.Ga(g,!0),d.push(f),d.push(g),a.callbackWhenReadyToTrack(a,a.track,d),!0}return!1},a.fb=function(){var b,c=a.cookieRead("s_fid"),d="",e="";b=8;var f=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)b=Math.floor(Math.random()*b),d+="0123456789ABCDEF".substring(b,b+1),b=Math.floor(Math.random()*f),e+="0123456789ABCDEF".substring(b,b+1),b=f=16;c=d+"-"+e}return a.cookieWrite("s_fid",c,1)||(c=0),c},a.t=a.track=function(c,d){var e,g=new Date,h="s"+Math.floor(g.getTime()/108e5)%10+Math.floor(1e13*Math.random()),i=g.getYear(),i="t="+a.escape(g.getDate()+"/"+g.getMonth()+"/"+(1900>i?i+1900:i)+" "+g.getHours()+":"+g.getMinutes()+":"+g.getSeconds()+" "+g.getDay()+" "+g.getTimezoneOffset());a.visitor&&(a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState()),!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0))),a.l("_s"),a.Oa(c)||(d&&a.M(d),c&&(e={},a.Ga(e,0),a.M(c)),a.lb()&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.fb()),a.qb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(g.getTime()/1e3)),g=b.location,a.pageURL||(a.pageURL=g.href?g.href:g),a.referrer||a.Ha||(a.referrer=f.document.referrer),a.Ha=1,a.referrer=a.cb(a.referrer),a.l("_g")),a.hb()&&!a.abort&&(a.ib(),i+=a.gb(),a.pb(h,i),a.l("_t"),a.referrer=""))),c&&a.M(e,1)),a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=b.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0},a.tl=a.trackLink=function(b,c,d,e,f){return a.linkObject=b,a.linkType=c,a.linkName=d,f&&(a.j=b,a.q=f),a.track(e)},a.trackLight=function(b,c,d,e){return a.lightProfileID=b,a.lightStoreForSeconds=c,a.lightIncrementBy=d,a.track(e)},a.clearVars=function(){var b,c;for(b=0;b<a.c.length;b++)c=a.c[b],("prop"==c.substring(0,4)||"eVar"==c.substring(0,4)||"hier"==c.substring(0,4)||"list"==c.substring(0,4)||"channel"==c||"events"==c||"eventList"==c||"products"==c||"productList"==c||"purchaseID"==c||"transactionID"==c||"state"==c||"zip"==c||"campaign"==c)&&(a[c]=void 0)},a.tagContainerMarker="",a.pb=function(b,c){var d,e=a.trackingServer;d="";var f=a.dc,g="sc.",h=a.visitorNamespace;e?a.trackingServerSecure&&a.ssl&&(e=a.trackingServerSecure):(h||(h=a.account,e=h.indexOf(","),e>=0&&(h=h.substring(0,e)),h=h.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),f=f?(""+f).toLowerCase():"d1","2o7.net"==d&&("d1"==f?f="112":"d2"==f&&(f="122"),g=""),e=h+"."+f+"."+g+d),d=a.ssl?"https://":"http://",f=a.AudienceManagement&&a.AudienceManagement.isReady(),d+=e+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(f?"10":"1")+"/JS-"+a.version+(a.ub?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+b+"?AQB=1&ndh=1&pf=1&"+(f?"callback=s_c_il["+a._in+"].AudienceManagement.passData&":"")+c+"&AQE=1",a.ab(d),a.da()},a.ab=function(b){a.g||a.jb(),a.g.push(b),a.fa=a.r(),a.Fa()},a.jb=function(){a.g=a.mb(),a.g||(a.g=[])},a.mb=function(){var c,d;if(a.ka()){try{(d=b.localStorage.getItem(a.ia()))&&(c=b.JSON.parse(d))}catch(e){}return c}},a.ka=function(){var c=!0;return a.trackOffline&&a.offlineFilename&&b.localStorage&&b.JSON||(c=!1),c},a.wa=function(){var b=0;return a.g&&(b=a.g.length),a.v&&b++,b},a.da=function(){if(!a.v)if(a.xa=c,a.ja)a.fa>a.I&&a.Da(a.g),a.ma(500);else{var b=a.Va();b>0?a.ma(b):(b=a.ua())&&(a.v=1,a.ob(b),a.sb(b))}},a.ma=function(b){a.xa||(b||(b=0),a.xa=setTimeout(a.da,b))},a.Va=function(){var b;return!a.trackOffline||0>=a.offlineThrottleDelay?0:(b=a.r()-a.Ca,a.offlineThrottleDelay<b?0:a.offlineThrottleDelay-b)},a.ua=function(){return 0<a.g.length?a.g.shift():void 0},a.ob=function(b){if(a.debugTracking){var c="AppMeasurement Debug: "+b;b=b.split("&");var d;for(d=0;d<b.length;d++)c+="\n	"+a.unescape(b[d]);a.nb(c)}},a.Pa=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID},a.S=!1;var i;try{i=JSON.parse('{"x":"y"}')}catch(j){i=null}i&&"y"==i.x?(a.S=!0,a.R=function(a){return JSON.parse(a)}):b.$&&b.$.parseJSON?(a.R=function(a){return b.$.parseJSON(a)},a.S=!0):a.R=function(){return null},a.sb=function(c){var d,e,f;if(a.Pa()&&2047<c.length&&("undefined"!=typeof XMLHttpRequest&&(d=new XMLHttpRequest,"withCredentials"in d?e=1:d=0),d||"undefined"==typeof XDomainRequest||(d=new XDomainRequest,e=2),d&&a.AudienceManagement&&a.AudienceManagement.isReady()&&(a.S?d.pa=!0:d=0)),!d&&a.kb&&(c=c.substring(0,2047)),!d&&a.d.createElement&&a.AudienceManagement&&a.AudienceManagement.isReady()&&(d=a.d.createElement("SCRIPT"))&&"async"in d&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(d.type="text/javascript",d.setAttribute("async","async"),e=3):d=0),d||(d=new Image,d.alt=""),d.ra=function(){try{a.la&&(clearTimeout(a.la),a.la=0),d.timeout&&(clearTimeout(d.timeout),d.timeout=0)}catch(b){}},d.onload=d.tb=function(){if(d.ra(),a.$a(),a.Z(),a.v=0,a.da(),d.pa){d.pa=!1;try{var b=a.R(d.responseText);AudienceManagement.passData(b)}catch(c){}}},d.onabort=d.onerror=d.bb=function(){d.ra(),(a.trackOffline||a.ja)&&a.v&&a.g.unshift(a.Za),a.v=0,a.fa>a.I&&a.Da(a.g),a.Z(),a.ma(500)},d.onreadystatechange=function(){4==d.readyState&&(200==d.status?d.tb():d.bb())},a.Ca=a.r(),1==e||2==e){var g=c.indexOf("?");f=c.substring(0,g),g=c.substring(g+1),g=g.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==e?(d.open("POST",f,!0),d.send(g)):2==e&&(d.open("POST",f),d.send(g))}else if(d.src=c,3==e){if(a.Aa)try{f.removeChild(a.Aa)}catch(h){}f.firstChild?f.insertBefore(d,f.firstChild):f.appendChild(d),a.Aa=a.Ya}d.abort&&(a.la=setTimeout(d.abort,5e3)),a.Za=c,a.Ya=b["s_i_"+a.replace(a.account,",","_")]=d,(a.useForcedLinkTracking&&a.D||a.q)&&(a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.aa=setTimeout(a.Z,a.forcedLinkTrackingTimeout))},a.$a=function(){if(a.ka()&&!(a.Ba>a.I))try{b.localStorage.removeItem(a.ia()),a.Ba=a.r()}catch(c){}},a.Da=function(c){if(a.ka()){a.Fa();try{b.localStorage.setItem(a.ia(),b.JSON.stringify(c)),a.I=a.r()}catch(d){}}},a.Fa=function(){if(a.trackOffline)for((!a.offlineLimit||0>=a.offlineLimit)&&(a.offlineLimit=10);a.g.length>a.offlineLimit;)a.ua();
},a.forceOffline=function(){a.ja=!0},a.forceOnline=function(){a.ja=!1},a.ia=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account},a.r=function(){return(new Date).getTime()},a.ya=function(a){return a=a.toLowerCase(),0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1},a.setTagContainer=function(b){var c,d,e;for(a.ub=b,c=0;c<a._il.length;c++)if((d=a._il[c])&&"s_l"==d._c&&d.tagContainerName==b){if(a.M(d),d.lmq)for(c=0;c<d.lmq.length;c++)e=d.lmq[c],a.loadModule(e.n);if(d.ml)for(e in d.ml)if(a[e])for(c in b=a[e],e=d.ml[e])!Object.prototype[c]&&("function"!=typeof e[c]||0>(""+e[c]).indexOf("s_c_il"))&&(b[c]=e[c]);if(d.mmq)for(c=0;c<d.mmq.length;c++)e=d.mmq[c],a[e.m]&&(b=a[e.m],b[e.f]&&"function"==typeof b[e.f]&&(e.a?b[e.f].apply(b,e.a):b[e.f].apply(b)));if(d.tq)for(c=0;c<d.tq.length;c++)a.track(d.tq[c]);d.s=a;break}},a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,d,e){var f;return d||(d=a.pageURL?a.pageURL:b.location),e||(e="&"),c&&d&&(d=""+d,f=d.indexOf("?"),f>=0&&(d=e+d.substring(f+1)+e,f=d.indexOf(e+c+"="),f>=0&&(d=d.substring(f+e.length+c.length+1),f=d.indexOf(e),f>=0&&(d=d.substring(0,f)),0<d.length)))?a.unescape(d):""}},a.A="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData pe pev1 pev2 pev3 pageURLRest".split(" "),a.c=a.A.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),a.ga="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),a.J=a.ga.slice(0),a.oa="account allAccounts debugTracking visitor trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData AudienceManagement".split(" ");for(d=0;250>=d;d++)76>d&&(a.c.push("prop"+d),a.J.push("prop"+d)),a.c.push("eVar"+d),a.J.push("eVar"+d),6>d&&a.c.push("hier"+d),4>d&&a.c.push("list"+d);d="latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage".split(" "),a.c=a.c.concat(d),a.A=a.A.concat(d),a.ssl=0<=b.location.protocol.toLowerCase().indexOf("https"),a.charSet="UTF-8",a.contextData={},a.offlineThrottleDelay=0,a.offlineFilename="AppMeasurement.offline",a.Ca=0,a.fa=0,a.I=0,a.Ba=0,a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",a.w=b,a.d=b.document;try{a.kb="Microsoft Internet Explorer"==navigator.appName}catch(k){}a.Z=function(){a.aa&&(b.clearTimeout(a.aa),a.aa=c),a.j&&a.D&&a.j.dispatchEvent(a.D),a.q&&("function"==typeof a.q?a.q():a.j&&a.j.href&&(a.d.location=a.j.href)),a.j=a.D=a.q=0},a.Ea=function(){a.b=a.d.body,a.b?(a.p=function(c){var d,e,f,g,h;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.qa){if(!a.useForcedLinkTracking)return a.b.removeEventListener("click",a.p,!0),void(a.qa=a.useForcedLinkTracking=0);a.b.removeEventListener("click",a.p,!1)}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.H&&a.H==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=0;else{var i=a.H=a.clickObject;if(a.ea&&(clearTimeout(a.ea),a.ea=0),a.ea=setTimeout(function(){a.H==i&&(a.H=0)},1e4),f=a.wa(),a.track(),f<a.wa()&&a.useForcedLinkTracking&&c.target){for(g=c.target;g&&g!=a.b&&"A"!=g.tagName.toUpperCase()&&"AREA"!=g.tagName.toUpperCase();)g=g.parentNode;if(g&&(h=g.href,a.ya(h)||(h=0),e=g.target,c.target.dispatchEvent&&h&&(!e||"_self"==e||"_top"==e||"_parent"==e||b.name&&e==b.name))){try{d=a.d.createEvent("MouseEvents")}catch(j){d=new b.MouseEvent}if(d){try{d.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(k){d=0}d&&(d["s_fe_"+a._in]=d.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.j=c.target,a.D=d)}}}}}catch(l){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.p):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&b.MouseEvent)&&(a.qa=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.p,!0)),a.b.addEventListener("click",a.p,!1))):setTimeout(a.Ea,30)},a.Ea()}function s_gi(a){var b,c,d,e,f,g=window.s_c_il,h=a.split(","),i=0;if(g)for(c=0;!i&&c<g.length;){if(b=g[c],"s_c"==b._c&&(b.account||b.oun))if(b.account&&b.account==a)i=1;else for(d=b.account?b.account:b.oun,d=b.allAccounts?b.allAccounts:d.split(","),e=0;e<h.length;e++)for(f=0;f<d.length;f++)h[e]==d[f]&&(i=1);c++}return i||(b=new AppMeasurement),b.setAccount?b.setAccount(a):b.sa&&b.sa(a),b}function s_pgicq(){var a,b,c,d=window,e=d.s_giq;if(e)for(a=0;a<e.length;a++)b=e[a],c=s_gi(b.oun),c.setAccount(b.un),c.setTagContainer(b.tagContainerName);d.s_giq=0}function wmdSetContext(a,b){a&&(a=a.replace(/[^A-Za-z0-9\.]/g,"").toLowerCase(),s_md.contextData[a]=b)}function s_md_doPlugins(a){s_md.pageName||(s_md.pageName=location.protocol+"//"+location.host+location.pathname)}function _clean(a){return a=a.toLowerCase()}function _urlClean(a){return a=a.toLowerCase(),a=a.split("https://www.").join(""),a=a.split("http://www.").join(""),a=a.split("https://").join(""),a=a.split("http://").join(""),a=a.split("www.").join(""),a=a.split(".html").join(""),a=a.split(".htm").join(""),a=a.split(".aspx").join(""),a=a.split(".asp").join(""),a=a.split("default").join(""),a=a.split(" ").join("-")}function wmdTrack(a){ctrs(a)}function ctr(a){var b=new Date,c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()+20),d=a;try{d=s_md.pageName.split("_").join("-")+"_"+a+"|"+s_query}catch(e){}d=d.toLowerCase(),document.cookie="ctr="+d+"; path=/; domain="+s_domain+";expires="+c.toGMTString()}function ctrs(a){var b=new Date,c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()+20),d=a;try{d=s_md.pageName.split("_").join("-")+"_"+a}catch(e){}d=d.toLowerCase(),document.cookie="ctr="+d+"; path=/; domain="+s_domain+";expires="+c.toGMTString()}function wmdSearchTrack(a){ctr(a)}function wmdTrackerMarker(a,b){typeof a!=_ud&&""!==a&&(s_md.contextData["wb.tm"]=a,s_md.linkTrackVars="contextData.wb.tm,"+s_md.linkTrackVars),typeof b!=_ud&&""!==b&&(s_md.contextData["wb.clkurl"]=b,s_md.linkTrackVars="contextData.wb.clkurl,"+s_md.linkTrackVars),(typeof a!=_ud&&""!==a||typeof b!=_ud&&""!==b)&&void s_md.tl(!0,"o"),s_md.linkTrackVars=s_md.linkTrackVars.replace("contextData.wb.tm,","").replace("contextData.wb.clkurl,",""),delete s_md.contextData["wb.tm"],delete s_md.contextData["wb.clkurl"]}function wmdPageLink(a){var b;b=s_gi(s_account),b.linkTrackVars="prop3,prop19,prop37,prop38,prop20,prop21,prop47,prop48,prop50",b.prop21=typeof s_query!=_ud&&""!==s_query?s_query.toLowerCase():"",(typeof b.prop15==_ud||""===b.prop15)&&(b.prop15=typeof s_sponsor_program!=_ud&&""!==s_sponsor_program&&typeof a!=_ud&&""!==a?s_sponsor_program.toLowerCase()+"_"+a:""),a=b.pageName.split("_").join("-")+"_"+a;try{b.prop20=trun20(a)}catch(c){}void b.tl(!0,"o",a.toLowerCase()),b.prop15="",b.linkTrackVars="prop3,prop19,prop37,prop38,prop47,prop48,prop50"}function wmdPageview(a,b){var c;c=s_gi(s_account),c.prop9=b,"y"==s_pageview_sent&&(c.prop43="",c.prop20="");try{a=_urlClean(a)}catch(d){}""!==a&&(c.pageName=a,c.eVar1=a);var e="";try{if(e=String(_readC("ctr")),prop29LastPg=String(_readC("prop29")).toLowerCase(),e&&e!=_ud){var f=new Date;document.cookie="ctr=undefined; path=/; domain="+s_domain+";expires="+f.toGMTString(),document.cookie="prop29=undefined; path=/; domain="+s_domain+";expires="+f.toGMTString();var g,h=e.split("|"),i=h[0],j=(h[1],i.indexOf("_"));j>0&&(g=i.substr(j+1)),(typeof c.prop15==_ud||""===c.prop15)&&(c.prop15=typeof prop29LastPg!=_ud&&""!==prop29LastPg&&typeof g!=_ud&&""!==g?prop29LastPg+"_"+g:"");try{c.prop20=trun20(i).toLowerCase(),c.eVar20=c.prop20}catch(d){}var k=c.prop20,l=k.split("_");l.length<2&&(k+="_"),l.length<3&&(k+="_"),l=k.split("_");try{mboxUpdate("ProfMbox","page="+a,"m13="+l[1],"m14="+l[1]+"_"+l[2],"m15="+l[0]+"_"+l[1])}catch(d){}}}catch(d){}try{mboxLoadSCPlugin(c)}catch(d){}try{c.prop24=s_pageview_id}catch(d){}s_pageview_sent="y",void c.t()}function wmdPageLinkIframe(a){var b;b=window.parent.s_gi(window.parent.s_account),b.linkTrackVars="prop3,prop19,prop37,prop38,prop20,prop47,prop48,prop50";try{b.prop18=a}catch(c){}a=window.parent.s_md.pageName.split("_").join("-")+"_"+a;try{b.prop20=trun20(a)}catch(c){}void window.parent.s_md.tl(!0,"o",a.toLowerCase())}function wmdPageviewIframe(a,b){var c;c=window.parent.s_gi(window.parent.s_account),c.prop20="",c.prop9=b;try{a=_urlClean(a)}catch(d){}""!==a&&(c.pageName=a),void window.parent.s_md.t()}function wmdTrackLink(a){trun20(ctrs(s_md.pageName+"_"+a))}function trun20(a){try{if(typeof a==_ud||""===a)return;if(!(a.length>100))return a;var b=a.split("_");if(b.length<2)return a;var c=b[0].length>73?b[0].substring(0,72):b[0],d=b[1].length>20?b[1].substring(0,19):b[1];if(2==b.length)return c+"_"+d;if(3==b.length)return c+"_"+d+"_"+b[2];if(4==b.length)return c+"_"+d+"_"+b[2]+"_"+b[3]}catch(e){return a}}function _readC(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return""}function _writeC(a,b){date=new Date(3e3,1,1,0,0,0),document.cookie=a+"="+escape(b)+"; expires="+date.toGMTString()}function sCookie(a,b){document.cookie=a+"="+b.toLowerCase()+"; path=/; domain="+s_domain+";expires="}function _readQ(a){var b=a.toLowerCase()+"=";if(-1==document.URL.indexOf("?"))return"";for(var c=document.URL.split("?"),d=String(c[1]).toLowerCase().split("&"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(b))return f.substring(b.length,f.length)}return""}function _readRefQ(a){var b=a.toLowerCase()+"=";if(-1==document.referrer.indexOf("?"))return"";for(var c=document.referrer.split("?"),d=String(c[1]).toLowerCase().split("&"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(b))return f.substring(b.length,f.length)}return""}function setProp50(){var a=window.s_site,b="webmdp1medscapevista";switch(a){case"medscape-fr":b="webmdmedscapefrvista";break;case"medscape-de":b="webmdmedscape-gr";break;case"medscape-gr":s_site="medscape-de",b="webmdmedscape-gr";break;case"imedicine":b="webmdp1imedicinevista";break;case"connect":b="webmdconnect"}return b}Visitor.getInstance=function(a,b){var c,d,e=window.s_c_il;if(0>a.indexOf("@")&&(a+="@AdobeOrg"),e)for(d=0;d<e.length;d++)if((c=e[d])&&"Visitor"==c._c&&(c.marketingCloudOrgID==a||b&&c.namespace==b))return c;return new Visitor(a,b)},AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),function(a){if("undefined"==typeof b)var b={};if("undefined"==typeof c)var c={};if("undefined"==typeof d)var d={};if(d.radio||(d.radio={}),d.plugin||(d.plugin={}),"undefined"==typeof e)var e={};if("undefined"==typeof f)var f={};f.event||(f.event={}),f.model||(f.model={}),f.context||(f.context={}),f.network||(f.network={}),f.clock||(f.clock={}),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(b),function(a){"use strict";var b="js",c="1",d="4",e="0",f="0",g="0707bfa",h=2,i={};i.getVersion=function(){return b+"-"+c+"."+d+"."+e+"."+f+"-"+g},i.getMajor=function(){return c},i.getMinor=function(){return d},i.getMicro=function(){return e},i.getPatch=function(){return f},i.getBuild=function(){return g},i.getApiLevel=function(){return h},a.Version=i}(c),function(a){"use strict";function b(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}a.extend=b}(d),function(a){"use strict";function b(a,b){var c=[];for(var d in b)b.hasOwnProperty(d)&&"function"==typeof b[d]&&c.push(d);for(var e=0;e<c.length;e++){var f=c[e];a.prototype[f]=b[f]}}a.mixin=b}(d),function(a){"use strict";a.LOGGING_ENABLED=!1,a.logger={enableLogging:function(a){this._logEnabled=!0,this._logTag=a},disableLogging:function(){this._logEnabled=!1},log:function(b){a.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.log&&window.console.log(this._logTag+b)},info:function(b){a.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.info&&window.console.info(this._logTag+b)},warn:function(b){a.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.warn&&window.console.warn(this._logTag+b)},error:function(a){if(window.console&&window.console.error)throw a=this._logTag+a,window.console.error(a),new Error(a)}}}(d),function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}function d(a){if(a){if(null==a.id||""===a.id)return"Video ID cannot be null or empty string";if(a.streamType!=b.ASSET_TYPE_VOD&&a.streamType!=b.ASSET_TYPE_LIVE&&a.streamType!=b.ASSET_TYPE_LINEAR)return"Stream type must be one of "+b.ASSET_TYPE_VOD+", "+b.ASSET_TYPE_LIVE+", "+b.ASSET_TYPE_LINEAR;if(null==a.length||isNaN(a.length))return"Video length cannot be null or NaN";if(null==a.playhead||isNaN(a.playhead))return"Video playhead cannot be null or NaN";if(null==a.playerName||""===a.playerName)return"Video player-name cannot be null or empty string."}return null}function e(a){if(a){if(null==a.playerName||""===a.playerName)return"Ad-break player-name cannot be null or empty string";if(null==a.position||isNaN(a.position))return"Ad-break position cannot be null or NaN"}return null}function f(a){if(a){if(null==a.id||""===a.id)return"Ad ID cannot be null or empty string";if(null==a.position||isNaN(a.position))return"Ad position cannot be null or NaN";if(null==a.length||isNaN(a.length))return"Ad length cannot be null or NaN"}return null}function g(a){if(a){if(null==a.position||isNaN(a.position))return"Chapter position cannot be null or NaN";if(null==a.startTime||isNaN(a.startTime))return"Chapter offset (start-time) cannot be null or NaN";if(null==a.length||isNaN(a.length))return"Chapter length cannot be null or NaN"}return null}c.prototype.sanitizeVideoInfo=function(a){if(!a)return this._fail("VideoInfo cannot be null");var b=d(a);return b?this._fail(b):!0},c.prototype.sanitizeAdBreakInfo=function(a,b){if(!b&&!a)return this._fail("AdBreakInfo cannot be null");var c=e(a);return c?this._fail(c):!0},c.prototype.sanitizeAdInfo=function(a,b){if(!b&&!a)return this._fail("AdInfo cannot be null");var c=f(a);return c?this._fail(c):!0},c.prototype.sanitizeChapterInfo=function(a,b){if(!b&&!a)return this._fail("ChapterInfo cannot be null");var c=g(a);return c?this._fail(c):!0},c.prototype._fail=function(a){var c=new b.ErrorInfo("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,c),!1},a.InputDataSanitizer=c}(d,c),function(a){"use strict";function b(a,b){this.type=a,this.data=b}b.SUCCESS="success",b.ERROR="error",a.radio.Event=b}(d),function(a){"use strict";function b(a,b,c){this.fn=a,this.ctx=b,this.params=c}b.prototype.run=function(){this.fn.apply(this.ctx,this.params)},a.radio.Command=b}(d),function(a){"use strict";function b(a,b){this._queue=[],this._drainInProgress=!1,this._isSuspended="undefined"!=typeof a?a:!1,this._delay="undefined"!=typeof b?b:0}b.prototype.addCommand=function(a){this._queue.push(a),this._drain()},b.prototype.cancelAllCommands=function(){this._queue=[]},b.prototype.isEmpty=function(){return 0===this._queue.length},b.prototype.suspend=function(){this._isSuspended=!0},b.prototype.resume=function(){this._isSuspended=!1,this._drain()},b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++)this._queue[a].run();this._queue=[]},b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function b(){var c=a._queue.shift();c?a._runCommand(c,function(){a._isSuspended||b()}):a._drainInProgress=!1}()}},b.prototype._runCommand=function(a,b){var c=this;window.setTimeout(function(){a.run(),null!=b&&b.call(c)},this._delay)},a.radio.CommandQueue=b}(d),function(a){"use strict";function b(a){this._name=a,this._listeners={},this._requests={},this._commands={},this.enableLogging("[radio::Channel] > ")}var c=a.mixin,d=a.logger;c(b,d),b.WILDCARD="*",b.SEPARATOR=":",b.prototype.toString=function(){return"<channel: "+this._name+">"},b.prototype.shutdown=function(){this.log("#shutdown > Shutting down"),this.off(),this._requests={},this._commands={}},b.prototype.on=function(a,b,c){this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c})},b.prototype.off=function(a,b,c){if(b="function"==typeof b?b:null,!a&&null===b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)},b.prototype.trigger=function(a){for(var b in this._listeners)if(this._listeners.hasOwnProperty(b)&&this._matchWildcard(b,a.type))for(var c=this._listeners[b],d=c.slice(0),e=d.length,f=0;e>f;f++){var g=d[f];g.fn.call(g.ctx,a)}},b.prototype.comply=function(a,b,c){this._commands[a]={cmd:b,ctx:c}},b.prototype.command=function(a){var b=this._commands[a];if(!b)return void this.warn("#command > No command handler for: "+a);var c=Array.prototype.slice.call(arguments,1);b.cmd.apply(b.ctx,c)},b.prototype.reply=function(a,b,c){this._requests[a]={response:b,ctx:c}},b.prototype.request=function(a){var b=this._requests[a];return b?b.response.call(b.ctx):(this.warn("#request > No request handler for: "+a),null)},b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var d=this._listeners[a];if(d){if(!d.length||null==b&&!c)return void delete this._listeners[a];for(var e=0;e<d.length;e++){var f=d[e];null!==b&&b!==f.fn||c&&c!==f.ctx||this._listeners[a].splice(e,1)}}},b.prototype._matchWildcard=function(a,c){if(a===c)return!0;for(var d=(a||"").split(b.SEPARATOR),e=(c||"").split(b.SEPARATOR),f=!0,g=0;g<d.length;g++)f=f&&(d[g]===b.WILDCARD||d[g]===e[g]);return f},a.radio.Channel=b}(d),function(a){"use strict";function b(){this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a)),this._channels[a]},b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()},a.radio.Radio=b}(d),function(a){"use strict";function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))},b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,e,f=!1;for(e in this._events)if(a===e){f=!0;break}if(f){for(d=this._events[e].length-1;d>=0;d--){var g=this._events[e][d];b===g.cb&&c===g.ctx&&this._events[e].splice(d,1)}this._events[e].length||delete this._events[e]}}},b.prototype.dispatchEvent=function(a){if(a.type){var b,c;for(b in this._events)if(this._events.hasOwnProperty(b)&&a.type===b){var d=this._events[b],e=d.slice(0),f=e.length;for(c=0;f>c;c++)e[c].cb.call(e[c].ctx,a);break}}},b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;b>=0;b--){var d=this._events[c][b];d.ctx===a&&this._events[c].splice(b,1)}this._events[c].length||delete this._events[c]}}else this._events={}},a.EventDispatcher=b}(d),function(a){"use strict";function b(){}function c(a,b){this.url=a||null,this.method=b,this._xmlhttp=null}function d(){d.__super__.constructor.call(this),this._connection=null}var e=a.radio.Event,f=a.EventDispatcher;b.GET="GET",d.RESPONSE="response",d.INSTANCE="instance",a.extend(d,f),d.prototype._createCORSRequest=function(a){var b=null;if("undefined"!=typeof window.XMLHttpRequest){var c=new window.XMLHttpRequest;"withCredentials"in c&&(b=c,b.open(a.method,a.url,!0))}if(null==b&&"undefined"!=typeof window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[d.INSTANCE]=this;var g=this;b.onload=function(){return b.status&&parseInt(b.status,10)>=400?this.onerror():(f[d.RESPONSE]=b.responseText,void g.dispatchEvent(new e(e.SUCCESS,f)))},b.onerror=function(){g.dispatchEvent(new e(e.ERROR,f))}}return b},d.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=a.url;var b={};b[d.RESPONSE]="",b[d.INSTANCE]=this,this.dispatchEvent(new e(e.SUCCESS,b))},d.prototype.close=function(){this.removeAllListeners()},d.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))},a.URLRequestMethod=b,a.URLRequest=c,a.URLLoader=d}(d),function(a){"use strict";function b(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}a.AdBreakInfo=b}(c),function(a){"use strict";function b(){this.id=null,this.name=null,this.length=null,this.position=null,this.cpm=null}a.AdInfo=b}(c),function(a){"use strict";a.ASSET_TYPE_VOD="vod",a.ASSET_TYPE_LIVE="live",a.ASSET_TYPE_LINEAR="linear"}(c),function(a){"use strict";function b(){this.name=null,this.length=null,this.position=null,this.startTime=null}a.ChapterInfo=b}(c),function(a){"use strict";function b(a,b,e){this.trackingServer=a,this.jobId=b,this.publisher=e,this.channel=d,this.ovp=c,this.sdk=c,this.debugLogging=!1,this.quietMode=!1,this.__primetime=!1,this.__psdkVersion=null}var c="unknown",d="";a.ConfigData=b}(c),function(a){"use strict";function b(a,b){this.message=a,this.details=b}a.ErrorInfo=b}(c),function(a){"use strict";function b(){}b.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getAdBreakInfo=function(){return null},b.prototype.getAdInfo=function(){return null},b.prototype.getChapterInfo=function(){return null},b.prototype.getQoSInfo=function(){return null},b.prototype.onError=function(a){},b.prototype.onVideoUnloaded=function(){},a.PlayerDelegate=b}(c),function(a){"use strict";function b(){this.bitrate=null,this.fps=null,this.droppedFrames=null}a.QoSInfo=b}(c),function(a){"use strict";function b(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null}a.VideoInfo=b}(c),function(a){"use strict";function b(){}b.prototype.bootstrap=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getProperty=function(a){throw new Error("Implementation error: Method must be overridden.")},a.plugin.IPlugin=b}(d),function(a,b){"use strict";function c(){this._plugins={},this._radio=new h,this._channel=this._radio.channel(c.CHANNEL_GLOBAL),this.enableLogging("[plugin::PluginManager] > ")}var d=a.mixin,e=a.logger,f=b.ErrorInfo,g=a.radio.Event,h=a.radio.Radio,i=a.radio.Channel;d(c,e),c.ALL_PLUGINS=i.WILDCARD,c.ERROR="error",c.CHANNEL_GLOBAL="plugin_manager:global",c.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this.warn("#addPlugin > Replacing plugin: "+b),this._plugins[b]=a,a.bootstrap(this)},c.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()},c.prototype.removePlugin=function(a){var b=a.getName();this._plugins[b]||this.warn("#removePlugin > Unregistered plugin: "+b),delete this._plugins[b]},c.prototype.pluginExists=function(a){return!!this._plugins[a]},c.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()},c.prototype.on=function(a,b,c,d){this._channel.on(a+i.SEPARATOR+b,c,d)},c.prototype.off=function(a,b,c,d){this._channel.off(a+i.SEPARATOR+b,c,d)},c.prototype.trigger=function(a,b){var d=b.type.split(i.SEPARATOR),e=d[0],h=a.getName();if(h!=e){var j="Invalid event namespace. (event: "+b.type+", plugin: "+h+")";return void this._channel.trigger(new g(c.ERROR,new f("Internal error",j)))}this._channel.trigger(b)},c.prototype.request=function(a,b){var c=this._plugins[a];return c?c.getProperty(b):null},c.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()},a.plugin.PluginManager=c}(d,c),function(a,b){"use strict";function c(a){this._name=a,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this.enableLogging("[plugin::"+this.getName()+"] > ")}var d=b.ErrorInfo,e=a.radio.Event,f=a.plugin.PluginManager;a.mixin(c,a.logger),c.INITIALIZED="initialized",c.STATE_PLUGIN="state",c.ERROR_INFO="error_info",c.prototype.bootstrap=function(a){this._pluginManager=a,this._isDestroyed&&this._trigger(f.ERROR,new d("Invalid state.","Plugin already destroyed."))},c.prototype.setup=function(){this._trigger(c.INITIALIZED),this._isInitialized=!0},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},c.prototype.enable=function(){this._isEnabled=!0,this._enabled()},c.prototype.disable=function(){this._isEnabled=!1,this._disabled()},c.prototype.getName=function(){return this._name},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.getProperty=function(a){if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);if(this._dataResolver.hasOwnProperty(a)){var b=this._dataResolver[a];return"function"==typeof b?b.call(this):b}},c.prototype.toString=function(){return"<plugin: "+this._name+">"},c.prototype._enabled=function(){},c.prototype._disabled=function(){},c.prototype._teardown=function(){},c.prototype._canProcess=function(){var a=this._pluginManager.request(c.STATE_PLUGIN,c.ERROR_INFO);return a?(this.warn("#_canProcess() > Unable to track: in ERROR state."),!1):this._isEnabled?this._isDestroyed?(this.warn("Plugin destroyed."),!1):!0:(this.warn("Plugin disabled."),!1)},c.prototype._trigger=function(a,b){this._pluginManager.trigger(this,new e(this.getName()+":"+a,b))},c.prototype._onInvalidInputData=function(a){this._trigger(f.ERROR,a)},a.plugin.BasePlugin=c}(d,c),function(a,b){"use strict";function c(){}c.REPORT="report",c.RESET="reset",c.TRACKING_SERVER="tracking_server",c.CHECK_STATUS_SERVER="check_status_server",c.JOB_ID="job_id",c.QUIET_MODE="quiet_mode",c.VIDEO_INFO="video_info",c.AD_INFO="ad_info",c.AD_BREAK_INFO="ad_break_info",c.CHAPTER_INFO="chapter_info",c.TIMER_INTERVAL="timer_interval",c.TRACKING_INTERVAL="tracking_interval",c.CHECK_STATUS_INTERVAL="check_status_interval",c.TRACK_EXTERNAL_ERRORS="track_external_errors",c.SOURCE="source",c.ERROR_ID="error_id",b.event.EventKeyName=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.API_CONFIG="api_config",c.API_VIDEO_LOAD="api_video_load",c.API_VIDEO_UNLOAD="api_video_unload",c.API_VIDEO_START="api_video_start",
c.API_VIDEO_COMPLETE="api_video_complete",c.API_AD_START="api_ad_start",c.API_AD_COMPLETE="api_ad_complete",c.API_PLAY="api_play",c.API_PAUSE="api_pause",c.API_BUFFER_START="api_buffer_start",c.API_SEEK_START="api_seek_start",c.API_SEEK_COMPLETE="api_seek_complete",c.API_CHAPTER_START="api_chapter_start",c.API_CHAPTER_COMPLETE="api_chapter_complete",c.API_TRACK_ERROR="api_track_error",c.API_TRACK_INTERNAL_ERROR="api_track_internal_error",c.API_BITRATE_CHANGE="api_bitrate_change",b.event.ApiEvent=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.CONTEXT_DATA_AVAILABLE="context_data_available",b.event.ContextEvent=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.NETWORK_CHECK_STATUS_COMPLETE="network_check_status_complete",b.event.NetworkEvent=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.CLOCK_TRACKING_TICK="CLOCK_TRACKING_TICK",c.CLOCK_CHECK_STATUS_GET_SETTINGS="CLOCK_CHECK_STATUS_GET_SETTINGS",c.CLOCK_TRACKING_ENABLE="CLOCK_TRACKING_ENABLE",c.CLOCK_TRACKING_DISABLE="CLOCK_TRACKING_DISABLE",c.CLOCK_CHECK_STATUS_TICK="CLOCK_CHECK_STATUS_TICK",c.CLOCK_CHECK_STATUS_ENABLE="CLOCK_CHECK_STATUS_ENABLE",c.CLOCK_CHECK_STATUS_DISABLE="CLOCK_CHECK_STATUS_DISABLE",b.event.ClockEvent=c}(d,f),function(a,b){"use strict";function c(a,b){this.value=a,this.hint=b}function d(a){this.realm=a,this.data={}}c.HINT_SHORT="short",d.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}},d.prototype.setField=function(a,b,d){this.data[a]=new c(b,d)},b.model.Dao=d,b.model.DaoField=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a),this.year=this._createAccessor("_year","year",e.HINT_SHORT),this.month=this._createAccessor("_month","month",e.HINT_SHORT),this.day=this._createAccessor("_day","day",e.HINT_SHORT),this.hour=this._createAccessor("_hour","hour",e.HINT_SHORT),this.minute=this._createAccessor("_minute","minute",e.HINT_SHORT),this.second=this._createAccessor("_second","second",e.HINT_SHORT),this.year(b.getUTCFullYear()),this.month(b.getUTCMonth()+1),this.day(b.getUTCDate()),this.hour(b.getUTCHours()),this.minute(b.getUTCMinutes()),this.second(b.getUTCSeconds())}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.DateDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podSecond=this._createAccessor("_podSecond","pod_second",null),this.length=this._createAccessor("_length","length",null),this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podSecond(0),this.length(0),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId()),this.sid(a.sid()),this.resolver(a.resolver()),this.podId(a.podId()),this.podPosition(a.podPosition()),this.podSecond(a.podSecond()),this.length(a.length())}}var d=b.model.Dao;a.extend(c,d),b.model.AdDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id()),this.sid(a.sid()),this.name(a.name()),this.position(a.position()),this.length(a.length()),this.offset(a.offset())}}var d=b.model.Dao;a.extend(c,d),b.model.ChapterDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.duration=this._createAccessor("_duration","duration",null),this.type(""),this.videoId(""),this.publisher(""),this.adData(null),this.chapterData(null),this.duration(0),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.videoId(a.videoId()),this.publisher(a.publisher()),this.duration(a.duration());var b=a.adData();b&&this.adData(new e(b));var d=a.chapterData();d&&this.chapterData(new f(d))}}var d=b.model.Dao,e=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,d),c.TYPE_VOD="vod",c.TYPE_LIVE="live",c.TYPE_LINEAR="linear",c.TYPE_AD="ad",b.model.AssetDao=c}(d,f),function(a,b){"use strict";function c(a){c.__super__.constructor.call(this,"event"),this._trackingInterval=a,this.type=this._createAccessor("_type","type",null),this.count=this._createAccessor("_count","count",null),this.totalCount=this._createAccessor("_totalCount","total_count",null),this.duration=this._createAccessor("_duration","duration",null),this.totalDuration=this._createAccessor("_totalDuration","total_duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),this.type(""),this.count(0),this.totalCount(0),this.duration(0),this.totalDuration(0),this.playhead(0),this.id(""),this.source(""),this.ts((new Date).getTime()),this._updateTsAsDate(),this.prevTs(-1)}var d=b.model.Dao,e=b.model.DateDao;a.extend(c,d),c.prototype._updateTsAsDate=function(){var a=1e3*this._trackingInterval,b=Math.floor(this._ts/a)*a;this.tsAsDate(new Date(b))},c.prototype.ts=function(){return arguments.length&&(this._ts=arguments[0],this.setField("ts",this._ts,null),this._updateTsAsDate()),this._ts},c.prototype.tsAsDate=function(){if(arguments.length){this._tsAsDate=arguments[0];var a=new e(this.realm,this._tsAsDate);this.setField("ts_as_date",a,null)}return this._tsAsDate},c.EVENT_TYPE_LOAD="load",c.EVENT_TYPE_UNLOAD="unload",c.EVENT_TYPE_START="start",c.EVENT_TYPE_CHAPTER_START="chapter_start",c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",c.EVENT_TYPE_PLAY="play",c.EVENT_TYPE_PAUSE="pause",c.EVENT_TYPE_BUFFER="buffer",c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",c.EVENT_TYPE_ERROR="error",c.EVENT_TYPE_ACTIVE="active",c.EVENT_TYPE_COMPLETE="complete",b.model.EventDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.bitrate(0),this.fps(0),this.droppedFrames(0)}var d=b.model.Dao;a.extend(c,d),b.model.QoSDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",e.HINT_SHORT),this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.AdobeAnalyticsDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),this.ovp(e),this.sdk(e),this.channel(e),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var d=b.model.Dao,e="unknown";a.extend(c,d),b.model.ServiceProviderDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),this.sessionId(null)}var d=b.model.Dao;a.extend(c,d),b.model.SessionDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.cdn=this._createAccessor("_cdn","cdn",null),this.name=this._createAccessor("_name","name",null),this.cdn(null),this.name(null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.cdn(a.cdn()),this.name(a.name())}}var d=b.model.Dao;a.extend(c,d),b.model.StreamDao=c}(d,f),function(a,b){"use strict";function c(a){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null),arguments.length&&arguments[0]instanceof c){var b=arguments[0];this.analyticsVisitorId(b.analyticsVisitorId()),this.marketingCloudVisitorId(b.marketingCloudVisitorId()),this.visitorId(b.visitorId())}}var d=b.model.Dao;a.extend(c,d),b.model.UserDao=c}(d,f),function(a,b){"use strict";function c(a,b,c,d){this.eventData=a,this.assetData=b,this.streamData=c,this.qosData=d}b.model.ReportEntry=c}(d,f),function(a,b){"use strict";function c(a,b,c,d){this.adobeAnalyticsData=a,this.userData=b,this.serviceProviderData=c,this.sessionData=d,this.reportEntries=[]}var d=b.model.EventDao;c.prototype.addEntry=function(a){this.reportEntries.push(a)},c.prototype.discardPauseEvents=function(){if(this.reportEntries.length)for(var a=this.reportEntries.length-1;a>=0;a--)this.reportEntries[a].eventData.type()===d.EVENT_TYPE_PAUSE&&this.reportEntries.splice(a,1)},b.model.Report=c}(d,f),function(a,b){"use strict";function c(){}c.prototype.serializeReport=function(a){},c.prototype.serializeReportEntry=function(a){},c.prototype.serializeDao=function(a){},c.prototype.serializeNumber=function(a,b,c,d){},c.prototype.serializeString=function(a,b,c,d){},b.model.SerializerProtocol=c}(d,f),function(a,b){"use strict";function c(){this.enableLogging("[heartbeat::QuerystringSerializer] > ")}var d=a.mixin,e=a.logger,f=b.model.Dao,g=b.model.DaoField,h=b.model.SerializerProtocol,i="l",j="h",k="s";a.extend(c,h),d(c,e),c.prototype._appendSerializedData=function(a){return a?a+"&":""},c.prototype._removeLastCharacter=function(a){return a&&a.length>0&&(a=a.substring(0,a.length-1)),a},c.prototype._processDao=function(a){var b=[];for(var c in a.data)if(a.data.hasOwnProperty(c)){var d=a.data[c],e=d.value,g=d.hint,h=null,i=a.realm;if(null===e||"undefined"==typeof e)continue;"number"==typeof e?h=this.serializeNumber(c,e,i,g):"string"==typeof e?h=this.serializeString(c,e,i,g):e instanceof f?h=this.serializeDao(e):this.warn("#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+e+"."),h&&b.push(h)}return b},c.prototype.serializeReport=function(a){for(var b=[],c=a.reportEntries,d=0;d<c.length;d++){var e=this.serializeReportEntry(c[d])+"&";e+=this._appendSerializedData(this.serializeDao(a.adobeAnalyticsData)),e+=this._appendSerializedData(this.serializeDao(a.userData)),e+=this._appendSerializedData(this.serializeDao(a.serviceProviderData)),e+=this._appendSerializedData(this.serializeDao(a.sessionData)),e=this._removeLastCharacter(e),b.push(e)}return b},c.prototype.serializeReportEntry=function(a){var b=this._appendSerializedData(this.serializeDao(a.eventData));return b+=this._appendSerializedData(this.serializeDao(a.assetData)),b+=this._appendSerializedData(this.serializeDao(a.streamData)),b+=this._appendSerializedData(this.serializeDao(a.qosData)),b=this._removeLastCharacter(b)},c.prototype.serializeDao=function(a){for(var b=this._processDao(a),c="",d=0;d<b.length;d++)c+=d==b.length-1?b[d]:b[d]+"&";return c},c.prototype.serializeNumber=function(a,b,c,d){var e=i;return null==b||void 0===b||isNaN(b)?null:(d&&"string"==typeof d&&d===g.HINT_SHORT&&(e=j),e+":"+c+":"+a+"="+Math.floor(b))},c.prototype.serializeString=function(a,b,c,d){return b?k+":"+c+":"+a+"="+window.encodeURIComponent(b):null},b.model.QuerystringSerializer=c}(d,f),function(a,b){"use strict";function c(a){this.tick=0,this.interval=a,this.isActive=!1}function d(a){this._isDestroyed=!1,this._currentTick=0,this._timers={},this._channel=a;var b=this;this._clock=window.setInterval(function(){b._onTick()},1e3*i),this.enableLogging("[heartbeat::TimerManager] > ")}var e=a.logger,f=a.mixin,g=(a.radio.Command,b.event.ClockEvent),h=b.event.EventKeyName,i=1;f(d,e),d.prototype.isTimerActive=function(a){var b=this._timers[a];return b&&b.isActive},d.prototype.createTimer=function(a,b){this._timers[a]=new c(b)},d.prototype.destroyTimer=function(a){delete this._timers[a]},d.prototype.startTimer=function(a,b){this.log("#startTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&(c.tick=0))},d.prototype.stopTimer=function(a,b){this.log("#stopTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&(c.tick=0))},d.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,window.clearInterval(this._clock))},d.prototype._onTick=function(){this.log("#_onTick() > ------------------- ("+this._currentTick+")"),this._currentTick++;for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];if(b.isActive&&(b.tick++,b.tick%b.interval===0)){var c={};c[h.TIMER_INTERVAL]=b.interval,this._channel.trigger(new g(g[a],c))}}},b.clock.TimerManager=d}(d,f),function(a,b){"use strict";function c(a,b,c,d,e,f){this.enableLogging("[heartbeat::Timer] > "),this._isDestroyed=!1,this._channel=a,this._timerManager=b,this._interval=f,this._tickEventName=c,this._enableEventName=d,this._disableEventName=e,this._timerManager.createTimer(this._tickEventName,this._interval),this._installEventListeners()}var d=a.logger,e=a.mixin,f=b.event.EventKeyName;e(c,d),c.prototype.start=function(a){this.log("Starting timer: "+this._tickEventName),this._timerManager.startTimer(this._tickEventName,a)},c.prototype.stop=function(a){this.log("Stopping timer: "+this._tickEventName+")"),this._timerManager.stopTimer(this._tickEventName,a)},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._uninstallEventListeners(),this._timerManager.destroyTimer(this._tickEventName))},c.prototype.setInterval=function(a){var b=this._timerManager.isTimerActive(this._tickEventName);this.stop(!0),this._interval=a,this._timerManager.createTimer(this._tickEventName,this._interval),b&&this.start(!0)},c.prototype._onTimerEnabled=function(a){var b=a.data,c=!1;b&&b.hasOwnProperty(f.RESET)&&(c=b[f.RESET]),this.start(c)},c.prototype._onTimerDisabled=function(a){var b=a.data,c=!1;b&&b.hasOwnProperty(f.RESET)&&(c=b[f.RESET]),this.stop(c)},c.prototype._installEventListeners=function(){this._channel.on(this._enableEventName,this._onTimerEnabled,this),this._channel.on(this._disableEventName,this._onTimerDisabled,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},b.clock.Timer=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b,g.CLOCK_TRACKING_TICK,g.CLOCK_TRACKING_ENABLE,g.CLOCK_TRACKING_DISABLE,j),this._installEventListeners(),this.enableLogging("[heartbeat::TrackingTimer] > ")}var d=a.mixin,e=a.logger,f=b.event.NetworkEvent,g=b.event.ClockEvent,h=b.event.EventKeyName,i=b.clock.Timer,j=10;c.TRACKING_TIMER_INTERVAL="tracking_timer_interval",a.extend(c,i),d(c,e),c.prototype._onCheckStatusComplete=function(a){var b=a.data[h.TRACKING_INTERVAL];if(this.log("#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this.log("#_onCheckStatusComplete() > Interval value not changed.");this.log("#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b)}else this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(j)},c.prototype._installEventListeners=function(){this._channel.on(f.NETWORK_CHECK_STATUS_COMPLETE,this._onCheckStatusComplete,this),this._channel.reply(c.TRACKING_TIMER_INTERVAL,function(){return this._interval},this),c.__super__._installEventListeners.call(this)},b.clock.TrackingTimer=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b,j.CLOCK_CHECK_STATUS_TICK,j.CLOCK_CHECK_STATUS_ENABLE,j.CLOCK_CHECK_STATUS_DISABLE,e),this._installEventListeners(),this.enableLogging("[heartbeat::CheckStatusTimer] > "),this.log("#CheckStatusTimer()"),this._channel.on(j.CLOCK_CHECK_STATUS_GET_SETTINGS,this._getSettings,this)}var d=600,e=60,f=a.mixin,g=a.logger,h=(a.radio.Command,b.event.NetworkEvent),i=b.event.EventKeyName,j=b.event.ClockEvent,k=b.clock.Timer;a.extend(c,k),f(c,g),c.prototype._onCheckStatusComplete=function(a){var b=a.data[i.CHECK_STATUS_INTERVAL];if(this.log("#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this.log("#_onCheckStatusComplete() > Interval value not changed.");b>d?(this.warn("#_onCheckStatusComplete() > Interval value too large: "+b),this.setInterval(d)):(this.log("#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b))}else this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(e)},c.prototype._getSettings=function(){this.log("#_getSettings()");var a={};a[i.TIMER_INTERVAL]=this._interval,this._channel.trigger(new j(j.CLOCK_CHECK_STATUS_TICK,a))},c.prototype._installEventListeners=function(){this._channel.on(h.NETWORK_CHECK_STATUS_COMPLETE,this._onCheckStatusComplete,this),c.__super__._installEventListeners.call(this)},b.clock.CheckStatusTimer=c}(d,f),function(a,b){"use strict";function c(a){this._isDestroyed=!1,this._timerManager=new d(a),this._checkStatusTimer=new e(a,this._timerManager),this._trackingTimer=new f(a,this._timerManager)}var d=b.clock.TimerManager,e=b.clock.CheckStatusTimer,f=b.clock.TrackingTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._trackingTimer.destroy(),this._checkStatusTimer.destroy(),this._timerManager.destroy())},b.clock.Clock=c}(d,f),function(a,b){"use strict";function c(a){this._data=a,this.enableLogging("[heartbeat::SettingsParser] > "),this.log("#SettingsParser(data="+a+")")}var d=a.mixin,e=a.logger,f=b.event.EventKeyName;b.event.NetworkEvent;d(c,e),c.prototype.parse=function(){var a,b,c,d;if(!this._data)return void this.warn("#SettingsParser() > No data available for parsing.");if(window.DOMParser){var e=new window.DOMParser;d=e.parseFromString(this._data,"text/xml")}else d=new window.ActiveXObject("Microsoft.XMLDOM"),d.async=!1,d.loadXML(this.data);var g;g=parseInt(d.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),g&&(a=g),g=parseInt(d.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),g&&(b=g),g=parseInt(d.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),g&&(c=1==g);var h={};return h[f.TRACKING_INTERVAL]=a,h[f.CHECK_STATUS_INTERVAL]=b,h[f.TRACK_EXTERNAL_ERRORS]=c,this.log("#parse() > Obtained configuration settings: "+JSON.stringify(h)),h},b.network.SettingsParser=c}(d,f),function(a,b){"use strict";function c(a,c){s=b.HeartbeatPlugin,this._jobId=null,this._trackingServer=null,this._checkStatusServer=null,this._quietMode=!1,this._isConfigured=!1,this._isDestroyed=!1,this._channel=a,this._serializer=c,this._netQueue=new h,this._installEventListeners(),this.enableLogging("[heartbeat::Network] > ")}var d=a.mixin,e=a.logger,f=a.radio.Event,g=a.radio.Command,h=a.radio.CommandQueue,i=b.event.ApiEvent,j=a.URLRequestMethod,k=a.URLRequest,l=a.URLLoader,m=b.event.EventKeyName,n=b.event.ClockEvent,o=b.event.ContextEvent,p=b.event.NetworkEvent,q=b.network.SettingsParser,r=b.model.EventDao,s=b.HeartbeatPlugin;d(c,e),c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this.log("#destroy()"),this._netQueue.cancelAllCommands(),this._uninstallEventListeners())},c.prototype._onApiConfig=function(a){var b=a.data;this.log("#_onApiConfig(sb_server="+b[m.TRACKING_SERVER]+", check_status_server="+b[m.CHECK_STATUS_SERVER]+", job_id="+b[m.JOB_ID]+", quiet_mode="+b[m.QUIET_MODE]+")"),this._jobId=b[m.JOB_ID];var c=this._channel.request(s.USE_SSL);this._trackingServer=this._updateRequestProtocol(b[m.TRACKING_SERVER],c),this._checkStatusServer=this._updateRequestProtocol(b[m.CHECK_STATUS_SERVER],c),this._quietMode=b[m.QUIET_MODE],this._isConfigured=!0},c.prototype._onContextDataAvailable=function(b){if(!this._isConfigured)return void this.warn("#_onContextDataAvailable() > Unable to send request: not configured.");var c=new g(function(){for(var c=b.data[m.REPORT],d=this._serializer.serializeReport(c),e=0;e<d.length;e++){var g=d[e],h=this._trackingServer+"/?__job_id="+window.encodeURIComponent(this._jobId)+"&"+g,i=new k(h,j.GET);this.info("_onContextDataAvailable() > Sending request: "+i.url);var n=new l;!function(a,b){function c(b){a.close()}function d(c){b.warn("#_onContextDataAvailable() > Failed to send heartbeat report: "+JSON.stringify(c)),a.close()}b._quietMode||(a.addEventListener(f.SUCCESS,c,this),a.addEventListener(f.ERROR,d,this),a.load(i))}(n,this)}c.reportEntries[0].eventData.type()==r.EVENT_TYPE_UNLOAD&&this._channel.trigger(new a.radio.Event(s.VIDEO_UNLOADED))},this);this._netQueue.addCommand(c)},c.prototype._onClockCheckStatusTick=function(a){if(!this._isConfigured)return void this.warn("#_onClockCheckStatusTick() > Unable to send request: not configured.");var b=this._channel.request(s.PUBLISHER);if(!b)return void this.warn("#_onClockCheckStatusTick() > Publisher is NULL.");var c=new g(function(){function a(a){if(a.data){var b=new q(a.data.response),c=b.parse();c?d._channel.trigger(new p(p.NETWORK_CHECK_STATUS_COMPLETE,c)):d.warn("#_onClockCheckStatusTick() > Failed to parse the config. settings.")}h.close()}function c(a){d.warn("#_onClockCheckStatusTick() > Failed to obtain the config. settings: "+JSON.stringify(a)),h.close()}var d=this;b=b.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase();var e=this._checkStatusServer+b+".xml?r="+(new Date).getTime(),g=new k(e,j.GET),h=new l;h.addEventListener(f.SUCCESS,a,this),h.addEventListener(f.ERROR,c,this),this.log("#_onClockCheckStatusTick() > Get new settings from: "+e),h.load(g)},this);this._netQueue.addCommand(c)},c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c},c.prototype._installEventListeners=function(){this._channel.on(i.API_CONFIG,this._onApiConfig,this),this._channel.on(o.CONTEXT_DATA_AVAILABLE,this._onContextDataAvailable,this),this._channel.on(n.CLOCK_CHECK_STATUS_TICK,this._onClockCheckStatusTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},b.network.Network=c}(d,f),function(a,b){"use strict";function c(){this._totalCount={},this._totalDuration={},this.enableLogging("[heartbeat::Counters] > ")}function d(a){var b=a.getAssetId()+"."+a.assetData.type()+"."+a.eventType;return b}var e=a.mixin,f=a.logger;e(c,f),c.prototype.getTotalCount=function(a){var b=d(a);return this._totalCount[b]||(this._totalCount[b]=0),this.log("#getTotalCount(key="+b+")"),this._totalCount[b]},c.prototype.incrementTotalCount=function(a){var b=d(a);this._totalCount[b]||(this._totalCount[b]=0),this.log("#incrementTotalCount(key="+b+")"),this._totalCount[b]++},c.prototype.getTotalDuration=function(a){var b=d(a);return this._totalDuration[b]||(this._totalDuration[b]=0),this.log("#getTotalDuration(key="+b+")"),this._totalDuration[b]},c.prototype.increaseTotalDuration=function(a){var b=d(a);this._totalDuration[b]||(this._totalDuration[b]=0),this.log("#increaseTotalDuration(key="+b+", amount="+a.duration+")"),this._totalDuration[b]+=a.duration},c.prototype.resetCounters=function(a,b){var c=a+"."+b;this.log("#resetCounters(key="+c+")");var d;for(d in this._totalCount)this._totalCount.hasOwnProperty(d)&&-1!=d.indexOf(c)&&(this._totalCount[d]=0);for(d in this._totalDuration)this._totalDuration.hasOwnProperty(d)&&-1!=d.indexOf(c)&&(this._totalDuration[d]=0)},b.context.Counters=c}(d,f),function(a,b){"use strict";function c(){this._items={},this.enableLogging("[heartbeat::History] > ")}function d(a){var b=a.assetData,c=b.adData()?b.adData().adId():b.videoId();return c+"."+b.type()+"."+a.eventType}var e=a.mixin,f=a.logger;e(c,f),c.prototype.updateWith=function(a){var b=d(a);this.log("#updateWith(key="+b+")"),this._items[b]=a},c.prototype.getPreviousItemOfSameTypeWith=function(a){var b=d(a);return this.log("#getPreviousItemOfSameTypeWith(key="+b+")"),this._items[b]},b.context.History=c}(d,f),function(a,b){"use strict";function c(a,b,c,d,g){this.timestamp=new Date,this.assetData=new e(a),this.streamData=new f(b),this.qosData=c,this.eventType=d,this.playhead=g,this.duration=0,this.prevItemOfSameType=null}var d=b.model.EventDao,e=b.model.AssetDao,f=b.model.StreamDao;c.clone=function(a){var b=new c(a.assetData,a.streamData,a.qosData,a.eventType,a.playhead);return b.timestamp=a.timestamp,b},c.prototype.getAssetId=function(){return this.eventType===d.EVENT_TYPE_ACTIVE?this.assetData.videoId():this.assetData.adData()?this.assetData.adData().adId():this.assetData.videoId()},c.prototype.getEventCount=function(){return 1},b.context.TimelineItem=c}(d,f),function(a,b){"use strict";function c(a){this._timeline=[],this._context=a,this.enableLogging("[heartbeat::Timeline] > ")}function d(a){var b=a.eventType,c=a.assetData.type();return b===i.EVENT_TYPE_PLAY||b===i.EVENT_TYPE_BUFFER||b===i.EVENT_TYPE_START&&c!==j.TYPE_AD}function e(a,b){return b.getTime()-a.getTime()}var f=a.mixin,g=a.logger,h=b.context.TimelineItem,i=b.model.EventDao,j=b.model.AssetDao;f(c,g),c.prototype.getTimelineItems=function(){return this._timeline.slice()},c.prototype.getLast=function(){return this._timeline.length>0?this._timeline[this._timeline.length-1]:null},c.prototype.addItem=function(a){var b=this.getLast();b&&b.eventType!==i.EVENT_TYPE_ACTIVE&&(b.duration=e(b.timestamp,a.timestamp),this._updateItemStats(b)),this.log("#addItem() >  | "+a.assetData.type()+" | "+a.eventType+" | "+a.playhead+" | "+(a.prevItemOfSameType?a.prevItemOfSameType.timestamp.getTime():"-1")+" | "+a.timestamp.getTime()),this._timeline.push(a)},c.prototype.addActiveItem=function(a){var b=this.getLast();this.addItem(a),a.duration=0;for(var c=this._timeline.length-2;c>=0;c--){var e=this._timeline[c];if(e.eventType==i.EVENT_TYPE_ACTIVE)break;a.duration+=e.duration}if(this._updateItemStats(a),a.eventType===i.EVENT_TYPE_ACTIVE&&d(b)){var f=h.clone(b);f.prevItemOfSameType=b,f.timestamp=a.timestamp,f.playhead=a.playhead,f.duration=0,this.addItem(f)}},c.prototype._updateItemStats=function(a){var b=this._context._counters;b.incrementTotalCount(a),b.increaseTotalDuration(a)},b.context.Timeline=c}(d,f),function(a,b){"use strict";function c(a){this._context=a,this.enableLogging("[heartbeat::ReporterHelper] > ")}var d=a.mixin,e=a.logger,f=b.model.Report,g=b.model.EventDao,h=b.model.AssetDao,i=b.model.ReportEntry;d(c,e),c.prototype.createReportForItem=function(a,b){var c=this._context._counters,d=new f(this._context._adobeAnalyticsData,this._context._userData,this._context._serviceProviderData,this._context._sessionData);return a.duration=0,c.incrementTotalCount(a),c.increaseTotalDuration(a),d.addEntry(this._buildReportEntryForItem(a,b)),d},c.prototype.createReportForQuantum=function(a,b){var c,d,e=this._selectTimelineItemsForCurrentQuantum(b);for(this.log("#createReportForQuantum() > -------------[ SUMMARY REPORT ]----------------"),c=0;c<e.length;c++)d=e[c],this.log("#createReportForQuantum() >  | "+d.assetData.type()+" | "+d.eventType+" | "+d.playhead+" | "+d.duration);for(e=this._compactTimelineItems(e),this.log("#createReportForQuantum() > -----------------------------------------"),c=0;c<e.length;c++)d=e[c],this.log("#createReportForQuantum() >  | "+d.assetData.type()+" | "+d.eventType+" | "+d.playhead+" | "+d.duration);this.log("#createReportForQuantum() > -----------------------------------------");var f=this._createReport(e,a,b);return f},c.prototype._selectTimelineItemsForCurrentQuantum=function(a){var b,c,d=this._context._timeline.getTimelineItems(),e=[];if(a)b=d.length;else{for(c=d.length-2;c<d.length;c++){var f=d[c];if(f.eventType===g.EVENT_TYPE_ACTIVE){b=c,e.unshift(f);break}}if(!b)throw new Error("Expecting an ACTIVE event in the last 2 on the timeline.")}for(c=b-1;c>=0;c--){var h=d[c];if(h.eventType==g.EVENT_TYPE_ACTIVE)break;e.unshift(h)}return e},c.prototype._compactTimelineItems=function(a){var b,c=[],d=function(a){var b;for(b=0;b<c.length;b++){var d=c[b],e=!1;if(a.eventType==d.eventType&&a.assetData.type()==d.assetData.type()){if(e=a.assetData.type()==h.TYPE_AD?a.assetData.adData().adId()==d.assetData.adData().adId()&&a.assetData.adData().podPosition()==d.assetData.adData().podPosition():a.assetData.videoId()==d.assetData.videoId(),!e)continue;e=a.assetData.chapterData()?d.assetData.chapterData()&&a.assetData.chapterData().id()==d.assetData.chapterData().id()&&a.assetData.chapterData().position()==d.assetData.chapterData().position():null==d.assetData.chapterData()}if(e)return d}return null};for(b=0;b<a.length;b++){var e=a[b],f=d(e);f?(f.playhead=e.playhead,f.timestamp=e.timestamp,f.duration+=e.duration):c.push(e)}return c},c.prototype._createReport=function(a,b,c){var d,e=new f(this._context._adobeAnalyticsData,this._context._userData,this._context._serviceProviderData,this._context._sessionData);for(d=0;d<a.length;d++)e.addEntry(this._buildReportEntryForItem(a[d],b));var h=e.reportEntries[e.reportEntries.length-1];if(!c&&h.eventData.type()!=g.EVENT_TYPE_ACTIVE)throw new Error("Expecting the last report entry to represent an ACTIVE event.");for(d=0;d<e.reportEntries.length-1;d++){var i=e.reportEntries[d];i.eventData.tsAsDate(h.eventData.tsAsDate())}return e.discardPauseEvents(),e},c.prototype._buildReportEntryForItem=function(a,b){var c=this._context._counters,d=new g(b);return d.type(a.eventType),d.count(a.getEventCount()),d.duration(a.duration),d.totalCount(c.getTotalCount(a)),d.totalDuration(c.getTotalDuration(a)),d.playhead(a.playhead),d.ts(a.timestamp.getTime()),d.prevTs(a.prevItemOfSameType?a.prevItemOfSameType.timestamp.getTime():-1),new i(d,a.assetData,a.streamData,a.qosData)},b.context.ReporterHelper=c}(d,f),function(a,b,c,d){"use strict";function e(a){g=b.HeartbeatPlugin,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._adobeAnalyticsData=new s,this._serviceProviderData=new u,this._userData=new v,this._videoAssetType=null,this._counters=new z,this._history=null,this._timeline=null,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._reporterHelper=new m(this),this._channel=a,this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._inputDataSanitizer=new l(this._onInvalidInputData,this),this._installEventListeners(),this.enableLogging("[heartbeat::Context] > ")}function f(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())}var g,h=a.mixin,i=a.deferrable,j=a.logger,k=a.radio.Event,l=a.InputDataSanitizer,m=b.context.ReporterHelper,n=b.clock.TrackingTimer,o=b.context.Timeline,p=b.context.TimelineItem,q=b.context.History,r=b.model.SessionDao,s=b.model.AdobeAnalyticsDao,t=b.model.AssetDao,u=b.model.ServiceProviderDao,v=b.model.UserDao,w=b.model.StreamDao,x=b.model.QoSDao,y=b.model.ChapterDao,z=b.context.Counters,A=b.event.ClockEvent,B=b.event.NetworkEvent,C=b.event.ApiEvent,D=b.event.ContextEvent,E=b.event.EventKeyName,F=b.model.EventDao,G=b.model.AdDao,H=c.Version,I=d.md5,J="sourceErrorSDK",K="error";
h(e,i),h(e,j),e.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this.log("#destroy()"),this._uninstallEventListeners())},e.prototype._onApiConfig=function(a){var b=a.data;this.log("#_onApiConfig(, tracking_server="+b[E.TRACKING_SERVER]+", check_status_server="+b[E.CHECK_STATUS_SERVER]+", job_id="+b[E.JOB_ID]+", quietMode: "+b[E.QUIET_MODE]+")"),this._adobeAnalyticsData.reportSuiteId(this._channel.request(g.RSID)),this._adobeAnalyticsData.trackingServer(this._channel.request(g.TRACKING_SERVER)),this._adobeAnalyticsData.ssl(this._channel.request(g.USE_SSL)?1:0),this._userData.visitorId(this._channel.request(g.VISITOR_ID)),this._userData.analyticsVisitorId(this._channel.request(g.ANALYTICS_VISITOR_ID)),this._userData.marketingCloudVisitorId(this._channel.request(g.MARKETING_CLOUD_VISITOR_ID)),this._serviceProviderData.ovp(this._channel.request(g.OVP)),this._serviceProviderData.sdk(this._channel.request(g.SDK)),this._serviceProviderData.channel(this._channel.request(g.CHANNEL)),this._serviceProviderData.libVersion(H.getVersion()),this._serviceProviderData.apiLevel(H.getApiLevel()),this._channel.trigger(new A(A.CLOCK_CHECK_STATUS_ENABLE))},e.prototype._onApiVideoLoad=function(){this._resetInternalState();var a=this._channel.request(g.VIDEO_INFO);if(this._inputDataSanitizer.sanitizeVideoInfo(a)){this.log("#_onApiVideoLoad(id="+a.id+", length="+a.length+", type="+a.streamType+", player_name="+a.playerName+")"),this._activeAssetId=a.id,this._serviceProviderData.playerName(a.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.duration(a.length),this._assetData.type(a.streamType),this._assetData.publisher(this._channel.request(g.PUBLISHER)),this._videoAssetType=this._assetData.type(),this._streamData.name(a.name||this._activeAssetId),this._sessionData.sessionId(f()),this._counters.resetCounters(this._activeAssetId,this._videoAssetType),this._updateQoSInfo();var b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_LOAD,0);b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._history.updateWith(b);var c=this._channel.request(n.TRACKING_TIMER_INTERVAL),d=this._reporterHelper.createReportForItem(b,c),e={};e[E.REPORT]=d,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,e)),this._isTrackingSessionActive=!0}},e.prototype._onApiVideoUnload=function(a){if(!this._isTrackingSessionActive)return void this.warn("#_onApiVideoUnload() > No active tracking session.");this.log("#_onApiVideoUnload()");var b=this._channel.request(n.TRACKING_TIMER_INTERVAL),c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_UNLOAD,0);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._history.updateWith(c);var d=this._reporterHelper.createReportForItem(c,b),e={};e[E.REPORT]=d,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,e)),this._isTrackingSessionActive=!1},e.prototype._onApiVideoStart=function(a){if(this._checkCall("_onApiVideoStart")){this.log("#_onApiVideoStart()");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){var c={};c[E.RESET]=!0,this._channel.trigger(new A(A.CLOCK_TRACKING_ENABLE,c)),this._updateQoSInfo();var d=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_START,b);d.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(d),this._placeItemOnTimeline(d)}}},e.prototype._onApiVideoComplete=function(a){if(this._checkCall("_onApiVideoComplete")){this.log("#_onApiVideoComplete()"),this._updateQoSInfo();var b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_COMPLETE,this._assetData.duration());b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._placeItemOnTimeline(b);var c=this._channel.request(n.TRACKING_TIMER_INTERVAL),d=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PAUSE,0);d.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(d),this._placeItemOnTimeline(d);var e=this._reporterHelper.createReportForQuantum(c,!0),f={};f[E.REPORT]=e,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,f)),f={},f[E.RESET]=!0,this._channel.trigger(new A(A.CLOCK_TRACKING_DISABLE,f)),this._isVideoComplete=!0}},e.prototype._onApiPlay=function(a){if(this._checkCall("_onApiPlay")){this.log("#_onApiPlay()");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){this._channel.trigger(new A(A.CLOCK_TRACKING_ENABLE)),this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PLAY,b);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._placeItemOnTimeline(c)}}},e.prototype._onApiPause=function(a){if(this._checkCall("_onApiPause")){this.log("#_onApiPause()");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PAUSE,b);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._placeItemOnTimeline(c),this._channel.trigger(new A(A.CLOCK_TRACKING_DISABLE))}}},e.prototype._onApiBufferStart=function(a){if(this._checkCall("_onApiBufferStart")){this.log("#_onApiBufferStart()");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_BUFFER,b);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._placeItemOnTimeline(c)}}},e.prototype._onApiSeekStart=function(a){this._checkCall("_onApiSeekStart")&&(this.log("#_onApiSeekStart()"),this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(this._videoAssetType),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},e.prototype._onApiSeekComplete=function(a){if(this._checkCall("_onApiSeekComplete")){var b=this._channel.request(g.AD_BREAK_INFO);if(this._inputDataSanitizer.sanitizeAdBreakInfo(b,!0)){var c=this._channel.request(g.AD_INFO);if(this._inputDataSanitizer.sanitizeAdInfo(c,!0)){var d=this._channel.request(g.CHAPTER_INFO);if(this._inputDataSanitizer.sanitizeChapterInfo(d,!0)){if(b&&c){var e=I(this._assetData.videoId())+"_"+b.position;if(this._stashedAdData&&this._stashedAdData.podId()==e&&parseInt(this._stashedAdData.podPosition(),10)==c.position)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=c.id;var h=new G;h.adId(this._activeAssetId),h.length(c.length),h.resolver(b.playerName),h.podId(e),h.podSecond(b.startTime),h.podPosition(c.position+""),h.sid(f()),this._assetData.adData(h)}this._assetData.type(t.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(this._videoAssetType),this._activeAssetId=this._assetData.videoId();if(d){if(this._stashedChapterData&&d.position==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var i=new y;i.id(I(this._assetData.videoId())+"_"+d.position),i.name(d.name),i.length(d.length),i.position(d.position),i.offset(d.startTime),i.sid(f()),this._assetData.chapterData(i)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}}}}},e.prototype._onApiAdStart=function(){if(this._checkCall("_onApiAdStart")){var a=this._channel.request(g.AD_BREAK_INFO);if(this._inputDataSanitizer.sanitizeAdBreakInfo(a,!1)){var b=this._channel.request(g.VIDEO_INFO);if(this._inputDataSanitizer.sanitizeVideoInfo(b)){(null==a.startTime||isNaN(a.startTime))&&(a.startTime=b.playhead);var c=this._channel.request(g.AD_INFO);if(this._inputDataSanitizer.sanitizeAdInfo(c,!1)){this.log("#_onApiAdStart(id="+c.id+", length="+c.length+", player_name="+a.playerName+", parent_name="+this._assetData.videoId()+", pod_pos="+c.position+", pod_offset="+a.startTime+")"),this._activeAssetId=c.id;var d=new G;d.adId(this._activeAssetId),d.length(c.length),d.resolver(a.playerName),d.podId(I(this._assetData.videoId())+"_"+a.position),d.podSecond(a.startTime),d.podPosition(c.position+""),d.sid(f()),this._assetData.adData(d),this._assetData.type(t.TYPE_AD),this._counters.resetCounters(this._activeAssetId,t.TYPE_AD),this._updateQoSInfo();var e=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_START,b.playhead);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this._placeItemOnTimeline(e)}}}}},e.prototype._onApiAdComplete=function(a){if(this._checkCall("_onApiAdComplete")){if(this.log("#_onApiAdComplete()"),this._assetData.type()!=t.TYPE_AD)return void this.warn("#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PLAY,b);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._placeItemOnTimeline(c);var d=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_COMPLETE,b);d.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(d),this._placeItemOnTimeline(d),this._assetData.adData(null),this._assetData.type(this._videoAssetType),this._activeAssetId=this._assetData.videoId()}}},e.prototype._onApiChapterStart=function(a){if(this._checkCall("_onApiChapterStart")){var b=this._channel.request(g.CHAPTER_INFO);if(this._inputDataSanitizer.sanitizeChapterInfo(b,!1)){this.log("#_onApiChapterStart(name="+b.name+", length="+b.length+", position="+b.position+", chapter_offset="+b.startTime+")");var c=this._getPlayhead();if(null!=c&&!isNaN(c)){var d=new y;if(d.id(I(this._assetData.videoId())+"_"+b.position),d.name(b.name),d.length(b.length),d.position(b.position),d.offset(b.startTime),d.sid(f()),this._assetData.chapterData(d),this._updateQoSInfo(),this._timeline.getLast().eventType==F.EVENT_TYPE_PLAY){var e=new p(this._assetData,this._streamData,this._qosData,this._timeline.getLast().eventType,c);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this._placeItemOnTimeline(e)}var h=this._channel.request(n.TRACKING_TIMER_INTERVAL),i=new t(this._assetData);i.adData(null),i.type(this._videoAssetType);var j=new p(i,this._streamData,this._qosData,F.EVENT_TYPE_CHAPTER_START,c);j.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(j),this._history.updateWith(j);var k=this._reporterHelper.createReportForItem(j,h),l={};l[E.REPORT]=k,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,l))}}}},e.prototype._onApiChapterComplete=function(a){if(this._checkCall("_onApiChapterComplete")){if(this.log("#_onApiChapterComplete()"),!this._assetData.chapterData())return void this.warn("#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){var c=this._channel.request(n.TRACKING_TIMER_INTERVAL),d=new t(this._assetData);d.adData(null),d.type(this._videoAssetType),this._updateQoSInfo();var e=new p(d,this._streamData,this._qosData,F.EVENT_TYPE_CHAPTER_COMPLETE,b);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this._history.updateWith(e);var f=this._reporterHelper.createReportForItem(e,c),g={};if(g[E.REPORT]=f,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,g)),this._assetData.chapterData(null),this._timeline.getLast().eventType==F.EVENT_TYPE_PLAY){var h=new p(this._assetData,this._streamData,this._qosData,this._timeline.getLast().eventType,b);h.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(h),this._placeItemOnTimeline(h)}}}},e.prototype._onApiBitrateChange=function(a){if(this._checkCall("_onApiBitrateChange")){this.log("#_onApiBitrateChange()");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){var c=this._channel.request(n.TRACKING_TIMER_INTERVAL);this._updateQoSInfo();var d=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_BITRATE_CHANGE,b);d.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(d),this._history.updateWith(d);var e=this._reporterHelper.createReportForItem(d,c),f={};f[E.REPORT]=e,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,f))}}},e.prototype._onApiTrackError=function(a){if(this._checkCall("_onApiTrackError")){var b=this._getPlayhead();if(null!=b&&!isNaN(b)){var c=a.data;if(this.log("#_onApiTrackError(source="+c[E.SOURCE]+", err_id="+c[E.ERROR_ID]+")"),this._trackExternalErrors||c[E.SOURCE]===J){var d=this._channel.request(n.TRACKING_TIMER_INTERVAL);this._updateQoSInfo();var e=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_ERROR,b);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this._history.updateWith(e);var f=this._reporterHelper.createReportForItem(e,d),g=f.reportEntries[0];g.eventData.id(c[E.ERROR_ID]),g.eventData.source(c[E.SOURCE]);var h={};h[E.REPORT]=f,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,h))}}}},e.prototype._onApiTrackInternalError=function(a){var b=a.data;this.log("#_onApiTrackInternalError(source="+b[E.SOURCE]+", err_id="+b[E.ERROR_ID]+")"),this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_ERROR,0),d=this._channel.request(n.TRACKING_TIMER_INTERVAL),e=this._reporterHelper.createReportForItem(c,d),f=e.reportEntries[0];f.eventData.id(b[E.ERROR_ID]),f.eventData.source(b[E.SOURCE]);var g={};g[E.REPORT]=e,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,g))},e.prototype._onClockTrackingTick=function(a){if(this._checkCall("_onClockTrackingTick")){var b=a.data[E.TIMER_INTERVAL];this.log("#_onClockTrackingTick(interval="+b+")");var c=this._getPlayhead();if(null!=c&&!isNaN(c)){var d=new t(this._assetData);d.adData(null),d.type(this._videoAssetType),this._updateQoSInfo();var e=new p(d,this._streamData,this._qosData,F.EVENT_TYPE_ACTIVE,c);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this.log("#_onClockTrackingTick() > Adding the ACTIVE event on the time-line."),this._timeline.addActiveItem(e),this._history.updateWith(e);var f=this._reporterHelper.createReportForQuantum(b,!1),g={};g[E.REPORT]=f,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,g))}}},e.prototype._onNetworkCheckStatusComplete=function(a){this._trackExternalErrors=a.data[E.TRACK_EXTERNAL_ERRORS],this.log("#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},e.prototype._installEventListeners=function(){this._channel.on(C.API_CONFIG,this._onApiConfig,this),this._channel.on(C.API_VIDEO_LOAD,this._onApiVideoLoad,this),this._channel.on(C.API_VIDEO_UNLOAD,this._onApiVideoUnload,this),this._channel.on(C.API_VIDEO_START,this._onApiVideoStart,this),this._channel.on(C.API_VIDEO_COMPLETE,this._onApiVideoComplete,this),this._channel.on(C.API_AD_START,this._onApiAdStart,this),this._channel.on(C.API_AD_COMPLETE,this._onApiAdComplete,this),this._channel.on(C.API_PLAY,this._onApiPlay,this),this._channel.on(C.API_PAUSE,this._onApiPause,this),this._channel.on(C.API_BUFFER_START,this._onApiBufferStart,this),this._channel.on(C.API_SEEK_START,this._onApiSeekStart,this),this._channel.on(C.API_SEEK_COMPLETE,this._onApiSeekComplete,this),this._channel.on(C.API_CHAPTER_START,this._onApiChapterStart,this),this._channel.on(C.API_CHAPTER_COMPLETE,this._onApiChapterComplete,this),this._channel.on(C.API_BITRATE_CHANGE,this._onApiBitrateChange,this),this._channel.on(C.API_TRACK_ERROR,this._onApiTrackError,this),this._channel.on(C.API_TRACK_INTERNAL_ERROR,this._onApiTrackInternalError,this),this._channel.on(A.CLOCK_TRACKING_TICK,this._onClockTrackingTick,this),this._channel.on(B.NETWORK_CHECK_STATUS_COMPLETE,this._onNetworkCheckStatusComplete,this)},e.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},e.prototype._resetInternalState=function(){this.log("#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._videoAssetType=null,this._counters=new z,this._history=new q,this._timeline=new o(this),this._streamData=new w,this._qosData=new x,this._sessionData=new r,this._assetData=new t,this._stashedAdData=null,this._stashedChapterData=null},e.prototype._placeItemOnTimeline=function(a){this.log("#_placeItemOnTimeline(type="+a.eventType+")"),this._timeline.addItem(a),this._history.updateWith(a)},e.prototype._getPlayhead=function(){var a=null,b=this._channel.request(g.VIDEO_INFO);return this._inputDataSanitizer.sanitizeVideoInfo(b)&&(a=b.playhead),a},e.prototype._updateQoSInfo=function(){var a=this._channel.request(g.QOS_INFO);this._qosData.bitrate(a&&!isNaN(a.bitrate)?a.bitrate:0),this._qosData.fps(a&&!isNaN(a.fps)?a.fps:0),this._qosData.droppedFrames(a&&!isNaN(a.droppedFrames)?a.droppedFrames:0)},e.prototype._checkCall=function(a){return this._isTrackingSessionActive?this._isVideoComplete?(this.warn("#"+a+"() > The video content already completed."),!1):!0:(this.warn("#"+a+"() > No active tracking session."),!1)},e.prototype._onInvalidInputData=function(a){this._channel.trigger(new k(K,a))},b.context.Context=e}(d,f,c,b),function(a){"use strict";function b(a,b){this.quietMode=!1,this.trackingServer=a,this.jobId=b}a.HeartbeatPluginConfig=b}(f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,r),this._radio=new e;var a=this._channel=this._radio.channel(t);this._workQueue=new g(!0),this._inputDataSanitizer=new i(this._onInvalidInputData,this),this._clock=null,this._context=null,this._network=null,this._isConfigured=!1,this._initSubmodules(),a.on(p.ERROR,this._onError,this),a.on(c.VIDEO_UNLOADED,this._onVideoUnloaded,this),a.reply(c.RSID,function(){return this._pluginManager.request(w,c.RSID)},this),a.reply(c.TRACKING_SERVER,function(){return this._pluginManager.request(w,c.TRACKING_SERVER)},this),a.reply(c.USE_SSL,function(){return this._pluginManager.request(w,c.USE_SSL)},this),a.reply(c.VISITOR_ID,function(){return this._pluginManager.request(w,c.VISITOR_ID)},this),a.reply(c.ANALYTICS_VISITOR_ID,function(){return this._pluginManager.request(w,c.ANALYTICS_VISITOR_ID)},this),a.reply(c.MARKETING_CLOUD_VISITOR_ID,function(){return this._pluginManager.request(w,c.MARKETING_CLOUD_VISITOR_ID)},this),a.reply(c.ERROR_INFO,function(){return this._pluginManager.request(x,c.ERROR_INFO)},this),a.reply(c.OVP,function(){return this._pluginManager.request(v,c.OVP)},this),a.reply(c.SDK,function(){return this._pluginManager.request(v,c.SDK)},this),a.reply(c.CHANNEL,function(){return this._pluginManager.request(v,c.CHANNEL)},this),a.reply(c.PUBLISHER,function(){return this._pluginManager.request(v,c.PUBLISHER)},this),a.reply(c.VIDEO_INFO,function(){return this._pluginManager.request(u,c.VIDEO_INFO)},this),a.reply(c.AD_BREAK_INFO,function(){return this._pluginManager.request(u,c.AD_BREAK_INFO)},this),a.reply(c.AD_INFO,function(){return this._pluginManager.request(u,c.AD_INFO)},this),a.reply(c.CHAPTER_INFO,function(){return this._pluginManager.request(u,c.CHAPTER_INFO)},this),a.reply(c.QOS_INFO,function(){return this._pluginManager.request(u,c.QOS_INFO)},this)}var d=a.event.EventKeyName,e=b.radio.Radio,f=b.radio.Channel,g=b.radio.CommandQueue,h=b.radio.Command,i=b.InputDataSanitizer,j=a.event.ApiEvent,k=a.event.ClockEvent,l=a.clock.Clock,m=a.network.Network,n=a.context.Context,o=a.model.QuerystringSerializer,p=b.plugin.PluginManager,q=b.plugin.BasePlugin;b.extend(c,q);var r="heartbeat",s="sourceErrorHeartbeat",t="heartbeat",u="player",v="config",w="adobe-analytics",x=q.STATE_PLUGIN;c.VIDEO_LOAD="video_load",c.VIDEO_UNLOAD="video_unload",c.VIDEO_UNLOADED="video_unloaded",c.VIDEO_START="video_start",c.VIDEO_COMPLETE="video_complete",c.PLAY="play",c.PAUSE="pause",c.AD_START="ad_start",c.AD_COMPLETE="ad_complete",c.BUFFER_START="buffer_start",c.BUFFER_COMPLETE="buffer_complete",c.SEEK_START="seek_start",c.SEEK_COMPLETE="seek_complete",c.CHAPTER_START="chapter_start",c.CHAPTER_COMPLETE="chapter_complete",c.BITRATE_CHANGE="bitrate_change",c.TRACK_ERROR="track_error",c.VIDEO_INFO="video_info",c.AD_BREAK_INFO="ad_break_info",c.AD_INFO="ad_info",c.CHAPTER_INFO="chapter_info",c.QOS_INFO="qos_info",c.RSID="rsid",c.TRACKING_SERVER="tracking_server",c.USE_SSL="use_ssl",c.VISITOR_ID="visitor_id",c.ANALYTICS_VISITOR_ID="analytics_visitor_id",c.MARKETING_CLOUD_VISITOR_ID="marketing_cloud_visitor_id",c.OVP="ovp",c.SDK="sdk",c.CHANNEL="channel",c.PUBLISHER="publisher",c.prototype.configure=function(a){this.log("#configure({, trackingServer="+a.trackingServer+", jobId="+a.jobId+", quietMode="+a.quietMode+"})");var b=a.trackingServer+"/settings/",c={};c[d.TRACKING_SERVER]=a.trackingServer,c[d.CHECK_STATUS_SERVER]=b,c[d.JOB_ID]=a.jobId,c[d.QUIET_MODE]=a.quietMode,this._enqueueEvent(new j(j.API_CONFIG,c)),this._enqueueEvent(new k(k.CLOCK_CHECK_STATUS_GET_SETTINGS)),this._isConfigured=!0},c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a);var b=this._eventMap={};b[c.VIDEO_LOAD]=j.API_VIDEO_LOAD,b[c.VIDEO_UNLOAD]=j.API_VIDEO_UNLOAD,b[c.VIDEO_START]=j.API_VIDEO_START,b[c.VIDEO_COMPLETE]=j.API_VIDEO_COMPLETE,b[c.PLAY]=j.API_PLAY,b[c.PAUSE]=j.API_PAUSE,b[c.AD_START]=j.API_AD_START,b[c.AD_COMPLETE]=j.API_AD_COMPLETE,b[c.BUFFER_START]=j.API_BUFFER_START,b[c.SEEK_START]=j.API_SEEK_START,b[c.SEEK_COMPLETE]=j.API_SEEK_COMPLETE,b[c.CHAPTER_START]=j.API_CHAPTER_START,b[c.CHAPTER_COMPLETE]=j.API_CHAPTER_COMPLETE,b[c.BITRATE_CHANGE]=j.API_BITRATE_CHANGE,b[c.TRACK_ERROR]=j.API_TRACK_ERROR;var d=this._customActions={};d[c.VIDEO_LOAD]=this._onVideoLoad,d[c.VIDEO_UNLOAD]=this._onVideoUnload,d[c.PLAY]=this._onPlay,d[c.PAUSE]=this._onPause,d[c.AD_START]=this._onAdStart,d[c.AD_COMPLETE]=this._onAdComplete,d[c.BUFFER_START]=this._onBufferStart,d[c.BUFFER_COMPLETE]=this._onBufferComplete,d[c.SEEK_START]=this._onSeekStart,d[c.SEEK_COMPLETE]=this._onSeekComplete,d[c.TRACK_ERROR]=this._onTrackError,this._pluginManager.on(u,f.WILDCARD,this._onPlayerEvent,this),this._resetInternalState()},c.prototype.setup=function(){this._pluginManager.pluginExists(w)?this._pluginManager.isPluginInitialized(w)?this._completeInitialization():this._pluginManager.on(w,q.INITIALIZED,this._completeInitialization,this):this._completeInitialization()},c.prototype._teardown=function(){this.log("#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._network.destroy(),this._workQueue.cancelAllCommands()},c.prototype._onPlayerEvent=function(a){if(this._canProcess()){var b=a.type.split(":"),c=b[1],d=a.data;this.log("#_onPlayerEvent() > Tracking event: "+c.toUpperCase()),this._retriggerEvent(c,d)}},c.prototype._retriggerEvent=function(a,b){var c=this._eventMap[a],d=this._customActions[a];if(c||"function"==typeof d){var e=this,f=function(a){return e._enqueueEvent(new j(c,a))};"function"==typeof d?d.call(this,f,b):f(b)}},c.prototype._onVideoLoad=function(a){this._isTrackingSessionActive&&this._enqueueEvent(new j(j.API_VIDEO_UNLOAD)),this._resetInternalState(),a(),this._isTrackingSessionActive=!0},c.prototype._onVideoUnload=function(a){a(),this._isTrackingSessionActive=!1},c.prototype._onPlay=function(a){this._isPaused=!1,this._resumePlaybackIfPossible()},c.prototype._onPause=function(a){a(),this._isPaused=!0},c.prototype._onAdStart=function(a){a(),this._resumePlaybackIfPossible()},c.prototype._onAdComplete=function(a){a(),this._resumePlaybackIfPossible()},c.prototype._onBufferStart=function(a){a(),this._isBuffering=!0},c.prototype._onBufferComplete=function(){this._isBuffering=!1,this._resumePlaybackIfPossible()},c.prototype._onSeekStart=function(a){a(),this._enqueueEvent(new j(j.API_PAUSE)),this._isSeeking=!0},c.prototype._onSeekComplete=function(a){a(),this._isSeeking=!1,this._resumePlaybackIfPossible()},c.prototype._onTrackError=function(a,b){this.log("#_onTrackError(source="+b[d.SOURCE]+", errorId="+b[d.ERROR_ID]+")."),a(b)},c.prototype._onError=function(a){var b=a.data,c={};c[d.SOURCE]=s,c[d.ERROR_ID]=b.message+"|"+b.details,this._channel.trigger(new j(j.API_TRACK_INTERNAL_ERROR,c)),this._trigger(p.ERROR,a.data)},c.prototype._onVideoUnloaded=function(){this._trigger(c.VIDEO_UNLOADED)},c.prototype._initSubmodules=function(){this._context=new n(this._channel),this._clock=new l(this._channel),this._network=new m(this._channel,new o)},c.prototype._canTrack=function(){return this._isConfigured||this.warn("_canTrack() > Unable to track! Is configured: "+this._isConfigured),this._isConfigured},c.prototype._enqueueEvent=function(a){this.log("#_enqueueEvent() : "+a.type),this._workQueue.addCommand(new h(function(){this._canTrack()&&this._channel.trigger(a)},this))},c.prototype._resetInternalState=function(){this._isTrackingSessionActive=!1,this._isPaused=!1,this._isSeeking=!1,this._isBuffering=!1},c.prototype._resumePlaybackIfPossible=function(){this._isPaused||this._isSeeking||this._isBuffering||this._enqueueEvent(new j(j.API_PLAY))},c.prototype._completeInitialization=function(){var a=this._pluginManager.request(x,q.ERROR_INFO);return a?(this.warn("#_completeInitialization() > Unable to track: in ERROR state."),void this._workQueue.cancelAllCommands()):(this._workQueue.flush(),void c.__super__.setup.call(this))},a.HeartbeatPlugin=c}(f,d),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,e),this._config=null;var a={};a.publisher="publisher",a.channel="channel",a.ovp="ovp",a.sdk="sdk",a.is_primetime="__primetime",this._dataResolver=function(b){return this._config?this._config[a[b]]:null}}var d=b.plugin.BasePlugin;b.extend(c,d);var e="config";c.prototype.configure=function(a){this._config=a,c.__super__.setup.call(this)},c.prototype.setup=function(){},a.ConfigPlugin=c}(e,d),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,f)}var d=b.plugin.BasePlugin,e=b.plugin.PluginManager;b.extend(c,d);var f="state";c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a),this._pluginManager.on(e.ALL_PLUGINS,e.ERROR,this._onError,this),this._dataResolver[d.ERROR_INFO]=function(){return this._isEnabled?this._errorInfo:null}},c.prototype._onError=function(a){this._errorInfo=a.data,this.warn("#_onError() > "+this._errorInfo.message+": "+this._errorInfo.details)},a.StatePlugin=c}(e,d),function(a,b,c){"use strict";function d(a){d.__super__.constructor.call(this,h),this._playerDelegate=a}var e=c.event.EventKeyName,f=b.plugin.BasePlugin,g=b.plugin.PluginManager;b.extend(d,f);var h="player",i="sourceErrorExternal",j="sourceErrorSDK",k="heartbeat";d.VIDEO_LOAD="video_load",d.VIDEO_UNLOAD="video_unload",d.VIDEO_UNLOADED="video_unloaded",d.VIDEO_START="video_start",d.VIDEO_COMPLETE="video_complete",d.PLAY="play",d.PAUSE="pause",d.AD_START="ad_start",d.AD_COMPLETE="ad_complete",d.BUFFER_START="buffer_start",d.BUFFER_COMPLETE="buffer_complete",d.SEEK_START="seek_start",d.SEEK_COMPLETE="seek_complete",d.CHAPTER_START="chapter_start",d.CHAPTER_COMPLETE="chapter_complete",d.BITRATE_CHANGE="bitrate_change",d.TRACK_ERROR="track_error";var l="video_info",m="ad_break_info",n="ad_info",o="chapter_info",p="qos_info";d.prototype.setup=function(){this._pluginManager.on(k,d.VIDEO_UNLOADED,this._onVideoUnloaded,this),this._pluginManager.on(g.ALL_PLUGINS,g.ERROR,this._onError,this),this._checkPlayerDelegate();var a={};a[l]=this._playerDelegate.getVideoInfo,a[n]=this._playerDelegate.getAdInfo,a[m]=this._playerDelegate.getAdBreakInfo,a[o]=this._playerDelegate.getChapterInfo,a[p]=this._playerDelegate.getQoSInfo,this._dataResolver=function(b){return this._isEnabled?a[b].call(this._playerDelegate):null},d.__super__.setup.call(this)},d.prototype.trackVideoLoad=function(){this._canProcess()&&(this._trigger(d.VIDEO_LOAD),this._trigger(d.VIDEO_START))},d.prototype.trackVideoUnload=function(){this._canProcess()&&this._trigger(d.VIDEO_UNLOAD)},d.prototype.trackPlay=function(){this._canProcess()&&this._trigger(d.PLAY)},d.prototype.trackPause=function(){this._canProcess()&&this._trigger(d.PAUSE)},d.prototype.trackBufferStart=function(){this._canProcess()&&this._trigger(d.BUFFER_START)},d.prototype.trackBufferComplete=function(){this._canProcess()&&this._trigger(d.BUFFER_COMPLETE)},d.prototype.trackSeekStart=function(){this._canProcess()&&this._trigger(d.SEEK_START)},d.prototype.trackSeekComplete=function(){this._canProcess()&&this._trigger(d.SEEK_COMPLETE)},d.prototype.trackComplete=function(){this._canProcess()&&this._trigger(d.VIDEO_COMPLETE)},d.prototype.trackChapterStart=function(){this._canProcess()&&this._trigger(d.CHAPTER_START)},d.prototype.trackChapterComplete=function(){this._canProcess()&&this._trigger(d.CHAPTER_COMPLETE)},d.prototype.trackAdStart=function(){this._canProcess()&&this._trigger(d.AD_START)},d.prototype.trackAdComplete=function(){this._canProcess()&&this._trigger(d.AD_COMPLETE)},d.prototype.trackBitrateChange=function(){this._canProcess()&&this._trigger(d.BITRATE_CHANGE)},d.prototype.trackVideoPlayerError=function(a){var b={};b[e.SOURCE]=j,b[e.ERROR_ID]=a,this._trigger(d.TRACK_ERROR,b)},d.prototype.trackApplicationError=function(a){var b={};b[e.SOURCE]=i,b[e.ERROR_ID]=a,this._trigger(d.TRACK_ERROR,b)},d.prototype._onVideoUnloaded=function(a){this._canProcess()&&this._playerDelegate.onVideoUnloaded()},d.prototype._onError=function(a){if(this._canProcess()){var b=this;window.setTimeout(function(){b._playerDelegate.onError(a.data)},100)}},d.prototype._checkPlayerDelegate=function(){this._playerDelegate||this.error("PlayerDelegate cannot be null."),"function"!=typeof this._playerDelegate.getVideoInfo&&this.error("PlayerDelegate must define the getVideoInfo method."),"function"!=typeof this._playerDelegate.getAdBreakInfo&&this.error("PlayerDelegate must define the getAdBreakInfo method."),"function"!=typeof this._playerDelegate.getAdInfo&&this.error("PlayerDelegate must define the getAdInfo method."),"function"!=typeof this._playerDelegate.getChapterInfo&&this.error("PlayerDelegate must define the getChapterInfo method."),"function"!=typeof this._playerDelegate.getQoSInfo&&this.error("PlayerDelegate must define the getQoSInfo method.")},a.PlayerPlugin=d}(e,d,f),function(a,b,c,d,e){"use strict";function f(a,b){this.enableLogging("[video-heartbeat::VideoHeartbeat] > "),this._pluginManager=new g,this._statePlugin=new h,this._pluginManager.addPlugin(this._statePlugin),this._configPlugin=new i,this._pluginManager.addPlugin(this._configPlugin),this._playerPlugin=new j(a),this._pluginManager.addPlugin(this._playerPlugin),this._heartbeatPlugin=new k,this._pluginManager.addPlugin(this._heartbeatPlugin),b=b||[];for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins(),this._isDestroyed=!1,this._isConfigured=!1}var g=a.plugin.PluginManager,h=e.StatePlugin,i=e.ConfigPlugin,j=e.PlayerPlugin,k=c.HeartbeatPlugin,l=c.HeartbeatPluginConfig,m="primetime";a.mixin(f,a.logger),f.prototype.configure=function(b){b||this.error("Configuration object cannot be NULL"),a.LOGGING_ENABLED=!!b.debugLogging,b.__primetime&&(b.ovp=m),b.__psdkVersion&&(b.sdk=b.__psdkVersion),this._configPlugin.configure(b);var c=new l(b.trackingServer,b.jobId);c.quietMode=b.quietMode,this._heartbeatPlugin.configure(c),this._isConfigured=!0},f.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)},f.prototype.trackVideoLoad=function(){return this._isConfigured?this._isDestroyed?void this.warn("#trackVideoLoad() > Unable to track: instance previously destroyed."):(this.log("#trackVideoLoad() > Tracking a VIDEO_LOAD event."),void this._playerPlugin.trackVideoLoad()):void this.warn("#trackVideoLoad() > Unable to track: not configured.")},f.prototype.trackVideoUnload=function(){this._checkCall("trackVideoUnload")&&(this.log("#trackVideoUnload() > Tracking a VIDEO_UNLOAD event."),this._playerPlugin.trackVideoUnload())},f.prototype.trackPlay=function(){this._checkCall("trackPlay")&&(this.log("#trackPlay() > Tracking a PLAY event."),this._playerPlugin.trackPlay())},f.prototype.trackPause=function(){this._checkCall("trackPause")&&(this.log("#trackPause() > Tracking a PAUSE event."),this._playerPlugin.trackPause())},f.prototype.trackBufferStart=function(){this._checkCall("trackBufferStart")&&(this.log("#trackBufferStart() > Tracking a BUFFER_START event."),this._playerPlugin.trackBufferStart())},f.prototype.trackBufferComplete=function(){
this._checkCall("trackBufferComplete")&&(this.log("#trackBufferComplete() > Tracking a BUFFER_COMPLETE event."),this._playerPlugin.trackBufferComplete())},f.prototype.trackSeekStart=function(){this._checkCall("trackSeekStart")&&(this.log("#trackSeekStart() > Tracking a SEEK_START event."),this._playerPlugin.trackSeekStart())},f.prototype.trackSeekComplete=function(){this._checkCall("trackSeekComplete")&&(this.log("#trackSeekComplete() > Tracking a SEEK_COMPLETE event."),this._playerPlugin.trackSeekComplete())},f.prototype.trackComplete=function(){this._checkCall("trackComplete")&&(this.log("#trackComplete() > Tracking a COMPLETE event."),this._playerPlugin.trackComplete())},f.prototype.trackAdStart=function(){this._checkCall("trackAdStart")&&(this.log("#trackAdStart() > Tracking an AD_START event."),this._playerPlugin.trackAdStart())},f.prototype.trackAdComplete=function(){this._checkCall("trackAdComplete")&&(this.log("#trackAdComplete() > Tracking an AD_COMPLETE event."),this._playerPlugin.trackAdComplete())},f.prototype.trackChapterStart=function(){this._checkCall("trackChapterStart")&&(this.log("#trackChapterStart() > Tracking a CHAPTER_START event."),this._playerPlugin.trackChapterStart())},f.prototype.trackChapterComplete=function(){this._checkCall("trackChapterComplete")&&(this.log("#trackChapterComplete() > Tracking a CHAPTER_COMPLETE event."),this._playerPlugin.trackChapterComplete())},f.prototype.trackBitrateChange=function(){this._checkCall("trackBitrateChange")&&this._playerPlugin.trackBitrateChange()},f.prototype.trackVideoPlayerError=function(a){this._checkCall("trackVideoPlayerError")&&(this.log("#trackVideoPlayerError(errorId="+a+")."),this._playerPlugin.trackVideoPlayerError(a))},f.prototype.trackApplicationError=function(a){this._checkCall("trackApplicationError")&&(this.log("#trackApplicationError(errorId="+a+")."),this._playerPlugin.trackApplicationError(a))},f.prototype._checkCall=function(a){return this._errorInfo?(this.warn("#"+a+"() > Unable to track: in ERROR state. Message: "+this._errorInfo.message+" | Details: "+this._errorInfo.details),!1):this._isConfigured?this._isDestroyed?(this.warn("#"+a+"() > Unable to track: instance previously destroyed."),!1):!0:(this.warn("#"+a+"() > Unable to track: not configured."),!1)},f.prototype._resetInternalState=function(){this.log("#_resetInternalState() : Resetting internal state variables."),this._errorInfo=null,this._isTrackingSessionActive=!1,this._isPaused=!1,this._isSeeking=!1,this._isBuffering=!1},b.VideoHeartbeat=f}(d,c,f,b,e),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=d),a.ADB.va=c,a.ADB.va.plugins=e,a.ADB.va.utils=b}(this),function(a){!function(a,b,c){"use strict";function d(a){if(d.__super__.constructor.call(this,j),!a){var b="The reference to the player delegate implementation cannot be NULL.";this.error(this+" "+b)}this._appMeasurement=a,this._workQueue=new e(!0,z),this._inputDataSanitizer=new g(this._onInvalidInputData,this)}var e=a.radio.CommandQueue,f=a.radio.Command,g=a.InputDataSanitizer,h=c.md5,i=a.plugin.BasePlugin;a.extend(d,i);var j="adobe-analytics",k="player",l="config",m="video_start",n="ad_start",o="video_info",p="ad_break_info",q="ad_info",r="channel",s="is_primetime",t="rsid",u="tracking_server",v="use_ssl",w="visitor_id",x="analytics_visitor_id",y="marketing_cloud_visitor_id",z=2e3,A="video",B="videoAd",C="ms_s",D="msp_s",E="msa_s",F="mspa_s";d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._pluginManager.on(k,m,this._onPlayerVideoStart,this),this._pluginManager.on(k,n,this._onPlayerAdStart,this);var b={};b[t]="account",b[u]="trackingServer",b[v]="ssl",b[w]="visitorID",b[x]="analyticsVisitorID",b[y]="marketingCloudVisitorID",this._dataResolver=function(a){return this._isEnabled?this._appMeasurement[b[a]]:null},this._prepareAppMeasurement()},d.prototype.setup=function(){},d.prototype._teardown=function(){this._pluginManager.off(k,m,this._onPlayerVideoStart,this),this._pluginManager.off(k,n,this._onPlayerAdStart,this)},d.prototype._onPlayerVideoStart=function(){this._enqueueCall("aa.open",this._executeAdobeAnalyticsOpen)},d.prototype._onPlayerAdStart=function(){this._enqueueCall("aa.openAd",this._executeAdobeAnalyticsOpenAd)},d.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.CPM"],delete this._appMeasurement.contextData["a.media.ad.view"]},d.prototype._enqueueCall=function(a,b,c){this._isInitialized&&this._workQueue.isEmpty()?b.apply(this,c):(this.log("#_enqueueCall() : "+a),this._workQueue.addCommand(new f(b,this,c)))},d.prototype._executeAdobeAnalyticsOpen=function(){if(this._canProcess()){var a=this._pluginManager.request(k,o);this._inputDataSanitizer.sanitizeVideoInfo(a)&&(this.log("#_executeAdobeAnalyticsOpen(id="+a.id+", length="+a.length+", streamType="+a.streamType+", playerName="+a.playerName+")"),this._resetAppMeasurementContextData(),this._appMeasurement.contextData["a.contentType"]=A,this._appMeasurement.contextData["a.media.name"]=a.id,this._appMeasurement.contextData["a.media.friendlyName"]=a.name||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.length)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=this._pluginManager.request(l,r),this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.pev3=A,this._appMeasurement.pe=this._pluginManager.request(l,s)?D:C,this._appMeasurement.track())}},d.prototype._executeAdobeAnalyticsOpenAd=function(){if(this._canProcess()){var a=this._pluginManager.request(k,o);if(this._inputDataSanitizer.sanitizeVideoInfo(a)){var b=this._pluginManager.request(k,p);if(this._inputDataSanitizer.sanitizeAdBreakInfo(b)){var c=this._pluginManager.request(k,q);if(this._inputDataSanitizer.sanitizeAdInfo(c)){var d=h(a.id)+"_"+b.position;this.log("#_executeAdobeAnalyticsOpenAd(id="+c.id+", length="+c.length+", playerName="+b.playerName+", parentId="+a.id+", podId="+d+", parentPodPosition="+c.position+", podSecond="+b.startTime+", cpm="+c.cpm+")"),this._resetAppMeasurementContextData(),this._appMeasurement.contextData["a.contentType"]=B,this._appMeasurement.contextData["a.media.name"]=a.id,this._appMeasurement.contextData["a.media.channel"]=this._pluginManager.request(l,r),this._appMeasurement.contextData["a.media.ad.name"]=c.id,this._appMeasurement.contextData["a.media.ad.friendlyName"]=c.name||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=b.name||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(c.length)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=b.playerName,this._appMeasurement.contextData["a.media.ad.pod"]=d,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(c.position)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(b.startTime)||"0.0",this._appMeasurement.contextData["a.media.ad.CPM"]=c.cpm,this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=B,this._appMeasurement.pe=this._pluginManager.request(l,s)?F:E,this._appMeasurement.track()}}}}},d.prototype._prepareAppMeasurement=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady)},d.prototype._onAppMeasurementReady=function(){return this._pluginManager.request(i.STATE_PLUGIN,i.ERROR_INFO)?(this.log("#_onAppMeasurementReady() > Unable to track: in ERROR state."),void this._workQueue.cancelAllCommands()):(this._workQueue.resume(),void d.__super__.setup.call(this))},b.AdobeAnalyticsPlugin=d}(a.ADB.core,a.ADB.va.plugins,a.ADB.va.utils)}(this);var s_ver="medscape|20150617",s_live=!1,_ud="undefined";try{"webmddev"==s_account?(s_account="webmdp1medscapevistadev",s_live=!1):(s_account="webmdp1global",s_live=!0)}catch(e){var s_account="webmdp1global";s_live=!0}var _src=_readQ("src");""!==_src&&(_src=_src.toLowerCase());var s_md=s_gi(s_account);_dom=document.domain.split(".");var s_domain=_dom[_dom.length-2]+"."+_dom[_dom.length-1];if(s_md.cookieDomainPeriods="3",s_md.jsCookieDomainPeriods="2",s_md.charSet="ISO-8859-1",s_md.currencyCode="USD",s_md.trackDownloadLinks=!0,s_md.trackExternalLinks=!0,s_md.trackInlineStats=!0,s_md.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,doc,pdf,xls",s_md.linkInternalFilters="javascript:,.medscape.com,.medscape.org",s_md.linkLeaveQueryString=!1,s_md.linkTrackVars="prop3,prop19,prop22,prop37,prop38,prop47,prop48,prop50",s_md.linkTrackEvents="None",s_md.visitorNamespace="webmd",s_md.usePlugins=!0,function(){var a,b;if(window.s_context)for(a in window.s_context)b=window.s_context[a],wmdSetContext(a,b)}(),s_md.doPlugins=s_md_doPlugins,s_md.c_gd=new Function("var s=this,d=s.wd.location.hostname,n=s.jsCookieDomainPeriods,n2=s.cookieDomainPeriods,p;if(d&&!s.c_d){n=n?n:n2;n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'.','c_gdf',0)?d.substring(p):'';}return s.c_d"),s_md.trackGAS=new Function("var s_md=this,gifa=document.getElementsByTagName('iframe'),gif;for(var i=0;i<gifa.length;i++){if(gifa[i].src.indexOf('googlesyndication.com')>-1){gif=gifa[i];if(gif.attachEvent){gif.attachEvent('onfocus',s_md.gasf);}}}"),s_md.gasf=new Function("var s_md=s_gi(s_account);s_md.prop36=s_md.pageName;s.tl(true,'o','Google Exit Link');"),s_md.trackGAS(),typeof s_site==_ud||""===s_site){var s_site="medscape",s_subdomain="";typeof _dom!=_ud&&_dom.length>=2&&("imedicine"==_dom[1]||"imedicine"==_dom[0]?(s_site="imedicine",s_subdomain="imedicine"):(("emedicine"==_dom[0]||"reference"==_dom[0])&&(s_site="emedicine"),s_subdomain=_dom[0],s_domain.indexOf("medscape.org")>=0&&(s_site="cme",s_subdomain="www"))),typeof _dom!=_ud&&_dom.length>2&&("fr"==_dom[_dom.length-1]&&(s_site="medscape-fr"),"de"==_dom[_dom.length-1]&&(s_site="medscape-de"))}else{var s_subdomain="";typeof _dom!=_ud&&_dom.length>=2&&(s_subdomain="imedicine"==s_site?"imedicine":"cme"==s_site?"www":_dom[0])}var _URL="";try{_URL=s_pagename}catch(e){}""===_URL&&(_URL1=String(document.location).split("?"),_URL2=_URL1[0].split(";"),_URL=_URL2[0]),_URL=_urlClean(_URL);var _asset=_URL.substr(_URL.indexOf("/")+1);if(_asset=String(_clean(_asset)),typeof s_query==_ud){var s_query="",s_filter="";if(!s_query&&(""!==_readQ("querytext")?s_query=_readQ("querytext"):null!==document.domain.match("search")&&""!==_readQ("q")&&(s_query=_readQ("q")),""!==s_query&&(s_filter=s_query),typeof s_pagenum==_ud))var s_pagenum="1"}try{_readQ("pagenumber")>1?s_pagenum=_readQ("pagenumber"):null!==document.domain.match("search")&&_readQ("page")>1&&(s_pagenum=_readQ("page"))}catch(e){}var _prop47fromPage="";if(!s_user_origin)var s_user_origin="";if("us"==s_user_origin.toLowerCase())try{_prop47fromPage="physician"==s_user_group.toLowerCase()?"us-physician":"us-other"}catch(e){}else try{_prop47fromPage="physician"==s_user_group.toLowerCase()?"non-us-physician":"non-us-other"}catch(e){}s_md.eVar4=_prop47fromPage;var s_hier1_subsite="-";if(typeof s_mobileweb!=_ud&&"yes"==s_mobileweb?(s_md.prop48="mbl-yes",s_hier1_subsite="mobile"):s_md.prop48="mbl-no","connect"==s_site?s_md.hier1="webmd,cns,ooc,"+s_site+","+s_hier1_subsite:s_md.hier1="webmd,pro,oop,"+s_site+","+s_hier1_subsite,s_md.hier2="pro,"+s_subdomain+",medscape,-","cme"==s_site&&(s_md.hier2="pro,cme,medscape,-"),s_md.prop50=setProp50(),"connect"==s_site){var uPermC=String(_readC("WBMD_PERM"));s_md.prop41="consumer-unregistered",typeof uPermC!=_ud&&""!==uPermC&&(s_md.prop41="consumer-full")}var s_pageview_sent="n";try{if(s_not_pageview)"n"!=s_not_pageview&&(s_not_pageview="y");else var s_not_pageview="n"}catch(e){var s_not_pageview="n"}if(!s_print){if("true"==_readQ("prt"))var s_print=1;if(_URL.indexOf("_print")>0)var s_print=1}var s_errAs="",s_eUrl="",s_eRef="";try{s_error||(s_error="")}catch(e){s_error=""}try{s_pageType&&(s_error=s_pageType)}catch(e){s_pageType=""}try{if(""!==s_error){_rf=document.location.href;var _qrypos=_rf.indexOf("?")}if(""===s_error){_rf1=document.location.href;var _qrypos1=_rf1.indexOf("ReqURL=");_qrypos1>=0&&(_qrypos>=0&&(_qry=_rf.substring(_qrypos+1),_rf=_qry.split("ourl=").join(""),_er=_rf.split("&referer="),s_eUrl=_er[0],s_eRef=_er[1]),_qry1=_rf1.substring(_qrypos1+7),_er1=_qry1.split("&referer="),s_error="errorPage",s_eUrl="404;http://"+document.domain+_er1[0])}if(s_eUrl){s_errAs=s_eUrl.split("://").join("");var _len=s_errAs.indexOf("/");s_errAs=s_errAs.substring(_len,s_errAs.length),s_errAs=_urlClean(s_errAs).substr(1)}}catch(e){s_error=""}if("n"==s_not_pageview){var sCtrRead="";try{if(sCtrRead=String(_readC("ctr")),prop29LastPg=String(_readC("prop29")).toLowerCase(),sCtrRead&&sCtrRead!=_ud){var _dtDel=new Date;document.cookie="ctr=undefined; path=/; domain="+s_domain+";expires="+_dtDel.toGMTString(),document.cookie="prop29=undefined; path=/; domain="+s_domain+";expires="+_dtDel.toGMTString();var _CtrRead=sCtrRead.split("|"),s_ctr_loc=_CtrRead[0],s_ctr_query=_CtrRead[1],_pos=s_ctr_loc.indexOf("_");if(_pos>0)var s_ml=s_ctr_loc.substr(_pos+1)}}catch(e){}}s_md.events="event5",s_md.pageName=_URL;try{"connect"==s_site?s_md.prop1="cns":s_md.prop1="pro"}catch(e){}try{"connect"==s_site?s_md.prop2="ooc":s_md.prop2="oop"}catch(e){}try{s_md.prop3=s_site.toLowerCase()}catch(e){}try{s_md.prop4=s_channel,s_md.channel=s_channel}catch(e){}try{s_md.prop5=s_asset_type.toLowerCase()}catch(e){}try{s_md.prop6=typeof s_asset_class!=_ud&&""!==s_asset_class?s_asset_class.toLowerCase():s_business_reference.toLowerCase()}catch(e){}try{s_md.prop7=_asset.toLowerCase()}catch(e){}try{s_md.prop8=s_pub.toLowerCase()}catch(e){s_md.prop8="-"}try{s_md.prop9=s_pagenum}catch(e){}try{s_md.eVar1=s_md.pageName}catch(e){}try{s_md.prop10=s_query.toLowerCase(),s_md.eVar10=s_md.prop10}catch(e){}try{s_md.prop11=s_filter}catch(e){}try{s_md.prop12=s_results.toLowerCase()}catch(e){}try{s_md.prop15=_src.indexOf("rss")>=0?"rss":""}catch(e){}try{s_md.prop16=s_test1.toLowerCase()}catch(e){}try{s_md.prop19=s_user_group.toLowerCase()}catch(e){s_md.prop19="ntc"}try{s_md.prop20=trun20(s_ctr_loc).toLowerCase(),s_md.eVar20=s_md.prop20}catch(e){}try{null!==document.referrer.split(".")[0].match("search")&&""!==_readRefQ("q")?s_md.prop21=_readRefQ("q"):s_md.prop21=_readRefQ("queryText")}catch(e){}try{s_md.prop23=s_board.toLowerCase()}catch(e){}try{""!==s_error&&(s_md.pageType="errorPage",s_eUrl&&(s_md.pageName=s_eUrl,s_md.prop7=s_errAs,s_md.pageURL=s_eUrl))}catch(e){}try{s_md.prop25=s_test2.toLowerCase()}catch(e){}try{s_md.prop28=s_sponsor_brand.toLowerCase()}catch(e){s_md.prop28="ntc"}try{s_md.prop29=s_sponsor_program.toLowerCase()}catch(e){s_md.prop29="ntc"}try{s_md.prop30=s_package_type.toLowerCase()}catch(e){s_md.prop30="ntc"}try{s_md.prop31=s_package.toLowerCase()}catch(e){s_md.prop31="ntc"}try{s_md.prop35=s_board_group.toLowerCase()}catch(e){}try{s_md.prop36=s_board_topic.toLowerCase()}catch(e){}try{s_md.prop37=s_user_origin.toLowerCase()}catch(e){}try{s_md.prop38=s_user_specialty.toLowerCase()}catch(e){}try{s_md.prop39=s_board_clinical.toLowerCase()}catch(e){}if("connect"==s_site){var qecd=_readQ("ECD");if(""===qecd&&(qecd=_readQ("ecd")),""!==qecd){var vendor=_readQ("v"),publisher=_readQ("p");""!==vendor&&(vendor=vendor.split("_").join("-"),qecd=0===qecd.lastIndexOf("_")?qecd+vendor:qecd+"_"+vendor),""!==publisher&&(publisher=publisher.split("_").join("-"),qecd+="_"+publisher),qecd=qecd.toLowerCase(),qecd=qecd.split("__").join("_").split("%20").join("-"),s_md.prop43=qecd}}""!==_src&&(_src=_src.toLowerCase(),sCookie("src",_src),s_md.prop43=_src,s_md.eVar43=_src,s_md.campaign=_src);try{s_md.eVar0=s_md.prop43}catch(e){}try{s_md.prop47=s_registered_user_id.toLowerCase()}catch(e){s_md.prop47="000000000"}try{s_md.prop24=s_pageview_id}catch(e){}try{s_md.server=s_ver.toLowerCase()}catch(e){}var visitor=new Visitor("16AD4362526701720A490D45@AdobeOrg",{trackingServer:"std.o.webmd.com",trackingServerSecure:"ssl.o.webmd.com",marketingCloudServer:"std.o.webmd.com",marketingCloudServerSecure:"ssl.o.webmd.com"});if(s_md.visitor=Visitor.getInstance("16AD4362526701720A490D45@AdobeOrg"),s_md.trackingServer="std.o.webmd.com",s_md.trackingServerSecure="ssl.o.webmd.com",s_md.dc="122","n"==s_not_pageview){try{mboxLoadSCPlugin(s_md)}catch(e){}s_pageview_sent="y";var s_code=s_md.t();s_code&&document.write(s_code)}
//# sourceMappingURL=../bi_common/sourcemap/bi_medscape_sourcemap.js