
(function(pn){var TemplateBuilder=function(docInfo,creative,templateCode){this.document=docInfo.document;this.window=docInfo.window;this.creative=creative;this.templateCode=templateCode;this.debugOptions={};};TemplateBuilder.prototype.build=function(){var templateCode=this.templateCode;var creativeParams=this.creative.params;return this.interpolate(templateCode,creativeParams);};TemplateBuilder.prototype.interpolate=function(templateCode,creativeParams){var macroKey,macroVal,regex;for(macroKey in creativeParams){macroVal=creativeParams[macroKey];regex=new RegExp('%%%'+macroKey+'%%%','gi');if(templateCode.match(regex)){templateCode=templateCode.replace(regex,macroVal);}}
return templateCode;};window._tlModuleLoader.onReady(pn,TemplateBuilder);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/TemplateBuilder.js");


(function(pn){var PROGRESS_LIMIT_MS=2000;var ProgressBar=function(block){this.document=block.ownerDocument;this.block=block;};ProgressBar.prototype.setClassProperties=function(){if(!this.styleSet){var x=document.createElement('STYLE');x.textContent='.triplelift_progress_element::-webkit-progress-value { background: white; }';x.textContent+='.triplelift_progress_element::-moz-progress-bar { background: white; }';x.textContent+='.triplelift_progress_div { width:100%; height:100%; position: relative; background-color:whiteSmoke; }';x.textContent+='.triplelift_progress_div > span { text-indent: -9999px; background-color:blue; display:block; border-radius:2px;}';document.body.appendChild(x);this.styleSet=true;}};ProgressBar.prototype.setValue=function(v){this.pb.value=v.toString();var max=parseInt(this.pb.max,10);var IESpan=pb.getElementsByTagName('SPAN')[0];IESpan.style.width=Math.round(100*(v/max))+"%";};ProgressBar.prototype.styleProgressBar=function(pb){this.setClassProperties();var block=this.block;pb.className="triplelift_progress_element";pb.style.position="absolute";if(block.style.top!==''){pb.style.top=block.style.top;}else{pb.style.top=block.offsetTop;}
if(block.style.left!==''){pb.style.left=block.style.left;}else{pb.style.left=block.offsetLeft;}
pb.style.opacity=0.6;pb.style.width=this.block.offsetWidth+"px";pb.style.height="10px";pb.style['-webkit-appearance']='none';};ProgressBar.prototype.createIESafeProgress=function(pb){var d=this.document.createElement('DIV');d.className="triplelift_progress_div";var s=this.document.createElement('SPAN');s.className="triplelift_progress_span";d.appendChild(s);s.style.width="0%";s.textContent="1000000";pb.appendChild(d);};ProgressBar.prototype.setProgressBar=function(cb){var pb=this.document.createElement('PROGRESS');pb.style.display="none";this.pb=pb;pb.max=PROGRESS_LIMIT_MS.toString();this.createIESafeProgress(pb);this.styleProgressBar(pb);this.block.parentNode.insertBefore(pb,this.block);};window._tlModuleLoader.onReady(pn,ProgressBar);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/ProgressBar.js");


(function(pn){var BrowserInvariants=function(){};BrowserInvariants.prototype.doShims=function(win){this.setForEach(win);this.setCSSProps(win);this.setEvents();this.setBind();this.setSome();this.setCreate();this.setIndexOf();this.setTrim();}
BrowserInvariants.prototype.setTrim=function(){if(!String.prototype.trim){(function(){var rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(rtrim,'');};})();}};BrowserInvariants.prototype.isMobile=function(){return(navigator&&navigator.userAgent&&navigator.userAgent.match(/iphone|android/i));};BrowserInvariants.prototype.parsePixInt=function(pixString){var split=pixString.split('px');var parsed=split[0];return parseInt(parsed);};BrowserInvariants.prototype.closest=function(start,selector,direction){var RIGHT=0;var LEFT=1;if(!start){return false;}
var flag=true;if(selector.tagName){if(start.tagName!==selector.tagName){flag=false;}}
if(selector.id){if(start.id!==selector.id){flag=false;}}
if(selector.classNames){if(!start.className){flag=false;}else{var classes_array=start.className.split(' ');var classes={};classes_array.forEach(function(c){classes[c]=c;});selector.classNames.forEach(function(cn){if(!(cn in classes)){flag=false;}});}}
if(flag){return start;}else{if(direction===LEFT){if(start.previousSibling){return this.closest(start.previousSibling,selector,LEFT);}
return this.closest(start.nextSibling,selector,RIGHT);}else{if(start.nextSibling){return this.closest(start.nextSibling,selector,RIGHT);}
return this.closest(start.parentNode,selector,LEFT);}}};BrowserInvariants.prototype.setForEach=function(win){var Array=win.Array;if(!Array.prototype.forEach){Array.prototype.forEach=function(callback,thisArg){var T,k;if(this==null){throw new TypeError(' this is null or not defined');}
var O=Object(this);var len=O.length>>>0;if(typeof callback!=="function"){throw new TypeError(callback+' is not a function');}
if(arguments.length>1){T=thisArg;}
k=0;while(k<len){var kValue;if(k in O){kValue=O[k];callback.call(T,kValue,k,O);}
k++;}};}};BrowserInvariants.prototype.setCSSProps=function(win){var CSSStyleDeclaration=win.CSSStyleDeclaration;var escape=function(text){return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");};var isStyleFuncSupported=!!CSSStyleDeclaration.prototype.getPropertyValue;if(!isStyleFuncSupported){CSSStyleDeclaration.prototype.getPropertyValue=function(a){return this.getAttribute(a);};CSSStyleDeclaration.prototype.setProperty=function(styleName,value,priority){this.setAttribute(styleName,value);var priority=typeof priority!='undefined'?priority:'';if(priority!=''){var rule=new RegExp(escape(styleName)+'\\s*:\\s*'+escape(value)+'(\\s*;)?','gmi');this.cssText=this.cssText.replace(rule,styleName+': '+value+' !'+priority+';');}};CSSStyleDeclaration.prototype.removeProperty=function(a){return this.removeAttribute(a);};CSSStyleDeclaration.prototype.getPropertyPriority=function(styleName){var rule=new RegExp(escape(styleName)+'\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?','gmi');return rule.test(this.cssText)?'important':'';}}};BrowserInvariants.prototype.setEvents=function(){if(!Element.prototype.addEventListener){var oListeners={};function runListeners(oEvent){if(!oEvent){oEvent=window.event;}
for(var iLstId=0,iElId=0,oEvtListeners=oListeners[oEvent.type];iElId<oEvtListeners.aEls.length;iElId++){if(oEvtListeners.aEls[iElId]===this){for(iLstId;iLstId<oEvtListeners.aEvts[iElId].length;iLstId++){oEvtListeners.aEvts[iElId][iLstId].call(this,oEvent);}
break;}}}
Element.prototype.addEventListener=function(sEventType,fListener){if(oListeners.hasOwnProperty(sEventType)){var oEvtListeners=oListeners[sEventType];for(var nElIdx=-1,iElId=0;iElId<oEvtListeners.aEls.length;iElId++){if(oEvtListeners.aEls[iElId]===this){nElIdx=iElId;break;}}
if(nElIdx===-1){oEvtListeners.aEls.push(this);oEvtListeners.aEvts.push([fListener]);this["on"+sEventType]=runListeners;}else{var aElListeners=oEvtListeners.aEvts[nElIdx];if(this["on"+sEventType]!==runListeners){aElListeners.splice(0);this["on"+sEventType]=runListeners;}
for(var iLstId=0;iLstId<aElListeners.length;iLstId++){if(aElListeners[iLstId]===fListener){return;}}
aElListeners.push(fListener);}}else{oListeners[sEventType]={aEls:[this],aEvts:[[fListener]]};this["on"+sEventType]=runListeners;}};Element.prototype.removeEventListener=function(sEventType,fListener){if(!oListeners.hasOwnProperty(sEventType)){return;}
var oEvtListeners=oListeners[sEventType];for(var nElIdx=-1,iElId=0;iElId<oEvtListeners.aEls.length;iElId++){if(oEvtListeners.aEls[iElId]===this){nElIdx=iElId;break;}}
if(nElIdx===-1){return;}
for(var iLstId=0,aElListeners=oEvtListeners.aEvts[nElIdx];iLstId<aElListeners.length;iLstId++){if(aElListeners[iLstId]===fListener){aElListeners.splice(iLstId,1);}}};}};BrowserInvariants.prototype.setBind=function(){if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=='function'){throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};}};BrowserInvariants.prototype.setSome=function(){if(!Array.prototype.some){Array.prototype.some=function(fun){'use strict';if(this==null){throw new TypeError('Array.prototype.some called on null or undefined');}
if(typeof fun!=='function'){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t&&fun.call(thisArg,t[i],i,t)){return true;}}
return false;};}};BrowserInvariants.prototype.setCreate=function(){if(typeof Object.create!='function'){Object.create=(function(){function Temp(){}
var hasOwn=Object.prototype.hasOwnProperty;return function(O){if(typeof O!='object'){throw TypeError('Object prototype may only be an Object or null');}
Temp.prototype=O;var obj=new Temp();Temp.prototype=null;if(arguments.length>1){var Properties=Object(arguments[1]);for(var prop in Properties){if(hasOwn.call(Properties,prop)){obj[prop]=Properties[prop];}}}
return obj;};})();}};BrowserInvariants.prototype.setIndexOf=function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(this==null){throw new TypeError('"this" is null or not defined');}
var O=Object(this);var len=O.length>>>0;if(len===0){return-1;}
var n=+fromIndex||0;if(Math.abs(n)===Infinity){n=0;}
if(n>=len){return-1;}
k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===searchElement){return k;}
k++;}
return-1;};}};var listeners={};var tripleliftElementID=0;BrowserInvariants.prototype.setDOMEvent=function(el,eventType,cb,cancel){var wrappedCallBack=function(e){var target;if(!e){target=this;e={};}
else{target=e.target||e.srcElement;}
var data=e.data;cb({target:target,data:data});if(cancel){e.stopPropagation&&e.stopPropagation();e.preventDefault&&e.preventDefault();return false;}
return true;};if(el.addEventListener){el.addEventListener(eventType,wrappedCallBack);}
else if(el.attachEvent){el.attachEvent('on'+eventType,wrappedCallBack);}
else{throw new Error('unknown event api');}
if(!el.tagName){return;}
if(el.getAttribute('tleid')!=null){listeners[el.getAttribute('tleid')].events.push({type:eventType,cb:wrappedCallBack});}else{listeners[tripleliftElementID]={el:el,events:[{type:eventType,cb:wrappedCallBack}]};el.setAttribute('tleid',tripleliftElementID.toString());tripleliftElementID++;}};BrowserInvariants.prototype.clearDOMEvents=function(el){var tleid=parseInt(el.getAttribute('tleid'),10);if(isNaN(tleid)){return;}
var el=listeners[tleid];if(!el){throw new Error('no element at triplelift element id: '+tleid);}
el=el.el;listeners[tleid].events.forEach(function(eventInfo){el.removeEventListener(eventInfo.type,eventInfo.cb);});};BrowserInvariants.prototype.getWindowFromDocument=function(doc){var win=window;while(win){if(window.document=doc){return win;}
win=win.parent;}};BrowserInvariants.prototype.docCookies={getItem:function(sKey){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},removeItem:function(sKey,sPath,sDomain){if(!sKey||!this.hasItem(sKey)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},hasItem:function(sKey){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nIdx=0;nIdx<aKeys.length;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);}
return aKeys;}};window._tlModuleLoader.onReady(pn,BrowserInvariants);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/BrowserInvariants.js");


(function(pn){var exports={};var pending={};var updateLogoZones=function(logoZoneInfo){if(pending[logoZoneInfo.qs]){pending[logoZoneInfo.qs].forEach(function(cb){cb(logoZoneInfo.lp);});delete pending[logoZoneInfo.qs];}};var register=function(qs,cb){if(!pending[qs]){pending[qs]=[cb];}
else{pending[qs].push(cb);}};exports.updateLogoZones=updateLogoZones;exports.register=register;window._tlModuleLoader.onReady(pn,exports);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/LP.js");


(function(pn){var Layout=function(){try{jQuery;jQuery();this.jQueryPresent=true;}
catch(e){this.jQueryPresent=false;}};Layout.prototype.layout=function(hook){this.layoutMasonry(hook);this.layoutIsotope(hook);};Layout.prototype.layoutMasonry=function(hook){masonryContainer=jQuery(".masonry");if(!masonryContainer.length){masonryContainer=null;}
if(masonryContainer&&masonryContainer.length>1){masonryContainer=jQuery(masonryContainer[0]);}
if(!masonryContainer){jQuery.each(jQuery.find("*"),function(index,elem){if(jQuery.data(elem,"masonry")){masonryContainer=jQuery(elem);}});}
if(masonryContainer&&masonryContainer.data("masonry")){masonryContainer.masonry("reloadItems");masonryContainer.masonry();}};Layout.prototype.layoutIsotope=function(hook){var isoPresent=jQuery.fn.isotope;if(isoPresent){var $isoContainer=jQuery(".isotope");if($isoContainer.length!==1){var currentEl=hook;while(true){if(!currentEl.parentNode){break;}
if(!jQuery.data(jQuery(currentEl.parentNode),"isotope")){currentEl=currentEl.parentNode;continue;}
$isoContainer=jQuery(currentEl.parentNode);break;}}
if(!$isoContainer.data("isotope")){$isoContainer=false;}
$isoContainer&&$isoContainer.isotope('reloadItems').isotope({sortBy:'original-order'});}};window._tlModuleLoader.onReady(pn,Layout);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Layout.js");


(function(pn){var MessageManager=function(){};MessageManager.prototype.registerMessageGroup=function(messageGroup){this.messageGroup=messageGroup;};MessageManager.prototype.registerMessageListener=function(message,cb,once,useThis){if(!this.messageGroup[message]){throw new Error('unknown message');}
this.messageGroup[message].push({cb:cb,once:once,useThis:useThis});};MessageManager.prototype.registerMessages=function(messageList){var messageGroup={};messageList.forEach(function(messageName){messageGroup[messageName]=[];});this.registerMessageGroup(messageGroup);};MessageManager.prototype.emitMessage=function(message){var that=this;var newCBArr=[];messageGroup[message.name].forEach(function(listener){if(listener.useThis){listener.cb.call(listener.useThis,message.data);}
else{listener.cb(message.data);}
if(!listener.once){newCBArr.push(listener);}});messageGroup[message.name]=newCBArr;};window._tlModuleLoader.onReady(pn,MessageManager);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/MessageManager.js");


(function(pn){var SimpleImage=function(docInfo,hangEl){this.document=docInfo.document;this.window=docInfo.window;var s=this.document.createElement('IMG');s.src="http://img.3lift.com/?inv_code=makersalley_main&width=368&height=358&alt=tl&url=http%3A%2F%2Fimages.adpinr.com%2F2812631.jpg&logo_exclude=&v=24&logo=http%3A%2F%2Fimages.adpinr.com%2F2828495.jpg&lox=22&loy=0&cv_version=3&ha_version=2";hangEl.parentNode.insertBefore(s,hangEl);};window._tlModuleLoader.onReady(pn,SimpleImage);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/SimpleImage.js");


(function(pn){var glYTAPI;var YT;var YouTubeAPI=function(videoController){this.videoController=videoController;this.nativeAdInfo=videoController.nativeAdInfo;this.nativePlayerControls={height:videoController.config.playerSettings.showControls?35:0};videoController.nativeAdInfo.docInfo.topWindow.onYouTubePlayerAPIReady=function(){glYTAPI=true;YT=videoController.nativeAdInfo.docInfo.topWindow.YT;};};var checkForYTAPI=function(){return!!glYTAPI;};YouTubeAPI.prototype.setButtons=function(){var playerButtonManager=this.playerButtonManager=new this.nativeAdInfo.modules.ButtonManager(this.nativeAdInfo);playerButtonManager.registerBlock(this.videoController.wrappedPlayer);var xButton=new this.nativeAdInfo.modules.Button(this.videoController.assets.xbutton,12,12);var xButtonElement=playerButtonManager.addCornerButton(xButton,"NE",function(){});this.nativeAdInfo.cssHelper.setStyle(xButtonElement.style,"min-width","0px","important");this.nativeAdInfo.cssHelper.setStyle(xButtonElement.style,"min-height","0px","important");var that=this;this.setDOMEvent(xButtonElement,"click",function(e){that.videoController.toggleOff();},true);this.setDOMEvent(this.videoController.playButton,"click",function(e){that.videoController.toggleOn();},true);this.setDOMEvent(this.videoController.ad.getMainImage(),"click",function(e){that.videoController.toggleOn();},true);var transDiv=this.addTransparentDiv();if(transDiv.style['z-index']){xButtonElement.style['z-index']=(parseInt(transDiv.style['z-index'],10)+1)+"";}
else{xButtonElement.style['z-index']='1';}
this.addBottomBar();this.shareButtonElements=this.nativeAdInfo.modules.addShareButtons.addShareButtons(this.nativeAdInfo,this.playerButtonManager,0,this.nativePlayerControls.height-7);};YouTubeAPI.prototype.addTransparentDiv=function(){var div=this.transparentDiv=this.nativeAdInfo.docInfo.topDocument.createElement('DIV');div.style.opacity=0;var block=this.videoController.wrappedPlayer;div.style.position="absolute";div.style.width=block.offsetWidth+"px";div.style.height=(block.offsetHeight-this.nativePlayerControls.height)+"px";div.style.top='0px';div.style.left='0px';block.appendChild(div);var that=this;var onClick=function(e){var playerState=that.player.getPlayerState();if((playerState==YT.PlayerState.PAUSED)||(playerState==YT.PlayerState.CUED)||(playerState<0)){that.player.playVideo();}
else{that.pauseVideo();window.open(that.nativeAdInfo.creative.originalClickThroughURL,'_blank');that.nativeAdInfo.analytics.click();}};this.setDOMEvent(div,'click',onClick,true);return div;};YouTubeAPI.prototype.addBottomBar=function(){var bottomBar=new this.nativeAdInfo.modules.Button(this.videoController.assets.gradient,null,38);var bottomBarEl=this.bottomBarEl=this.playerButtonManager.addBottomBar(bottomBar,this.nativePlayerControls.height);bottomBarEl.style.display="none";this.nativeAdInfo.cssHelper.move2FrontStackingContext(bottomBarEl,this.playerButtonManager.block.parentNode);this.playerButtonManager.showOnHover(bottomBarEl);};YouTubeAPI.prototype.load=function(info,cont){this.initAPI();this.beginWait(checkForYTAPI,function(){cont(info);});};YouTubeAPI.prototype.pauseVideo=function(){this.player.pauseVideo();};YouTubeAPI.prototype.playVideo=function(){this.player.playVideo();};YouTubeAPI.prototype.getVideoLengthMS=function(){return this.getVideoLengthSeconds()*1000;};YouTubeAPI.prototype.getVideoLengthSeconds=function(){return this.player.getDuration();};YouTubeAPI.prototype.resetVideo=function(){var that=this;var onPlay=function(){that.player.pauseVideo();var testDuration=250;setTimeout(function(){if(that.player.getPlayerState()!==YT.PlayerState.PAUSED){onPlay();}},testDuration);};this.player.seekTo(0);this.registerOneTimePlayEvent(onPlay);};YouTubeAPI.prototype.registerOneTimePlayEvent=function(cb){if(this.oneTimePlayEvent){throw new Error('event already registered');}
this.oneTimePlayEvent=cb;};YouTubeAPI.prototype.initYTPlayer=function(wrappedPlayerInfo,w,h,cb){var config=this.videoController.config;var c=config.playerSettings.showControls?1:0;var r=0;var id=config.playerSettings.videoID;var that=this;this.player=new YT.Player(wrappedPlayerInfo.playerID,{height:h,width:w,videoId:id,playerVars:{controls:c,showinfo:0,modestbranding:1,rel:r,autohide:0,wmode:"transparent"},events:{'onReady':function(){cb();},'onStateChange':function(e){that.onPlayerStateChange(e)},'onError':function(e){e.youtube=true;that.nativeAdInfo.errorDecorator.fireError(e);}}});};YouTubeAPI.prototype.addPlayButtonClick=function(){var that=this;this.videoController.pb.click(function(){that.videoToggler.toggle();});};YouTubeAPI.prototype.beginWait=function(checker,action){if(checker()){action.call(this);}
else{var that=this;setTimeout(function(){that.beginWait(checker,action);},500);}};YouTubeAPI.prototype.setPrePlay=function(){this.videoController.setPrePlay();};YouTubeAPI.prototype.initAPI=function(){var tag=this.nativeAdInfo.docInfo.topDocument.createElement('script');tag.src="//www.youtube.com/player_api";var firstScriptTag=this.nativeAdInfo.docInfo.topDocument.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);};YouTubeAPI.prototype.registerYTAd=function(){var that=this;var onEvent=function(e){that.onEvent(e);};this.videoController.registerVideoAd(onEvent);};YouTubeAPI.prototype.initPlayer=function(cb){var videoController=this.videoController;var playerHook=this.videoController.hook;var w=this.parsePixInt(playerHook.style.width);var h=this.parsePixInt(playerHook.style.height);var wrappedPlayerInfo=this.videoController.wrappedPlayerInfo;this.initYTPlayer(wrappedPlayerInfo,w,h,cb);};YouTubeAPI.prototype.expDecayMonitor=function(n){if(this.videoController.videoEnded){return;}
if(this.videoController.playState==='playing'){this.nativeAdInfo.analytics.duration(this.getDuration());n=n*1.5;}
setTimeout(this.expDecayMonitor.bind(this,n),n);};YouTubeAPI.prototype.getDuration=function(){return this.durationMonitor.getDuration();};YouTubeAPI.prototype.onPlayerStateChange=function(e){var vc=this.videoController;var ac=vc.nativeAdInfo.analytics;if(e.data==YT.PlayerState.PLAYING){vc.playState="playing";if(!vc.initPlay){vc.initPlay=true;ac.play();vc.fireThirdPartyStartPix();this.durationMonitor=new vc.nativeAdInfo.modules.DurationMonitor(this.getVideoLengthMS());this.expDecayMonitor(1000);}
this.durationMonitor.setStart(new Date().getTime());if(this.oneTimePlayEvent){this.oneTimePlayEvent();this.oneTimePlayEvent=false;}}
else if(e.data==YT.PlayerState.PAUSED){vc.playState="paused";this.durationMonitor.setStop(new Date().getTime());}
else if(e.data===YT.PlayerState.ENDED){this.durationMonitor.setStop(new Date().getTime());var config=vc.config;vc.toggleOff();if(!vc.videoEnded){vc.videoEnded=true;var tlDurationSeconds=this.nativeAdInfo.creative.params.video_data.length_seconds;ac.duration(tlDurationSeconds*1000);vc.fireThirdPartyCompletionPix();}
if(config.playerSettings.resetVideo){this.resetVideo();}
if(!config.playerSettings.autoPlay){config.playerSettings.autoPlay=true;}}};YouTubeAPI.prototype.createYTURL=function(){var id=this.videoID;var url="//youtube.com/watch?v="+id;return url;};YouTubeAPI.prototype.constructMouseButtonLayoutCommands=function(){var config=this.videoController.getConfiguration();var commands=["getShareButtonsLayout","getXButtonLayout","getBottomTransBar"];if(!config.transparentClickThroughDiv||(this.videoController.IEHTML5&&!this.videoController.IE11)){commands.push("getSeeMoreButtonLayout");}
else{commands.push("getTransparentClickThroughDiv");}
return commands;};window._tlModuleLoader.onReady(pn,YouTubeAPI);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/YouTubeAPI.js");


(function(pn){var Message=function(name,data){this.name=name;this.data=data;};window._tlModuleLoader.onReady(pn,Message);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Message.js");


(function(pn){var CSSHelper=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;this.window=nativeAdInfo.docInfo.window;};CSSHelper.prototype.safeSetZindex=function(index,el,info){if(el){try{el.style.zIndex=index;}
catch(e){el.style.zIndex=index+'';}}};CSSHelper.prototype.determineWinForEl=function(el){var docInfo=this.nativeAdInfo.docInfo;if(docInfo.topDocument&&(el.ownerDocument==docInfo.topDocument)){return docInfo.topWindow;}
return docInfo.scriptWindow;};CSSHelper.prototype.getRealStyle=function(el){var win=this.determineWinForEl(el);if(el.nodeType==el.ELEMENT_NODE){if(win.getComputedStyle){return win.getComputedStyle(el);}
if(el.currentStyle){return el.currentStyle;}}
return{};};CSSHelper.prototype.getStyleAttributes=function(attributeList,el){if(!attributeList){return false;}
if(!attributeList.length){return[];}
var cs=this.getRealStyle(el);var attributeValues=[];var that=this;attributeList.forEach(function(attr){var safeStyle={};safeStyle.name=attr;safeStyle.value=that.getSafeStyle(attr,cs);attributeValues.push(safeStyle);});return attributeValues;};CSSHelper.prototype.float=function(cs){var test1,test2;test1=cs.float;test2=cs.cssFloat;if(test1&&test1.length){return test1;}
return test2;};CSSHelper.prototype.margin=function(cs){var test1,test2;test1=cs.margin;test2=cs.marginTop+' '+cs.marginRight+' '+cs.marginBottom+' '+cs.marginLeft;if(test1&&test1.length){return test1;}
return test2;};CSSHelper.prototype.padding=function(cs){var test1,test2;test1=cs.padding;test2=cs.paddingTop+' '+cs.paddingRight+' '+cs.paddingBottom+' '+cs.paddingLeft;if(test1&&test1.length){return test1;}
return test2;};CSSHelper.prototype.border=function(cs){var test1,test2;test1=cs.border;test2=cs.borderTop+' '+cs.borderRight+' '+cs.borderBottom+' '+cs.borderLeft;if(test1&&test1.length){return test1;}
return test2;};CSSHelper.prototype.getSafeStyle=function(attr,cs){if(this[attr]){return this[attr](cs);}
return false;};CSSHelper.prototype.fadeIn=function(el,duration,cb){el.style.opacity=0.0;el.style.display="";var refreshTime=duration/20;var f=function(){el.style.opacity=(parseFloat(el.style.opacity,10)+0.05);if(el.style.opacity<1){setTimeout(function(){f();},refreshTime);}
else{if(cb){cb();}}};f();};CSSHelper.prototype.fadeOut=function(el,duration,cb){var refreshTime=duration/20;var f=function(){el.style.opacity=(parseFloat(el.style.opacity,10)-0.05);if(el.style.opacity>0){setTimeout(function(){f();},refreshTime);}
else{if(cb){cb();}}};f();};CSSHelper.prototype.setStyle=function(styleObj,styleName,value,priority){styleObj.setProperty(styleName,value,priority);}
CSSHelper.prototype.clearPMFB=function(el){var style=el.style;this.setStyle(style,"padding","0","important");this.setStyle(style,"margin","0","important");this.setStyle(style,"border","0","important");this.setStyle(style,"float","none","important");};var hasStackContext=function(cs){if(cs.opacity<1){return true;}
if(cs.transform!="none"){return true;}
if(cs['mix-blend-mode']!='normal'){return true;}
if(cs.filter!='none'){return true;}
if(cs.isolation=='isolate'){return true;}
if(cs.position=='absolute'||cs.position=='relative'){return true;}
return false;};CSSHelper.prototype.getStackingContextRoot=function(el){var p=el;while(p){if(hasStackContext(this.getRealStyle(p))&&p.parentNode){p=p.parentNode;}
else{break;}}
return p;};var createRealArray=function(pseudoArray){var a=[];var i=0;var ii=pseudoArray.length;for(;i<ii;i++){a.push(pseudoArray[i]);}
return a;};CSSHelper.prototype.push2pseudo=function(arr,el){try{arr[arr.length]=el;arr.length++;}
catch(e){return createRealArray(arr).push(el);}};CSSHelper.prototype.move2FrontStackingContext=function(el,limit){var zIndex=1;var highestZ=zIndex;var cs,p;p=this.getStackingContextRoot(el);var elArr=p.getElementsByTagName('*');this.push2pseudo(elArr,p);var i=0,ii=elArr.length;var currentEl;for(;i<ii;i++){currentEl=elArr[i];if(currentEl==limit){break;}
cs=this.getRealStyle(currentEl);if(cs['z-index']){zIndex=parseInt(cs['z-index'],10)||zIndex;if(zIndex>highestZ){highestZ=zIndex+1;}}}
this.safeSetZindex(highestZ,el);};window._tlModuleLoader.onReady(pn,CSSHelper);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/CSSHelper.js");


(function(pn){var MetaTag=function(){};MetaTag.prototype.checkForMetaTag=function(document){var metaTags=document.getElementsByTagName('META');var i=0,ii=metaTags.length;var mt;for(;i<ii;i++){mt=metaTags[i];if(mt.hasAttribute&&mt.getAttribute){if(mt.hasAttribute('name')&&((mt.getAttribute('name')==='triplelift-brand-safe')||(mt.getAttribute('name')==='triplelift-include-ad'))){if(mt.hasAttribute('content')&&(mt.getAttribute('content')==='no')){return true;}}}
else{if(mt['name']&&(mt['name']==='triplelift-brand-safe')||(mt['name']==='triplelift-include-ad')){if(mt['content']&&(mt['content']==='no')){return true;}}}}
return false;};window._tlModuleLoader.onReady(pn,MetaTag);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/MetaTag.js");


(function(pn){var AdChoices=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;this.adChoicesURL=this.inheritProtocol(nativeAdInfo.creative.params.adchoices_url);this.assetUrl="//c.betrad.com/icon/c_30_us.png";this.assetWidth=77;this.assetHeight=15;this.assetAR=this.assetWidth/this.assetHeight;};AdChoices.prototype.init=function(){var buttonManager=this.nativeAdInfo.buttonManager;var adChoiceButton=new this.nativeAdInfo.modules.Button(this.assetUrl,this.assetWidth,this.assetHeight);var adChoiceButtonElement=buttonManager.addCornerButton(adChoiceButton,buttonManager.getFreeCorner(),function(){});this.setClick(adChoiceButtonElement);return adChoiceButtonElement;};AdChoices.prototype.setClick=function(adChoiceButtonElement){var that=this;this.setDOMEvent(adChoiceButtonElement,'click',function(e){window.open(that.adChoicesURL,'popup','width=650,height=316');},true);};window._tlModuleLoader.onReady(pn,AdChoices);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/AdChoices.js");


(function(pn){function IFrameBuster(){}
IFrameBuster.prototype.needsBusting=function needsBusting(placementDetails,win){var iframeBuster=placementDetails.iframeBuster;return iframeBuster&&!isTopLevel(win);function isTopLevel(win){var isTop;try{isTop=(win&&win==top);}catch(e){isTop=false;}
return isTop;}}
IFrameBuster.prototype.bust=function bust(placementDetails,doc,tlSrc,util){var parsedHostname=util.parseURI(doc.referrer);var docsrc=encodeURIComponent(doc.URL);var iframe=doc.createElement('iframe');iframe.src="//"+parsedHostname.host+"/doubleclick/TLIframe.html?docsrc="+docsrc+"&script_src="+encodeURIComponent(tlSrc);iframe.width=0;iframe.height=0;iframe.frameborder=0;if(doc.body==null){var body=doc.createElement('body');doc.firstElementChild.appendChild(body);}
doc.body.appendChild(iframe);return;}
window._tlModuleLoader.onReady(pn,IFrameBuster);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/IFrameBuster.js");


(function(pn){var UserSync=function(firePix){this.firePix=firePix;window._tlUserCookied=window._tlUserCookied||false;};UserSync.prototype.doSync=function(debugOpt,ttjHostName,nusp){if(!window._tlUserCookied){window._tlUserCookied=true;this.firePix.fireEB('cset',{'tlcookieable':true});sync();}
function sync(){debugOpt=debugOpt?"&debug="+debugOpt:'';var iframe=document.createElement('iframe');iframe.src='//'+ttjHostName+'/userSync.html?nusp='+nusp+debugOpt;iframe.width=0;iframe.height=0;iframe.frameborder=0;iframe.style.display="none";document.body.appendChild(iframe);}};window._tlModuleLoader.onReady(pn,UserSync);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/UserSync.js");


(function(pn){var Ad=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;this.adDIV=nativeAdInfo.adDIV;this.placementDetails=nativeAdInfo.modules.placementDetails;this.util=nativeAdInfo.modules.util;this.window=nativeAdInfo.docInfo.window;};Ad.prototype.getMainAdUnit=function(){return this.adDIV;};Ad.prototype.getCaption=function(){return this.adDIV.getElementsByClassName('caption')[0];};Ad.prototype.setClickHandler=function(){this.setAdHandler('click',click.bind(this),true);function click(e){var target=e.target||e.srcElement;var clickExempt=target.className.match("tlClickExempt");var isAnchor=target.tagName==='A';if(clickExempt){return;}else if(!isAnchor){var clickThroughURL=this.nativeAdInfo.creative.params.clickthrough_url;this.nativeAdInfo.docInfo.window.open(clickThroughURL,'_blank');}
this.nativeAdInfo.analytics.click();}};Ad.prototype.getAd=function getAd(){if(this.ad){return this.ad;}
var placementDetails=this.nativeAdInfo.modules.placementDetails;if(placementDetails.customOptions&&placementDetails.customOptions.unwrappedUnit){return this.ad=this.adDIV;}
this.ad=this.find(this.adDIV.children,validAd);return this.ad;function validAd(candidate){var invalidTagNames=['iframe','style','script','link'];var flag=true;invalidTagNames.forEach(function(tagName){if(candidate.tagName==tagName.toUpperCase()){flag=false;}});return flag;}};Ad.prototype.getMainImage=function(){if(this.mainImage){return this.mainImage;}
return this.mainImage=this.getMainImageFromImgTag()||this.getMainImageEl();};Ad.prototype.getMainImageEl=function(){var allElements=this.adDIV.getElementsByTagName('*');var url=this.parseURI(this.nativeAdInfo.creative.imageURL);var mainImageDiv=this.find(allElements,function(el){var backgroundImage=el.style&&el.style['background-image'];var dataBackground=el.hasAttribute&&el.hasAttribute('data-background');return(backgroundImage&&backgroundImage.match(url.query))||(dataBackground&&dataBackground.match(url.query));});return mainImageDiv;};Ad.prototype.getMainImageFromImgTag=function(){var images=this.adDIV.getElementsByTagName('IMG');var tlImages=this.util.filter(images,this.isTlImage.bind(this));return this.largestImage(tlImages);};Ad.prototype.getMainImageSrc=function(){var mainImage=this.getMainImage();return mainImage.src||mainImage.style['background-image']||mainImage.hasAttribute('data-background');};Ad.prototype.setMainImageHandler=function(eventType,cb){this.setDOMEvent(this.getMainImage(),eventType,cb);};Ad.prototype.setAdHandler=function(eventType,cb,cancel){this.setDOMEvent(this.getAd(),eventType,cb,cancel);};Ad.prototype.regsiterMainAdImage=function(el){this.mainImage=el;this.imageCached=true;};Ad.prototype.isTlImage=function(image){var urls=[this.nativeAdInfo.creative.params.image_url,this.nativeAdInfo.modules.placementDetails.tlImageAddr];return image.src&&urls.some(this.isMatch.bind(null,image.src));}
Ad.prototype.largestImage=function(images){var i=0;var ii=images.length;var currentImage;var bestImage,bestArea;for(;i<ii;i++){currentImage=images[i];if(bestImage){if(bestArea<(currentImage.width*currentImage.height)){bestImage=currentImage;bestArea=(currentImage.width*currentImage.height);}}
else{bestImage=currentImage;bestArea=currentImage.width*currentImage.height;}}
return bestImage;};Ad.prototype.getMainImageOffset=function(){var mainImage=this.getMainImage();if(!this.mainImage){return false;}
return{left:mainImage.offsetLeft,top:mainImage.offsetTop};};Ad.prototype.getMainImageDimensions=function(){var mainImage=this.getMainImage();if(!this.mainImage){return false;}
var cs=this.nativeAdInfo.cssHelper.getRealStyle(mainImage);var width=parseInt(cs.width);var height=parseInt(cs.height);var widthString=width+"px";var heightString=height+"px";var ret={};ret.width=width;ret.height=height;ret.widthString=widthString;ret.heightString=heightString;return ret;};Ad.prototype.getMainImageStyleAttributes=function(attributeList){var mainImage=this.getMainImage();if(!mainImage){return false;}
return this.nativeAdInfo.cssHelper.getStyleAttributes(attributeList,mainImage);};window._tlModuleLoader.onReady(pn,Ad);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Ad.js");


(function(pn){var browsers=["Dummy","MSIE","Firefox","Chrome","Safari","Opera","iPhone","BlackBerry","Android"];var os=["Dummy","Windows Phone OS","Windows","Android","Linux","iPhone","iPod","iPad","Mac","BlackBerry"];var parseUA=function(uaStr){if(!uaStr)return{b:"undisclosed",o:"undisclosed"};var msies=["Dummy","MSIE 7.0","MSIE 8.0","MSIE 9.0","MSIE 10.0"];var ret_obj={};ret_obj.o;ret_obj.b;var n,nn;for(n=0,nn=browsers.length;n<nn;n++){if(uaStr.match(browsers[n])){ret_obj.b=n;break;}}
if(ret_obj.b===1){for(n=0,nn=msies.length;n<nn;n++){if(uaStr.match(msies[n])){ret_obj.b=8+n;break;}}}
if(uaStr.match('rv:11.0')){ret_obj.b=13;}
if(ret_obj.b&&ret_obj.b===4){if(uaStr.match('Android')&&uaStr.match('Linux')){ret_obj.b=8;}
if(uaStr.match('BlackBerry')){ret_obj.b=7;}}
for(n=0,nn=os.length;n<nn;n++){if(uaStr.match(os[n])){ret_obj.o=n;break;}}
return ret_obj;};var BrowserInfo=function(browserName,isMobile,isSafari){this.isSafari=isSafari;this.isMobile=isMobile;this.browserName=browserName;};var BrowserDetector=function(userAgent){this.userAgent=userAgent;};BrowserDetector.prototype.isMobile=function(){return this.userAgent.match(/BlackBerry|ipod|iphone|ipad|android/);};BrowserDetector.prototype.getBrowserInfo=function(){var parsedUA=parseUA(this.userAgent);var browserString=browsers[parsedUA.b];var isMobile=!!this.isMobile();var isSafari=parsedUA.b==4;return new BrowserInfo(browserString,isMobile,isSafari);};window._tlModuleLoader.onReady(pn,BrowserDetector);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/BrowserDetector.js");


(function(pn){var ServeDefault=function(){this.done=false;}
ServeDefault.prototype.serve=function(nativeAdInfo,renderResult){if(this.done||nativeAdInfo.adRendered){return;}
nativeAdInfo.hasDefaulted=true;this.done=true;var render=new nativeAdInfo.modules.Render(nativeAdInfo),defaultCode=nativeAdInfo.modules.placementDetails.defaultCode,hook=nativeAdInfo.hook,docInfo=nativeAdInfo.docInfo;renderDefault(render,defaultCode,hook,docInfo);nativeAdInfo.analytics.viewabilityStartRenderDefault(renderResult);};ServeDefault.prototype.setTimeout=function(nativeAdInfo,key,type,timeout){var that=this;nativeAdInfo[key]=false;setTimeout(function(){if(!nativeAdInfo[key]){that.serve(nativeAdInfo,type);}},timeout);};function renderDefault(render,defaultCode,hook,docInfo){if(defaultCode){if(docInfo.scriptWindow!=top){render.serveDefaultFrame(defaultCode,docInfo.scriptWindow.document);}else{var defaultDIV=render.wrapAd(defaultCode);render.insertAd(defaultDIV,hook);}}}
window._tlModuleLoader.onReady(pn,ServeDefault);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/ServeDefault.js");


(function(pn){var AuctionPathBuilder=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;this.document=nativeAdInfo.docInfo.document;};AuctionPathBuilder.prototype.buildAuctionPath=function(){var nativeAdInfo=this.nativeAdInfo;var placementDetails=nativeAdInfo.modules.placementDetails;var adnxsParams=['member='+placementDetails.adnxsMemberID,'st='+(nativeAdInfo.modules.util.isMobile()?'mobile_web':'web')];var params=['inv_code='+placementDetails.invCode,'cb='+Math.floor(89999999*Math.random()+10000000),'referrer='+encodeURIComponent(this.document.URL)];if(!nativeAdInfo.tlxAuction){adnxsParams.forEach(function(param){params.push(param);});}
return this.createAuctionPathWithParams(nativeAdInfo.auctionPath,nativeAdInfo.debugMessenger,params);};AuctionPathBuilder.prototype.createAuctionPathWithParams=function(pathToAuction,debugMessenger,params){debugMessenger=debugMessenger||{};var explicitBidParams=debugMessenger.tlBidParms;if(explicitBidParams){return pathToAuction+explicitBidParams;}
pathToAuction=pathToAuction+"?"+params.join('&');if(debugMessenger.debugFlag){pathToAuction+="&test=true";}
return pathToAuction;};window._tlModuleLoader.onReady(pn,AuctionPathBuilder);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/AuctionPathBuilder.js");


(function(pn){var Box=function(el){this.x1=parseInt(el.getBoundingClientRect().left,10);this.y1=parseInt(el.getBoundingClientRect().top,10);this.width=el.offsetWidth;this.height=el.offsetHeight;this.x2=this.x1+this.width;this.y2=this.y1+this.height;};Box.prototype.containsPoint=function(point){return(this.x1<=point.x)&&(this.x2>=point.x)&&(this.y1<=point.y)&&(this.y2>=point.y);};var ProgressBarController=function(progressBarInstance,cb){this.progressBarElement=progressBarInstance.pb;this.currentVal=this.progressBarElement.value=0;this.block=progressBarInstance.block;this.maxVal=parseInt(this.progressBarElement.max);this.interval=50;this.cb=cb;};ProgressBarController.prototype.startMonitoring=function(){this.canceled=false;var that=this;var recursiveChecker=function(){if(that.canceled){return;}
that.currentVal+=that.interval;that.progressBarElement.value=that.currentVal;if(that.currentVal>=that.maxVal){that.goalReached();}
else{setTimeout(function(){recursiveChecker();},that.interval);}};recursiveChecker();};ProgressBarController.prototype.goalReached=function(){this.clearDOMEvents(this.block);this.progressBarElement.style.display="none";this.cb({preventDefault:function(){}});};ProgressBarController.prototype.cancelMonitoring=function(){this.canceled=true;this.currentVal=0;this.progressBarElement.value=0;};ProgressBarController.prototype.monitor=function(){var that=this;var onMouseOver=function(e){that.progressBarElement.style.display="";that.startMonitoring();};var onMouseOut=function(e){var box=new Box(that.block);var point={x:e.clientX,y:e.clientY};if(!box.containsPoint(point)){that.currentVal=0;that.progressBarElement.style.display="none";that.cancelMonitoring();}};this.setDOMEvent(this.block,'mouseover',onMouseOver);this.setDOMEvent(this.block,'mouseout',onMouseOut);};window._tlModuleLoader.onReady(pn,ProgressBarController);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/ProgressBarController.js");


(function(pn){var Button=function(src,width,height){this.src=src;this.width=width;this.height=height;};window._tlModuleLoader.onReady(pn,Button);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Button.js");


(function(pn){var AuctionRunner=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;this.document=nativeAdInfo.docInfo.document;this.window=nativeAdInfo.docInfo.window;var i=this.document.createElement('IFRAME');i.style.display='none';this.document.body.appendChild(i);i.contentWindow.document.open();i.contentWindow.document.write("<html><head></head><body></body></html>");i.contentWindow.document.close();this.auctionIFRAME=i;this.hasBeenRun=false;};AuctionRunner.prototype.onError=function(e,funName){if(this.nativeAdInfo.errorDecorator){this.nativeAdInfo.errorDecorator.fireError(e,'run');}};AuctionRunner.prototype.run=function(adnxsInfo){var iframe=this.auctionIFRAME;if(this.hasBeenRun){this.onError('auction has already been run','run');return;}
this.hasBeenRun=true;var useIFRAME=adnxsInfo.iframeInfo.useIFRAME;if(!useIFRAME){try{var s=iframe.contentWindow.document.createElement('SCRIPT');s.src=adnxsInfo.pathToAuction;iframe.contentWindow.document.body.appendChild(s);}catch(e){this.onError(e,'run');}}
else{try{var mobIFRAME=iframe.contentWindow.document.createElement('IFRAME');var onReady=function(event){if(event.data!=='sourcedReady'){return;}
var strippedReferrer=this.removeReferrer(adnxsInfo.pathToAuction);mobIFRAME.contentWindow.postMessage(strippedReferrer,'*');};this.setDOMEvent(iframe.contentWindow,'message',onReady.bind(this));mobIFRAME.src=adnxsInfo.iframeInfo.src;iframe.contentWindow.document.body.appendChild(mobIFRAME);}
catch(e){this.onError(e,'run');}}
var time=this.nativeAdInfo.modules.placementDetails.timeoutDuration;this.nativeAdInfo.serveDefault.setTimeout(this.nativeAdInfo,'auctionComplete','auction_timeout',time);}
AuctionRunner.prototype.removeReferrer=function(uriString){var uri=this.parseURI(uriString);var cleanQueryKey=this.removeKeys(uri.queryKey,'referrer');var cleanQueryString=this.stringifyParamsObj(cleanQueryKey);var origPath=uriString.split('?')[0];return origPath+'?'+cleanQueryString;};window._tlModuleLoader.onReady(pn,AuctionRunner);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/AuctionRunner.js");


(function(pn){var Creative=function(config){var settings=config.settings,images=config.images,placementDetails=config.placementDetails,clickTrackerDTJ=config.clickTrackerDTJ;this.thirdPartyMacros=config.thirdPartyMacros;this.params=this.makeParams(settings,images,placementDetails,clickTrackerDTJ);this.addVideoData(config.settings);};Creative.prototype.addVideoData=function(settings){var videoData={};if(settings.video_data){this.add3pVideoPix(settings,videoData);videoData.videoID=settings.video_data.video_id||settings.video_data.videoId;videoData.playerType=settings.video_data.video_type||settings.video_data.type;videoData.showControls=parseInt(settings.video_data.expose_controls,10);videoData.hoverAction=settings.video_data.hover_action;}
this.videoData=videoData;};Creative.prototype.add3pVideoPix=function(settings,videoData){var vspixString='';if(settings.video_data&&settings.video_data.vsPixel){vspixString=settings.video_data.vsPixel.join(",");}
var vcpixString='';if(settings.video_data&&settings.video_data.vcPixel){vcpixString=settings.video_data.vcPixel.join(",");}
videoData.thirdPartyStartPix=vspixString;videoData.thirdPartyCompletionPix=vcpixString;};Creative.prototype.makeParams=function(settings,images,placementDetails,clickTrackerDTJ){if(!settings||!images||!placementDetails){return;}
var selectedImage=this.selectRandomImage(images);var params=this.objMerge(selectedImage,settings);this.caption=params.caption;var url=params.image_url;var tlImageAddr=placementDetails.tlImageAddr;this.w600URL=this.createPinterestURL(url,tlImageAddr);this.originalClickThroughURL=params.clickthrough_url;var clickThrough=params.clickthrough_url;var encodingLevel=params.click_tracker_encoding_level;var clickTrackerDynamic=params.click_tracker_url;params.clickthrough_url=this.createClickThroughURL(clickTrackerDTJ,clickTrackerDynamic,clickThrough,placementDetails,encodingLevel);var impPix=params.impression_pixels;var jsPix=params.js_pixels;var vPix=params.viewablilty_pixels;params.thirdPartyTrackers=this.createThirdPartyTrackers(impPix,jsPix,vPix,placementDetails.id);params.caption=this.truncateCaption(params.caption,placementDetails.captionCharacterLimit);params.isCSR=this.isCSR(params.client_side_render,params.image_id);if(!params.isCSR){params.image_url=this.imageURL=this.createDynamicImageURL(params,placementDetails);}
return params;};Creative.prototype.createThirdPartyTrackers=function(impPix,jsPix,viewabilityPix,placementId){var expandMacros=this.expandThirdPartyMacros.bind(this,placementId);var map=this.map;var trackers={};trackers.impressionPixels=map(impPix,expandMacros);trackers.javascriptPixels=map(jsPix,expandMacros);trackers.viewabilityPixels=map(viewabilityPix,expandMacros);return trackers;}
Creative.prototype.createPinterestURL=function(url,tlImgAddr){return'//'+tlImgAddr+'/?width=600&alt=max&url='+encodeURIComponent(url);}
Creative.prototype.createClickThroughURL=function(clickTrackerDTJ,clickTrackerDynamic,clickThrough,placementDetails,encodingLevel){var pid=placementDetails.id;clickTrackerDynamic=this.expandThirdPartyMacros(pid,clickTrackerDynamic);clickTrackerDTJ=this.expandThirdPartyMacros(pid,clickTrackerDTJ);if(clickTrackerDynamic){clickThrough=this.encodeClickThroughURL(clickThrough,encodingLevel);}
clickThrough=this.prependDynamic(clickTrackerDynamic,clickThrough);clickThrough=this.prependDTJ(clickTrackerDTJ,clickThrough);clickThrough=this.prependCookie(placementDetails,clickThrough);return clickThrough;}
Creative.prototype.prependDynamic=function(clickTrackerDynamic,clickThrough){return(clickTrackerDynamic||'')+clickThrough;}
Creative.prototype.prependDTJ=function(clickTrackerDTJ,clickThrough){if(clickTrackerDTJ){clickTrackerDTJ=decodeURIComponent(clickTrackerDTJ);clickThrough=encodeURIComponent(clickThrough);return clickTrackerDTJ+clickThrough;}
return clickThrough;}
Creative.prototype.prependCookie=function(placementDetails,clickThrough){if((navigator&&navigator.userAgent&&navigator.userAgent.indexOf('Safari')!=-1&&navigator.userAgent.indexOf('Chrome')==-1)||!this.docCookies.hasItem('tlcookieable')){var cookiePath=placementDetails.engagementBusAddr+"/getuid?redir=";var redirectUrl=encodeURIComponent(clickThrough);return'//'+cookiePath+redirectUrl;}
return clickThrough;}
Creative.prototype.encodeClickThroughURL=function(clickThroughURL,encodingLevel){encodingLevel=parseInt(encodingLevel,10);if(isNaN(encodingLevel)){encodingLevel=1;}
while(encodingLevel--){clickThroughURL=encodeURIComponent(clickThroughURL);}
return clickThroughURL;}
Creative.prototype.expandThirdPartyMacros=function(placementId,src){if(!src){return undefined;}
var randMacros=["${CACHEBUSTER}","[CACHEBUSTER]","[RANDOM_NUMBER]"];for(var i=0;i<randMacros.length;i++){src=src.replace(randMacros[i],this.randInt(10000000000));}
src=src.replace("[PLACEMENT_ID]",placementId);src=src.replace("[timestamp]",new Date().getTime());this.forEachObj(this.thirdPartyMacros,function(key,value){if(key[0]==='%'){key='$'+key.slice(1);src=src.replace(key,value);}});return src;};Creative.prototype.createDynamicImageURL=function(params,placement){if(!params.image_url){throw new Error('no image url');}
var tlImgAddr=placement.tlImageAddr;var orderedImgParams=[];orderedImgParams.push('width='+(placement.imageWidth==='0'?NaN:placement.imageWidth));orderedImgParams.push('height='+(placement.imageHeight==='0'?NaN:placement.imageHeight));orderedImgParams.push('url='+encodeURIComponent(params.image_url));if(!this.areCornersAvailable(placement.logoBlackList)){params.img_server_params=params.img_server_params.replace(/logo.*\&/g,'');}else{orderedImgParams.push('logo_exclude='+placement.logoBlackList);}
return'//'+tlImgAddr+'?'+orderedImgParams.join('&')+'&'+params.img_server_params;};Creative.prototype.areCornersAvailable=function(excludeZones){if(!excludeZones){return true;}
var corners=['NE','SE','SW','NW'];for(var i=0;i<corners.length;i++){if(excludeZones.indexOf(corners[i])<0){return true;}}
return false;}
Creative.prototype.selectRandomImage=function(images){var index=Math.floor(Math.random()*images.length);return images[index];};Creative.prototype.isCSR=function(client_side_render,image_id){return client_side_render||parseInt(image_id,10)<0;};Creative.prototype.truncateCaption=function(caption,captionLimit){var limit=parseInt(captionLimit,10);if(limit&&limit>2&&caption.length>limit){caption=caption.substr(0,limit-3)+"...";}
return caption;}
window._tlModuleLoader.onReady(pn,Creative);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Creative.js");


(function(pn){var GetCreativeJSON=function(config){this.nativeAdInfo=config.nativeAdInfo;this.errorDecorator=this.nativeAdInfo.errorDecorator||{decorate:function(fn){return fn;}};this.docInfo=config.docInfo;this.dynamicHostName=config.dynamicHostName;this.moduleLoader=config.moduleLoader;this.onCreativeJSONLoaded=config.onCreativeJSONLoaded;this.unitGenerated=false;};GetCreativeJSON.prototype.tlAdvertiserJSON=function tlAdvertiserJSON(unitJSON){this.moduleLoader.onReady(this.addr,unitJSON);}
GetCreativeJSON.prototype.genericGetCreativeJSON=function genericGetCreativeJSON(auctionID,userID,pixel){if(this.unitGenerated){return;}
this.unitGenerated=true;this.addr+=('?rsv='+Math.round(Math.random()*100000000));var time=this.nativeAdInfo.modules.placementDetails.timeoutDuration;this.nativeAdInfo.serveDefault.setTimeout(this.nativeAdInfo,'dynamicComplete','dynamic_timeout',time);this.moduleLoader.overrideAddrImpt(this.addr,this.onCreativeJSONLoaded,this.docInfo.document);this.nativeAdInfo.analytics.loadPostAuctionParams({auction_id:auctionID||0,user_id:userID||0,pixel:pixel});}
GetCreativeJSON.prototype.getCreativeJSONDirect=function getCreativeJSONDirect(tacticID){this.addr='//'+this.dynamicHostName+'/sc/advertiser/jsonp/'+tacticID;this.genericGetCreativeJSON();}
GetCreativeJSON.prototype.getCreativeJSON2=function getCreativeJSON2(payload){var auctionID=payload.auction_id;var userID=payload.user_id;var tacticID=payload.campaign_code.match(/[0-9]+/)[0];var isGhost=payload.campaign_code.indexOf('_ghost_')>-1;this.nativeAdInfo.analytics.setIsGhost(isGhost);this.addr='//'+this.dynamicHostName+'/sc/advertiser/jsonp/'+tacticID;this.genericGetCreativeJSON(auctionID,userID,payload.pixel);};GetCreativeJSON.prototype.get3PUnit=function(id,pixel,tagCode,auctionID,userID,thirdPartyMacros){this.thirdPartyMacros=thirdPartyMacros||{};this.addr='//'+this.dynamicHostName+'/sc/bidder/jsonp/'+id;this.genericGetCreativeJSON(auctionID,userID,pixel);};GetCreativeJSON.prototype.getExtUnit=function(id,pixel,extCreativePartner,auctionID,userID){this.addr='//'+this.dynamicHostName+'/sc/bidder/'+extCreativePartner+'/jsonp/'+id;this.genericGetCreativeJSON(auctionID,userID,pixel);};GetCreativeJSON.prototype.dynamicCreativeRender=function(payload){if(payload.settings&&payload.settings.ghost){this.nativeAdInfo.analytics.setIsGhost(true);}
this.thirdPartyMacros=payload.thirdPartyMacros||{};this.onCreativeJSONLoaded({"tl_advertiser_data":payload});};GetCreativeJSON.prototype.serveDefault=function(type,auctionID,userID){var nativeAdInfo=this.nativeAdInfo;nativeAdInfo.analytics.loadPostAuctionParams({auction_id:auctionID,user_id:userID});nativeAdInfo.serveDefault.serve(nativeAdInfo,type);};GetCreativeJSON.prototype.registerAuctionListeners=function(){var that=this;var map={"get_unit_2":this.wrap(this.getCreativeJSON2),"get_3p_unit":this.wrap(this.get3PUnit),"get_ext_unit":this.wrap(this.getExtUnit),"dynamicCreativeRender":this.wrap(this.dynamicCreativeRender),"tl_advertiser_json":this.wrap(this.tlAdvertiserJSON),"serveDefault":this.wrap(this.serveDefault)};this.objMap(map,function(k,f){that.docInfo.window[k]=f;});};GetCreativeJSON.prototype.wrap=function(func){var that=this;var decoratedFunc=this.errorDecorator.decorate(func);return function(){that.nativeAdInfo.auctionComplete=true;return decoratedFunc.apply(that,arguments);};};window._tlModuleLoader.onReady(pn,GetCreativeJSON);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/GetCreativeJSON.js");


(function(pn){var Render=function(nativeAdInfo){this.document=nativeAdInfo.docInfo.document;this.window=nativeAdInfo.docInfo.window;this.nativeAdInfo=nativeAdInfo;};Render.prototype.wrapAd=function(adString){this.htmlString=adString;var adDIV=this.document.createElement('DIV');adDIV.style.display="inline";if(this.needsHTML5){adDIV=this.wrapDivHTML5(adDIV);}
adDIV.innerHTML=adString;return adDIV;};Render.prototype.getInsertHook=function(hook){if(this.htmlString.match("tl-escape-type")){var type=this.htmlString.match(/tl-escape-type=".+"/)[0].split("=")[1].split('"')[1];var value=this.htmlString.match(/tl-escape-value=".+"/)[0].split("=")[1].split('"')[1];if(type==="selector"){var selector=value;hook=this.closest(hook,new this.nativeAdInfo.modules.Selector(selector),1);}}
return hook;};Render.prototype.unwrapAd=function(adDIV){var children=adDIV.children;adDIV=adDIV.firstChild;var i=1;var ii=children.length;for(;i<ii;i++){adDIV.appendChild(children[1]);}
return adDIV;};Render.prototype.insertAd=function(adDIV,hook){var insertHook=this.getInsertHook(hook);hook.parentNode.insertBefore(adDIV,hook);triggerScripts(adDIV);return adDIV;};Render.prototype.serveDefaultFrame=function(defaultCode,origDoc){origDoc.open();origDoc.write(defaultCode);origDoc.close();};Render.prototype.wrapDivHTML5=function(div){var html5Frag=this.document.createDocumentFragment();var html5='abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video'.split(' ');var i=0,ii=html5.length;for(i;i<ii;i++){html5Frag.createElement(html5[i]);}
html5Frag.appendChild(div);};Render.prototype.needsHTML5=(function(){var div=this.document.createElement('DIV');div.innerHTML="<article></article>";return div.childNodes.length!==1;})();function triggerScripts(node){if(node.tagName==='SCRIPT'){node.parentNode.replaceChild(scriptClone(node),node);}else{var i=0;var children=node.childNodes;while(i<children.length){triggerScripts(children[i++]);}}
return node;}
function scriptClone(node){var clone=document.createElement('SCRIPT');clone.text=node.innerHTML;var i=node.attributes.length-1;for(;i>=0;i--){clone.setAttribute(node.attributes[i].name,node.attributes[i].value);}
return clone;}
window._tlModuleLoader.onReady(pn,Render);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Render.js");


(function(pn){var HookFinder=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;};HookFinder.prototype.getHook=function(docInfo,ttjHostName,invCode,replaceParent){var win=docInfo.window,doc=docInfo.document,replaceParent=parseInt(replaceParent,10),scripts,hook;scripts=doc.getElementsByTagName('SCRIPT'),hook=this.getTLScript(ttjHostName,invCode,scripts);if(win!=top){hook=this.getTopFrame(win);}else if(!hook){hook=this.getTLScript(ttjHostName,invCode,this.nativeAdInfo.additionalHookCandidates);}
while(replaceParent){hook=hook.parentNode;replaceParent--;}
this.hideHook(hook);return hook;};HookFinder.prototype.getScriptPath=function(){var src=this.getScriptSrc();return this.parseURI(src).path;};HookFinder.prototype.getScriptSrc=function(){if(!this.script){return'';}
return this.script.getAttribute('data-src')||this.script.src;};HookFinder.prototype.hideHook=function(hook){hook.style.display='none';hook.style.visibility='hidden';hook.style.width="0px";hook.style.height="0px";}
HookFinder.prototype.getTopFrame=function(win){var frame;while(win!=top){frame=win.frameElement;win=win.parent;}
return frame;}
HookFinder.prototype.getTLScript=function(ttjHostName,invCode,scripts){if(this.script){return this.script;}
if(!ttjHostName||!invCode||!scripts){return false;}
var i,script,hasTLID;for(i=0;i<scripts.length;i++){script=scripts[i];hasTLID=script.getAttribute('tl_id');if(this.scriptSrcContains(script,ttjHostName)&&this.scriptSrcContains(script,invCode)&&!hasTLID){script.setAttribute('tl_id',Math.round(Math.random()*100000));this.script=script;return script;}}};HookFinder.prototype.scriptSrcContains=function(script,st){if(!st){return false;}
var src=script.src;var dataSrc=script.getAttribute('data-src');var srcContains=src&&src.indexOf(st)>-1;var dataSrcContains=dataSrc&&dataSrc.indexOf(st)>-1;return!!(srcContains||dataSrcContains);}
window._tlModuleLoader.onReady(pn,HookFinder);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/HookFinder.js");


(function(pn){var ThirdPartyJS=function(config){this.docInfo=config.docInfo;this.placementDetails=config.placementDetails;this.ad=config.ad;this.viewabilityElement=config.ad.getAd();};ThirdPartyJS.prototype.appendTags=function appendTags(thirdPartySources){var integrations=this.getIntegrations();for(var i=0;i<thirdPartySources.length;i++){var src=thirdPartySources[i];var matched=false;for(var j=0;j<integrations.length;j++){if(src.match(integrations[j].regex)){integrations[j].action(src);matched=true;break;}}!matched&&this.defaultAction(src);}};ThirdPartyJS.prototype.getViewabilityID=function(){if(!this.viewabilityID){this.viewabilityID="tltpvid_"+Math.round(Math.random()*100000);this.viewabilityElement.id=this.viewabilityID;}
return this.viewabilityID;};ThirdPartyJS.prototype.appendScriptVE=function(src){var s=this.docInfo.document.createElement('SCRIPT');var ve=this.ad.getMainImage();if(ve.nextSibling){ve.parentNode.insertBefore(s,ve.nextSibling);}else{var p=this.docInfo.document.createElement('IMG');p.style.display="none";ve.parentNode.insertBefore(p,ve);p.parentNode.insertBefore(ve,p);p.parentNode.insertBefore(s,ve.nextSibling);p.parentNode.removeChild(p);}
s.src=src;};ThirdPartyJS.prototype.appendScriptAd=function(src){var s=this.docInfo.document.createElement('SCRIPT');this.ad.adDIV.appendChild(s);s.src=src;};ThirdPartyJS.prototype.defaultAction=function(src){var s=this.docInfo.document.createElement('SCRIPT');this.viewabilityElement.appendChild(s);s.src=src;};ThirdPartyJS.prototype.interpolateDimensions=function(src){var dimensions=this.ad.getMainImageDimensions();src=src.replace("[WIDTH]",dimensions.width);src=src.replace("[HEIGHT]",dimensions.height);src=src.replace("[CONTAINER_ID]",this.getViewabilityID());return src;};ThirdPartyJS.prototype.getIntegrations=function(){var that=this;var integrations=[{regex:/cdn\.doubleverify/,action:function(src){src=src.replace(/INSERT_SUPPLIER_ID/,"TripleLift");src=src.replace("[PLACEMENT_ID]",that.placementDetails.id);src=src.replace(/INSERT_BTREG/,that.getViewabilityID());src=src.replace(/INSERT_BTADSRV/,that.getViewabilityID());that.appendScriptVE(src);}},{regex:/adsafeprotected/,action:function(src){src=src.replace("$!{AD_ID}",that.placementDetails.id);that.appendScriptVE(src);}},{regex:/voicefive/,action:function(src){src=src.replace("[PLACEMENT_ID]",that.placementDetails.placementID);that.appendScriptVE(src);}},{regex:/js\.moatads/,action:function(src){src=src.replace("[PLACEMENT_ID]",that.placementDetails.id);src=src.replace("[TLVIEW_ID]",that.getViewabilityID());that.appendScriptAd(src);}},{regex:/z\.moatads/,action:function(src){src=src.replace("[PLACEMENT_ID]",that.placementDetails.id);src=src.replace("[TLVIEW_ID]",that.getViewabilityID());that.appendScriptAd(src);}},{regex:/c\.betrad/,action:function(src){src=that.interpolateDimensions(src);that.appendScriptAd(src);}},{regex:/choices\.truste/,action:function(src){src=that.interpolateDimensions(src);that.appendScriptAd(src);}}];return integrations;};window._tlModuleLoader.onReady(pn,ThirdPartyJS);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/ThirdPartyJS.js");


(function(pn){var Selector=function(selectorString){var tnString=selectorString.match(/^[A-Za-z0-9]+/);var idString=selectorString.match(/#([A-Za-z0-9]|\-|_)+/);var cnString=selectorString.match(/\.([A-Za-z0-9]|\-|_)+/g);if(tnString){this.tagName=tnString[0];}
if(idString){this.id=idString[0].split('#')[1];}
if(cnString){this.classNames=[];var that=this;cnString.forEach(function(cn){that.classNames.push(cn.split('.')[1]);});}};window._tlModuleLoader.onReady(pn,Selector);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Selector.js");


(function(pn){var ShareType=function(code,src){this.code=code;this.src=src;};window._tlModuleLoader.onReady(pn,ShareType);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/ShareType.js");


(function(pn){var Analytics=function(docInfo,placementDetails,firePix){this.docInfo=docInfo;this.placementDetails=placementDetails;this.firePix=firePix;this.thirdPartyTrackers={};};Analytics.prototype.loadPreAuctionParams=function(isAdserving){this.vsParams={inv_code:this.placementDetails.invCode,ref:encodeURIComponent(this.docInfo.document.URL),domain:encodeURIComponent(this.docInfo.document.domain),as:isAdserving?1:0};};Analytics.prototype.loadPostAuctionParams=function(auctionResult){this.auctionParams={aid:auctionResult.auction_id,uid:auctionResult.user_id};this.auctionPixel=auctionResult.pixel;};Analytics.prototype.loadPostDynamicParams=function(creative){this.creative=creative;this.creativeParams=creative.params.additional_data||{};this.creativeParams.caid=creative.params.asset_id;this.rParams=this.objMerge(this.auctionParams,this.creativeParams,{rr:'creative',g:this.isGhost?1:0});this.vsrParams=this.objMerge(this.vsParams,this.rParams);var isVideo=creative.params.video_enabled;this.auctionPixelEvent=creative.params.adnxs_pix_event||(isVideo?'video_start':'click');if(isVideo){this.videoLengthMS=creative.params.video_data.length_seconds*1000;}};Analytics.prototype.engagementStart=function(ad){var adElement=ad.getAd();this.setSmartMouseover(adElement);};Analytics.prototype.setSmartMouseover=function(adElement){var mouseIn=false,mouseoverThreshold=1000,fireMouseover=this.mouseover.bind(this);this.setDOMEvent(adElement,'mouseenter',mouseEnter);this.setDOMEvent(adElement,'mouseleave',mouseLeave);function mouseEnter(){mouseIn=true
setTimeout(function(){mouseIn&&fireMouseover();},mouseoverThreshold);}
function mouseLeave(){mouseIn=false;}}
Analytics.prototype.viewabilityStart=function(){this.firePix.fireEB('vs',this.vsParams);};Analytics.prototype.render=function(){this.firePix.fireEB('r',this.rParams);this.thirdParty();};Analytics.prototype.viewabilityStartRender=function(){this.firePix.fireEB('vsr',this.vsrParams);this.thirdParty();};Analytics.prototype.viewabilityStartRenderDefault=function(renderResult){var params=this.objMerge(this.vsParams,this.auctionParams,this.creativeParams,{rr:renderResult});this.firePix.fireEB('vsr',params);};Analytics.prototype.viewable=function(){this.firePix.fireEB('ev',this.creativeParams);};Analytics.prototype.mouseover=function(){this.firePix.fireEB('em',this.creativeParams);};Analytics.prototype.click=function(){if(this.auctionPixelEvent==='click'){this.firePix.fire(this.auctionPixel);}
this.firePix.fireEB('ec',this.creativeParams);};Analytics.prototype.share=function(shareType){var shareParams=this.objMerge(this.creativeParams,{st:shareType.toUpperCase()});this.firePix.fireEB('es',shareParams);};Analytics.prototype.duration=function(viewedDuration){var params=this.objMerge(this.creativeParams,{duration:viewedDuration,video_length:this.videoLengthMS,});this.firePix.fireEB('evd',params);};Analytics.prototype.play=function(){if(this.auctionPixelEvent==='video_start'){this.firePix.fire(this.auctionPixel);}};Analytics.prototype.thirdParty=function(){if(this.isGhost){return;}
var fire=this.firePix.fire.bind(this.firePix);var fireJS=this.firePix.fireJS.bind(this.firePix);var impPix=this.creative.params.thirdPartyTrackers.impressionPixels;var jsPix=this.creative.params.thirdPartyTrackers.javascriptPixels;this.forEach(impPix,fire);this.forEach(jsPix,fireJS);};Analytics.prototype.setIsGhost=function(isGhost){this.isGhost=isGhost;};window._tlModuleLoader.onReady(pn,Analytics);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/Analytics.js");


(function(pn){var DurationMonitor=function(upperLimit){var playing=false;var totalTime=0;var start;var stop;this.setStart=function(d){start=d;stop=undefined;playing=true;};this.setStop=function(d){if(!playing){return;}
stop=d;playing=false;totalTime+=(stop-start);};this.getDuration=function(){var t;if(playing){t=totalTime+(new Date().getTime()-start);}
else{t=totalTime;}
if(t>upperLimit){t=upperLimit;}
return t;};};window._tlModuleLoader.onReady(pn,DurationMonitor);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/DurationMonitor.js");


(function(pn){var WindowDetector=function(docInfo){this.document=docInfo.document;this.window=docInfo.window;};WindowDetector.prototype.getWin=function(){try{this.window.frameElement;if(this.window.top===this.window.self){this.isNestedWindow=false;return this.window;}
return this.window.top;}
catch(e){return this.window;}};this.window._tlModuleLoader.onReady(pn,WindowDetector);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/WindowDetector.js");


(function(pn){var CLICK=0;var HOVER=1;var FADE=0;var VideoController=function(nativeAdInfo,onVideoLoaded){this.nativeAdInfo=nativeAdInfo;this.errorDecorator=this.nativeAdInfo.errorDecorator||{decorate:function(fn){return fn;}};this.ad=nativeAdInfo.ad;this.videoData=nativeAdInfo.creative.params.video_data;this.videoType=this.videoData.type||nativeAdInfo.creative.params.type;this.topDocument=nativeAdInfo.docInfo.topDocument;this.topwindow=nativeAdInfo.docInfo.topWindow;this.onVideoLoaded=onVideoLoaded;this.fadeTimeMS=1000;this.invCode=nativeAdInfo.modules.placementDetails.invCode;this.setConfig();};VideoController.prototype.wrap=function(methodName){var that=this;return function(videoInfo,videoCont){that[methodName](videoInfo,videoCont);};};VideoController.prototype.fireThirdPartyStartPix=function(){if(this.nativeAdInfo.creative.thirdPartyStartPix){this.nativeAdInfo.creative.thirdPartyStartPix.forEach(function(pixsrc){this.nativeAdInfo.firePix.fire(pixsrc);});}};VideoController.prototype.fireThirdPartyCompletionPix=function(){if(this.nativeAdInfo.creative.thirdPartyCompletionPix){this.nativeAdInfo.creative.thirdPartyCompletionPix.forEach(function(pixsrc){this.nativeAdInfo.firePix.fire(pixsrc);});}};VideoController.prototype.setConfig=function(){this.config={playButtonSettings:{width:0.3,alignment:'center',showOnHover:false},playerSettings:{type:this.nativeAdInfo.creative.playerType,videoID:this.nativeAdInfo.creative.videoData.videoID,showControls:this.nativeAdInfo.creative.videoData.showControls,displayMethod:FADE}};this.setTriggerAction();};VideoController.prototype.hideSumome=function(){var that=this;var attempts=0;hideSumomeHelper();function hideSumomeHelper(){attempts++;var doc=that.nativeAdInfo.docInfo.document;var sumomeContainer=doc.getElementsByClassName("sumome-image-sharer")[0];if(sumomeContainer){hide(sumomeContainer);}else if(attempts<2){setTimeout(hideSumomeHelper.bind(that),3000);}}
function hide(sumomeContainer){sumomeContainer.style['height']='0';sumomeContainer.style['width']='0';var children=sumomeContainer.children;for(var i=0;i<children.length;i++){children[i].style.display='none';}}};VideoController.prototype.triggers={click:{autoPlay:true,triggerAction:CLICK},play:{autoPlay:true,triggerAction:HOVER},progress:{autoPlay:true,triggerAction:HOVER,useProgressBar:true},none:{autoPlay:false,triggerAction:HOVER,showControls:1}};VideoController.prototype.setTriggerAction=function(){var triggerInfo=this.triggers[this.nativeAdInfo.creative.videoData.hoverAction];this.config.triggerAction=triggerInfo.triggerAction;if(triggerInfo.autoPlay){this.config.autoPlay=triggerInfo.autoPlay;}
if(triggerInfo.showControls){this.config.playerSettings.showControls=triggerInfo.showControls;}
if(triggerInfo.useProgressBar){this.config.useProgressBar=triggerInfo.useProgressBar;}};VideoController.prototype.callExternalAPI=function(methodName){var func=this.externalAPI[methodName];if(!func){func=function(){};}
var that=this;return function(){func.apply(that.externalAPI,arguments);};};VideoController.prototype.initializeVideo=function(){var dec;if(this.nativeAdInfo.errorDecorator){var errorDecorator=this.nativeAdInfo.errorDecorator;dec=function(fn){return errorDecorator.decorate(fn);};}
else{dec=function(fn){return fn;};}
var eventController=new this.nativeAdInfo.modules.EventController(dec);eventController.first(this.wrap("clearImageStyling"),{});eventController.next(this.wrap("setCaptionForMSN"));eventController.next(this.wrap("setPlayerHook"));eventController.next(this.wrap("createWrappedPlayer"));eventController.next(this.wrap("setExternalAPITable"));eventController.next(this.wrap("loadExternalAPI"));eventController.next(this.wrap("setPlayButton"));eventController.next(this.wrap("setTriggerHandler"));eventController.next(this.wrap("setButtons"));eventController.next(this.wrap("setToggling"));eventController.next(this.wrap("preventDefaultClickThrough"));eventController.run();this.onVideoLoaded();};VideoController.prototype.setButtons=function(videoInfo,videoCont){this.callExternalAPI("setButtons")();videoCont(videoInfo);};VideoController.prototype.setCaptionForMSN=function(videoInfo,videoCont){if(this.invCode==="msn_main_river"){var caption=this.ad.getCaption();if(caption){var cs=this.nativeAdInfo.cssHelper.getRealStyle(caption);caption.style.setProperty('padding',cs.padding);caption.style.setProperty('margin',cs.margin);caption.style.setProperty('margin-left',cs.marginLeft);}}
videoCont(videoInfo);};VideoController.prototype.createWrappedPlayer=function(videoInfo,videoCont){var w=this.hook.style.width;var h=this.hook.style.height;var playerDiv=this.topDocument.createElement("DIV");playerDiv.id="pd_"+Math.round(Math.random()*10000);var wrappedDiv=this.topDocument.createElement("DIV");wrappedDiv.id="wpd_"+playerDiv.id;wrappedDiv.appendChild(playerDiv);wrappedDiv.style.width=w;wrappedDiv.style.height=h;wrappedDiv.style.position="absolute";this.nativeAdInfo.cssHelper.clearPMFB(wrappedDiv);this.nativeAdInfo.cssHelper.safeSetZindex(0,wrappedDiv);var playerID=playerDiv.id;var wrappedDivID=wrappedDiv.id;this.wrappedPlayerInfo={wrappedPlayer:wrappedDiv,playerID:playerDiv.id,wrappedDivID:wrappedDiv.id};videoCont(videoInfo);};VideoController.prototype.setExternalAPITable=function(videoInfo,videoCont){this.externalAPIs={};if(this.nativeAdInfo.modules.SimpleVideoIFRAME){this.externalAPIs['503']=this.nativeAdInfo.modules.SimpleVideoIFRAME;this.externalAPIs['502']=this.nativeAdInfo.modules.SimpleVideoIFRAME;}
if(this.nativeAdInfo.modules.YouTubeAPI){this.externalAPIs['youtube']=this.nativeAdInfo.modules.YouTubeAPI;this.externalAPIs['1']=this.nativeAdInfo.modules.YouTubeAPI;}
videoCont(videoInfo);};VideoController.prototype.loadExternalAPI=function(videoInfo,videoCont){this.externalAPI=new this.externalAPIs[this.videoType](this);this.callExternalAPI("load")(videoInfo,videoCont);};VideoController.prototype.clearImageStyling=function(videoInfo,videoCont){videoCont(videoInfo);};VideoController.prototype.determinePlayerHookPosition=function(){var adImage=this.nativeAdInfo.ad.getMainImage();var adImageStyle=this.nativeAdInfo.cssHelper.getRealStyle(adImage);var positionInfo={name:"position"};if(adImageStyle.position=='absolute'){positionInfo.value="absolute";}
else{positionInfo.value="relative";}
return positionInfo;};VideoController.prototype.determinePlayerHookLeft=function(){return{name:"left",value:"0px"};};VideoController.prototype.determinePlayerHookTop=function(){return{name:"top",value:"0px"};};VideoController.prototype.setHookStyleAttributes=function(){var ad=this.nativeAdInfo.ad;var mainImageDimensions=ad.getMainImageDimensions();var hookWidth=mainImageDimensions.widthString;var hookHeight=mainImageDimensions.heightString;var attributes=["padding","float","margin","border"];var mainImageStyleAttributes=this.nativeAdInfo.ad.getMainImageStyleAttributes(attributes);mainImageStyleAttributes.push(this.determinePlayerHookPosition());mainImageStyleAttributes.push(this.determinePlayerHookLeft());mainImageStyleAttributes.push(this.determinePlayerHookTop());mainImageStyleAttributes.push({name:"overflow",value:"hidden"});mainImageStyleAttributes.push({name:"width",value:hookWidth});mainImageStyleAttributes.push({name:"height",value:hookHeight});var style=this.hook.style;mainImageStyleAttributes.forEach(function(attr){style.setProperty(attr.name,attr.value,"important");});};VideoController.prototype.setPlayerHook=function(videoInfo,videoCont){var ad=this.nativeAdInfo.ad;var mainImage=ad.getMainImage();var d=this.hook=this.topDocument.createElement('DIV');this.setHookStyleAttributes();mainImage.parentNode.insertBefore(d,mainImage);d.appendChild(mainImage);this.nativeAdInfo.cssHelper.move2FrontStackingContext(d,d.parentNode);videoCont(videoInfo);};VideoController.prototype.determinePlayButtonDimensions=function(){var info={};var maxWidth=115;var maxHeight=83;var ad=this.nativeAdInfo.ad;var mainImageDimensions=ad.getMainImageDimensions();var hookWidth=mainImageDimensions.width;var hookHeight=mainImageDimensions.height;var originalRatio=maxWidth/maxHeight;var pbWidthPct=this.config.playButtonSettings.width;info.width=Math.round(pbWidthPct*hookWidth);if(info.width>maxWidth){info.width=maxWidth;}
info.height=Math.round((1/originalRatio)*info.width);this.playButtonDimensions={width:info.width,height:info.height,widthString:info.width+"px",heightString:info.height+"px"};};VideoController.prototype.setPlayButton=function(videoInfo,videoCont){this.determinePlayButtonDimensions();var buttonManager=this.nativeAdInfo.buttonManager;var playButton=new this.nativeAdInfo.modules.Button(this.assets.whitePlayButton,this.playButtonDimensions.width,this.playButtonDimensions.height);this.playButton=buttonManager.addCenterButton(playButton);this.nativeAdInfo.cssHelper.setStyle(this.playButton.style,"min-width","0px","important");this.nativeAdInfo.cssHelper.setStyle(this.playButton.style,"min-height","0px","important");this.nativeAdInfo.cssHelper.move2FrontStackingContext(this.playButton,this.nativeAdInfo.ad.adDIV);videoCont(videoInfo);};var altSeeMore;VideoController.prototype.assets={clickthrough:"//images.3lift.com/3127258.png",close:"//images.3lift.com/3127259.png",facebook:"//images.3lift.com/3127260.png",pinterest:"//images.3lift.com/3127261.png",play:"//images.3lift.com/3127262.png",share:"//images.3lift.com/3127263.png",tumblr:"//images.3lift.com/3127264.png",twitter:"//images.3lift.com/3127265.png",safeGradient:"//img.3lift.com/?width=200&height=100&url=http%3A%2F%2Fimages.3lift.com%2F3129001.png",gradient:"//images.3lift.com/3129001.png",xbutton:"//images.3lift.com/3129012.png",seemore:altSeeMore||"//images.3lift.com/3129101.png",whitePlayButton:"//images.3lift.com/3129104.png"};VideoController.prototype.putPlayerOnDOM=function(){if(this.playerOnDOM){return;}
this.playerOnDOM=true;var wrappedPlayerInfo=this.wrappedPlayerInfo;var wrappedPlayer=wrappedPlayerInfo.wrappedPlayer;var playerHook=this.hook;playerHook.appendChild(wrappedPlayer);this.positionWrappedPlayer(wrappedPlayer);this.wrappedPlayer=wrappedPlayer;};VideoController.prototype.positionWrappedPlayer=function(wrappedPlayer){var ad=this.nativeAdInfo.ad;var mainImageOffset=ad.getMainImageOffset();var mainImageDimensions=ad.getMainImageDimensions();var hookTop=mainImageOffset.top;var hookLeft=mainImageOffset.left;if(this.clientSideRenderUnit){wrappedPlayer.style.left=-hookLeft+"px";wrappedPlayer.style.top=(-hookTop-mainImageDimensions.height)+"px";}
else{wrappedPlayer.style.left=hookLeft+"px";wrappedPlayer.style.top=(hookTop-mainImageDimensions.height)+"px";}};VideoController.prototype.loadVideo=function(videoInfo,videoCont){this.putPlayerOnDOM();this.callExternalAPI("initPlayer")(function(){videoCont(videoInfo);});};VideoController.prototype.setTrigger=function(triggerAction,videoInfo,videoCont){var that=this;var DOMEventName=(triggerAction===CLICK)?'click':'mouseover';var triggered=false;that.hideSumome();var playVideoWrap=this.errorDecorator.decorate(function(e){if(triggered){return;}
triggered=true;var onVideoLoaded=function(){var wrappedPlayer=that.wrappedPlayerInfo.wrappedPlayer;wrappedPlayer.style.left="0px";wrappedPlayer.style.top="0px";that.hook.style.removeProperty('z-index');that.nativeAdInfo.cssHelper.move2FrontStackingContext(wrappedPlayer,that.nativeAdInfo.ad.adDIV);if(that.config.playerSettings.displayMethod===FADE){that.nativeAdInfo.cssHelper.fadeIn(wrappedPlayer,that.fadeTimeMS);}
if(that.config.autoPlay){that.callExternalAPI("playVideo")();}
videoCont(videoInfo);};that.loadVideo(videoInfo,onVideoLoaded);});if(this.config.useProgressBar){var pb=new this.nativeAdInfo.modules.ProgressBar(this.nativeAdInfo.ad.getMainImage());pb.setProgressBar();var pbc=new this.nativeAdInfo.modules.ProgressBarController(pb,playVideoWrap);pbc.monitor(2000);}
else{this.setDOMEvent(this.playButton,DOMEventName,playVideoWrap,true);this.clearDOMEvents(this.ad.getMainImage());this.ad.setMainImageHandler(DOMEventName,playVideoWrap);}};VideoController.prototype.setTriggerHandler=function(videoInfo,videoCont){if(this.config.triggerAction===CLICK){this.setTrigger(CLICK,videoInfo,videoCont);}
else{this.setTrigger(HOVER,videoInfo,videoCont);}};VideoController.prototype.setToggling=function(videoInfo,videoCont){var isToggling=false;var that=this;this.toggleOff=function(){that.nativeAdInfo.cssHelper.move2FrontStackingContext(that.hook);that.callExternalAPI("pauseVideo")();if(that.config.playerSettings.displayMethod===FADE&&!isToggling){isToggling=true;that.nativeAdInfo.cssHelper.fadeOut(that.wrappedPlayer,that.fadeTimeMS,doneToggleOff);}};this.toggleOn=function(){that.hook.style.removeProperty("z-index");that.callExternalAPI("playVideo")();if(that.config.playerSettings.displayMethod===FADE&&!isToggling){isToggling=true;that.wrappedPlayer.style.left="0px";that.wrappedPlayer.style.top="0px";that.nativeAdInfo.cssHelper.fadeIn(that.wrappedPlayer,that.fadeTimeMS,doneToggle);}};function doneToggleOff(){setDisplayNone();doneToggle();}
function setDisplayNone(){that.wrappedPlayer.style.display="none";}
function doneToggle(){isToggling=false;}
videoCont(videoInfo);};VideoController.prototype.preventDefaultClickThrough=function(){var adImage=this.nativeAdInfo.ad.getMainImage();var grandparent=adImage.parentNode.parentNode;var ctURL=this.nativeAdInfo.creative.params.clickthrough_url;if(grandparent.href&&grandparent.href.indexOf(ctURL)>-1){grandparent.removeAttribute('href');grandparent.removeAttribute('target');grandparent.style.cursor='pointer';}};window._tlModuleLoader.onReady(pn,VideoController);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/VideoController.js");


(function(pn){var SimpleVideoIFRAME=function(videoController){this.videoController=videoController;this.nativeAdInfo=videoController.nativeAdInfo;this.document=videoController.nativeAdInfo.docInfo.document;this.window=videoController.nativeAdInfo.docInfo.window;};SimpleVideoIFRAME.prototype.appendPlayerIFRAME=function(){var playerHook=this.videoController.hook;var i=this.document.createElement('IFRAME');i.src=this.videoController.videoData.url;i.style.width=playerHook.style.width;i.style.height=playerHook.style.height;i.style.border='none';i.style.background="white";this.playerFrame=i;this.videoController.wrappedPlayerInfo.wrappedPlayer.appendChild(i);this.videoController.putPlayerOnDOM();};SimpleVideoIFRAME.prototype.playVideo=function(){this.nativeAdInfo.analytics.play();this.playerFrame.contentWindow.postMessage(JSON.stringify({command:"play"}),'*');};SimpleVideoIFRAME.prototype.initPlayer=function(cont){cont();};SimpleVideoIFRAME.prototype.load=function(videoInfo,videoCont){this.appendPlayerIFRAME();videoCont(videoInfo);};window._tlModuleLoader.onReady(pn,SimpleVideoIFRAME);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/SimpleVideoIFRAME.js");


(function(pn){var FrameOverrideWriter=function(auctionIFRAME,nativeAdInfo){this.errorDecorator=nativeAdInfo.errorDecorator||{decorate:function(fn){return fn;}};this.placementDetails=nativeAdInfo.modules.placementDetails;this.auctionIFRAME=auctionIFRAME;this.oldWriter=auctionIFRAME.contentWindow.document.write;this.document=auctionIFRAME.contentWindow.document;this.window=auctionIFRAME.contentWindow;};FrameOverrideWriter.prototype.setWriter=function(frame){var that=this;this.document.write=this.errorDecorator.decorate(function(str){that.newWriter(str);});};var checkForCriteo=function(str){var criteoIdent=/cas.+criteo/;if(str.match(criteoIdent)){return true;}
return false;};FrameOverrideWriter.prototype.doCriteo=function(str){str=str.split("src=")[1];var url=str.split('"')[1];this.loadCriteo(url);this.fireCriteoDebug(url);this.document.write=this.oldWriter;};FrameOverrideWriter.prototype.loadCriteo=function(url){var src="//"+this.placementDetails.criteoProxyHost+"/criteo_proxy?url="+encodeURIComponent(url)+"&tlcb="+Math.round(Math.random()*1000000);var s=this.document.createElement('SCRIPT');this.document.body.appendChild(s);s.src=src;}
FrameOverrideWriter.prototype.fireCriteoDebug=function(url){var inv_code=this.placementDetails.invCode;var p=this.document.createElement('IMG');p.src='//'+this.placementDetails.engagementBusAddr+'/dyn?long2=60001&long1=1&string1='+inv_code+'&string2='+(encodeURIComponent(url.slice(0,64)))+"&string3="+encodeURIComponent(url.slice(64,128))+"&cb="+Math.round(Math.random()*1000000);this.document.body.appendChild(p);};FrameOverrideWriter.prototype.newWriter=function(str){if(checkForCriteo(str)){return this.doCriteo(str);}
var d=this.document.createElement("div");d.style.display="none";this.document.body.appendChild(d);d.innerHTML=str;if(Math.floor((Math.random()*1000)+1)==1){}
var arr=d.getElementsByTagName('script');for(var n=0;n<arr.length;n++){var ext_creative_qs=this.parseURI(arr[n].src).queryKey;var ext_creative_host=this.parseURI(arr[n].src).host;if(ext_creative_host=="ad.turn.com"&&ext_creative_qs.cid){var ext_creative_id=ext_creative_qs.cid;}
if(ext_creative_id==undefined){continue;}
var iframe=this.document.createElement('iframe');iframe.src="about:blank";iframe.className="tl_ext_iframe";iframe.setAttribute('data-ext-creative-id',ext_creative_id);this.document.body.appendChild(iframe);iframe.contentWindow.document.write('<scr'+'ipt type="text/javascript" src="'+arr[n].src+'"></sc'+'ript>');}};FrameOverrideWriter.prototype.onmessage=function(event){if(!event||!event.data||!event.data.match){var inv_code=this.placementDetails.invCode,rand=this.randInt(10000),eventString=JSON.stringify(event),first64,next64;if(eventString){first64=encodeURIComponent(eventString.slice(0,64));next64=encodeURIComponent(eventString.slice(64,128));}else{first64='eventStringUndefined';}
var p=this.document.createElement('IMG');p.src='//'+this.placementDetails.engagementBusAddr+'/dyn?long2=60002&string1='+inv_code+'&string2='+first64+"&string3="+next64+"&cb="+rand;this.document.body.appendChild(p);return;}
if(event.data.match("get_3p")||event.data.match("get_ext")||event.data.match("get_unit")||event.data.match("dynamicCreativeRender")){if(this.thirdPartyMessage){return;}
this.thirdPartyMessage=true;var scriptBody=event.data;var s=this.document.createElement('SCRIPT');s.textContent=scriptBody;this.document.body.appendChild(s);this.document.write=this.oldWriter;}};FrameOverrideWriter.prototype.setListeners=function(){this.setWriter();var that=this;var wrappedOnMessage=this.errorDecorator.decorate(function(message){that.onmessage(message);});if(this.window.addEventListener){this.window.addEventListener("message",wrappedOnMessage);}
else{this.window.attachEvent('onmessage',wrappedOnMessage);}};window._tlModuleLoader.onReady(pn,FrameOverrideWriter);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/FrameOverrideWriter.js");


(function(pn){var exports={};var getShareTypes=function(creative){try{var shareTypes=creative.params.share_types;if(!shareTypes){return null;}else if(!shareTypes.forEach){return shareTypes.split(',');}else{return shareTypes;}}
catch(e){return false;}};var largeButtonWidth=70;var largeButtonHeight=34;var mediumButtonWidth=50;var mediumButtonHeight=25;var smallButtonWidth=40;var smallButtonHeight=20;var assets={};assets.code={};assets.code.pinterest=function(nativeAdInfo){return function(e){nativeAdInfo.analytics.share('pinterest');window.open('http://pinterest.com/pin/create/button/?url='+encodeURIComponent(nativeAdInfo.creative.originalClickThroughURL)+'&media='+encodeURIComponent(nativeAdInfo.creative.w600URL)+'&description='+encodeURIComponent(nativeAdInfo.creative.caption),'popup','width=650,height=316');};};assets.code.twitter=function(nativeAdInfo){return function(e){nativeAdInfo.analytics.share('twitter');window.open('http://twitter.com/home?status='+encodeURIComponent(nativeAdInfo.creative.caption),'popup','width=650,height=316');};};assets.code.tumblr=function(nativeAdInfo){return function(e){nativeAdInfo.analytics.share('tumblr');window.open('https://tumblr.com/share/photo?source='+encodeURIComponent('http:'+nativeAdInfo.creative.imageURL)+'&caption='+encodeURIComponent(nativeAdInfo.creative.caption),'popup','width=650,height=316');};};assets.code.facebook=function(nativeAdInfo){return function(e){nativeAdInfo.analytics.share('facebook');window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(nativeAdInfo.creative.originalClickThroughURL),'popup','width=626,height=436');};};var large=assets.large={};large.tumblr="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917934.png&width="+largeButtonWidth;large.twitter="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917933.png&width="+largeButtonWidth;large.facebook="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917935.png&width="+largeButtonWidth;large.pinterest="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917936.png&width="+largeButtonWidth;var medium=assets.medium={};medium.tumblr="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917934.png&width="+mediumButtonWidth;medium.twitter="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917933.png&width="+mediumButtonWidth;medium.facebook="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917935.png&width="+mediumButtonWidth;medium.pinterest="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917936.png&width="+mediumButtonWidth;var small=assets.small={};small.tumblr="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917934.png&width="+smallButtonWidth;small.twitter="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917933.png&width="+smallButtonWidth;small.facebook="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917935.png&width="+smallButtonWidth;small.pinterest="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F2917936.png&width="+smallButtonWidth;var getAsset=function(st,nativeAdInfo){var mainImageDimensions=nativeAdInfo.ad.getMainImageDimensions();var area=mainImageDimensions.width*mainImageDimensions.height;if(area<122500){return[assets.small[st],smallButtonWidth,smallButtonHeight];}
if(area<250000){return[assets.medium[st],mediumButtonWidth,mediumButtonHeight];}
return[assets.large[st],largeButtonWidth,largeButtonHeight];};var addShareButtons=function(nativeAdInfo,overrideButtonManager,offsetWidth,offsetHeight){var placementDetails=nativeAdInfo.modules.placementDetails;var sharingEnabled=placementDetails.sharingEnabled;var imageDimensions=nativeAdInfo.ad.getMainImageDimensions();if(!sharingEnabled||imageDimensions.width<125){return;}
var Button=nativeAdInfo.modules.Button;var buttonManager=overrideButtonManager||nativeAdInfo.buttonManager;var stashedButtonManager=nativeAdInfo.buttonManager;nativeAdInfo.buttonManager=buttonManager;var shareTypes=getShareTypes(nativeAdInfo.creative);if(!shareTypes){return;}
var shareButtons=[];var src2func={};shareTypes.forEach(function(st){var asset=getAsset(st,nativeAdInfo);src2func[asset[0]]=assets.code[st];shareButtons.push(new Button(asset[0],asset[1],asset[2]));});var corner=nativeAdInfo.buttonManager.getFreeCorner();var shareButtonElements;if(!corner){return;}
shareButtonElements=buttonManager.addButtonGroup(shareButtons,corner);offsetShareButtons(nativeAdInfo,shareButtonElements,offsetWidth,offsetHeight);setShareButtonsStyle(shareButtonElements,nativeAdInfo.cssHelper,buttonManager);registerShareButtonMouseOver.call(this,shareButtonElements,nativeAdInfo);registerShareButtonClick.call(this,shareButtonElements,nativeAdInfo,src2func);nativeAdInfo.buttonManager=stashedButtonManager;return shareButtonElements;};var offsetShareButtons=function(nativeAdInfo,shareButtonElements,offsetWidth,offsetHeight){shareButtonElements.forEach(function(buttonElement){var top=nativeAdInfo.cssHelper.parsePixInt(buttonElement.style.top,10);top-=offsetHeight;var left=nativeAdInfo.cssHelper.parsePixInt(buttonElement.style.left,10);left-=offsetWidth;nativeAdInfo.cssHelper.setStyle(buttonElement.style,'top',top+'px','important');nativeAdInfo.cssHelper.setStyle(buttonElement.style,'left',left+'px','important');});};var setShareButtonsStyle=function(buttons,cssHelper,buttonManager){buttons.forEach(function(button){cssHelper.setStyle(button.style,'cursor','pointer','important');cssHelper.setStyle(button.style,'outline','none','important');cssHelper.move2FrontStackingContext(button,buttonManager.block.parentNode);});};var registerShareButtonMouseOver=function(shareButtonElements,nativeAdInfo){shareButtonElements.forEach(function(buttonElement){buttonElement.style.display="none";nativeAdInfo.buttonManager.showOnHover(buttonElement);});};var registerShareButtonClick=function(shareButtonElements,nativeAdInfo,src2func){var that=this;shareButtonElements.forEach(function(buttonElement){var code=src2func[buttonElement.src](nativeAdInfo);that.setDOMEvent(buttonElement,'click',code,true);});};exports.addShareButtons=addShareButtons;window._tlModuleLoader.onReady(pn,exports);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/addShareButtons.js");


(function(pn){var DebugMessenger=function(utils){this.utils=utils;};DebugMessenger.prototype.getDebugInfo=function(window){var win;try{top.document;win=window.top;}
catch(e){win=window;}
var doc=win.document;if((doc.URL.search("tripleliftTest=true")>0)||(doc.referrer.search("tripleliftTest=true")>0)){var url=doc.URL.search("tripleliftTest=true")>0?doc.URL:doc.referrer;var parsedUrl=this.utils.parseURI(url);var queryKey=parsedUrl.queryKey;try{this.debugFlag=true;var c=console;}catch(e){this.debugFlag=false;}
if(queryKey["tlBidParams"]){this.tlBidParams=decodeURIComponent(queryKey["tlBidParams"]);}
if(queryKey["tlBidUrl"]){this.tlBidUrl=decodeURIComponent(queryKey["tlBidUrl"]);}
if(queryKey["tl_css_resize"]){this.tlCssResize=true;}
if(queryKey["tl_scu_id"]){this.tl_scu_id=queryKey["tl_scu_id"];}
if(queryKey["direct"]){this.direct=true;}}};DebugMessenger.prototype.debugMessage=function(m){if(this.debugFlag){console.warn('tl: '+m);}};window._tlModuleLoader.onReady(pn,DebugMessenger);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/DebugMessenger.js");


(function(pn){function util(){var docCookies={getItem:function(sKey){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},removeItem:function(sKey,sPath,sDomain){if(!sKey||!this.hasItem(sKey)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},hasItem:function(sKey){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nIdx=0;nIdx<aKeys.length;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);}
return aKeys;}};function parseUri(str){var o=parseUri.options,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--)uri[o.key[i]]=m[i]||"";uri[o.q.name]={};uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){if($1)uri[o.q.name][$1]=$2;});return uri;};parseUri.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function objMerge(){var objectsArray=[].slice.apply(arguments);return reduce(objectsArray,mergeTwo);function mergeTwo(obj1,obj2){if(!obj1&&!obj2){return{};}
if(!obj1){return obj2;}
if(!obj2){return obj1;}
var key;var obj3={};for(key in obj2){obj3[key]=obj2[key];}
for(key in obj1){obj3[key]=obj1[key];}
return obj3;}}
function forEach(array,fn){if(!array){return false;}
var length=array.length;var index=0;for(;index<length;index++){fn(array[index]);}
return true;}
function forEachObj(obj,fn){if(!obj){return false;}
var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){fn(prop,obj[prop]);}}
return true;}
function map(array,fn){if(!array){return false;}
var mapped=[];for(var i=0;i<array.length;i++){mapped[i]=fn(array[i]);}
return mapped;}
function objMap(obj,fn){for(var k in obj){if(obj.hasOwnProperty(k)){fn(k,obj[k]);}}}
function filter(array,fn){if(!array){return false;}
var filtered=[];for(var i=0;i<array.length;i++){if(!!fn(array[i])){filtered.push(array[i]);}}
return filtered;}
function reduce(array,fn,accumulator){if(!array){return false;}
var copy=array.slice();return reduceHelper(copy,fn,accumulator);}
function reduceHelper(array,fn,accumulator){if(array.length===0){return accumulator;}
var accumulator=accumulator||array.shift();var currentValue=array.shift();return reduce(array,fn,fn(accumulator,currentValue));}
function find(array,fn){if(!array){return false;}
for(var i=0;i<array.length;i++){if(!!fn(array[i])){return array[i];}}
return false;}
function removeNullAndUndefined(obj){var clean={};forEachObj(obj,function(k,v){if(v!==null&&v!==void 0){clean[k]=v;}});return clean;}
function removeKeys(obj,keys){var clean={};forEachObj(obj,function(k,v){if(keys.indexOf(k)===-1){clean[k]=v;}});return clean;}
function stringifyParamsObj(paramsObj){var paramsArray=[];for(var key in paramsObj){if(paramsObj.hasOwnProperty(key)){paramsArray.push(key+'='+paramsObj[key]);}}
return paramsArray.join('&');}
function randInt(n){return Math.floor((n+1)*Math.random());}
function isMatch(haystack,needle){return haystack.indexOf(needle)!==-1;}
function inheritProtocol(url){var urlObj=parseUri(url);return'//'+urlObj.host+urlObj.relative;}
return{forEach:forEach,forEachObj:forEachObj,objMerge:objMerge,map:map,objMap:objMap,reduce:reduce,filter:filter,find:find,parseURI:parseUri,removeNullAndUndefined:removeNullAndUndefined,removeKeys:removeKeys,stringifyParamsObj:stringifyParamsObj,randInt:randInt,isMatch:isMatch,inheritProtocol:inheritProtocol};}
window._tlModuleLoader.onReady(pn,util());})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/util.js");


(function(pn){var CSR=function(nativeAdInfo,nativeAdCont){this.nativeAdInfo=nativeAdInfo;this.nativeAdCont=nativeAdCont;this.dummyImageOnLoad=nativeAdInfo.errorDecorator?nativeAdInfo.errorDecorator.decorate(dummyImageOnLoad):dummyImageOnLoad;};function dummyImageOnLoad(tlmainimage){if(this.calledOnLoad){return;}
this.calledOnLoad=true;var cssHelper=this.nativeAdInfo.cssHelper;var cs=cssHelper.getRealStyle(this.dummyImage);var d=this.d=this.nativeAdInfo.docInfo.document.createElement('DIV');d.style.width=(this.dummyImage.width+"px");d.style.height=(this.dummyImage.height+"px");d.style.position=cs.position!=''?cs.position:'relative';d.style.padding=cssHelper.padding(cs);d.style.float=cssHelper.float(cs);d.style.margin=cssHelper.margin(cs);d.style.border=cssHelper.border(cs);d.style.background="url("+tlmainimage.src+")";d.style['background-size']="cover";d.style['background-position']="center";d.style['background-repeat']="no-repeat";d.style['background-size']="contain";d.style['text-align']='left';this.dummyImage.style.display="none";this.dummyImage.parentNode.insertBefore(d,this.dummyImage);this.nativeAdInfo.ad.regsiterMainAdImage(d);this.nativeAdCont(this.nativeAdInfo);this.setLogoIfNeeded();var intervalHandler=this.updateDummyImage.bind(this);setInterval(intervalHandler,1000);}
CSR.prototype.updateDummyImage=function(){this.dummyImage.style.display="";var cs=this.nativeAdInfo.cssHelper.getRealStyle(this.dummyImage);if(cs.width!=this.d.style.width||cs.height!=this.d.style.height){this.d.style.width=cs.width;this.d.style.height=cs.height;if(this.nativeAdInfo.resetButtons){this.nativeAdInfo.resetButtons();}}
var cssHelper=this.nativeAdInfo.cssHelper;this.d.style.padding=cssHelper.padding(cs);this.d.style.float=cssHelper.float(cs);this.d.style.margin=cssHelper.margin(cs);this.d.style.border=cssHelper.border(cs);if(cs.zIndex){cssHelper.safeSetZindex(cs.zIndex,this.d);}
if(this.d.style.backgroundSize!=='cover'){this.d.style.backgroundSize='cover';this.d.style['background-size']="cover";this.d.style['background-position']="center";this.d.style['background-repeat']="no-repeat";this.d.style['background-size']="contain";this.d.style['text-align']='left';}
this.dummyImage.style.display="none";};CSR.prototype.setLogoIfNeeded=function(){if(this.nativeAdInfo.creative.params.logo_image_url){this.setDynamicLogo();}};CSR.prototype.setDynamicLogo=function(){var logoURL=this.nativeAdInfo.creative.params.logo_image_url;if(logoURL){var logoButton=new this.nativeAdInfo.modules.Button(logoURL,"25%");var logoButtonEl=this.nativeAdInfo.buttonManager.addCornerButton(logoButton,this.nativeAdInfo.buttonManager.getFreeCorner());logoButtonEl.style['max-width']="25%";logoButtonEl.style['max-height']="25%";logoButtonEl.style['height']="initial";}};CSR.prototype.doCSR=function(tlmainimage){var src=tlmainimage.src;var resizeWidth=parseInt(this.nativeAdInfo.modules.placementDetails.imageWidth,10);var resizeHeight=parseInt(this.nativeAdInfo.modules.placementDetails.imageHeight,10);var overlaySrc=false;if(tlmainimage.hasAttribute('tloverlay')){overlaySrc=tlmainimage.getAttribute('tloverlay');}
var dummyImage=this.dummyImage=this.nativeAdInfo.docInfo.document.createElement('IMG');dummyImage.className=tlmainimage.className;var that=this;dummyImage.onload=function(){that.dummyImageOnLoad(tlmainimage);};dummyImage.src="http://img.3lift.com/?url=http%3A%2F%2Fimages.3lift.com%2F3277035.png&width="+resizeWidth+"&height="+resizeHeight;tlmainimage.parentNode.insertBefore(dummyImage,tlmainimage);tlmainimage.parentNode.removeChild(tlmainimage);dummyImage.style.opacity=0;};window._tlModuleLoader.onReady(pn,CSR);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/CSR.js");


(function(pn){var FirePix=function(docInfo,placementID,engagementBusAddr,hook){this.document=docInfo.document;this.engagementBusAddr=engagementBusAddr;this.hook=hook;this.impID=makeImpID(placementID);function makeImpID(placementID){var time=Math.round((new Date()).getTime()/1000);var random=Math.round(Math.random()*1000000000);return[time,random,placementID].join('_');}};FirePix.prototype.fireEB=function(endpoint,queryStringParams,cb){queryStringParams.impid=this.impID;var src=this.makeSrc(this.engagementBusAddr,endpoint,queryStringParams);this.fire(src,cb);}
FirePix.prototype.fire=function(src,cb){if(!src){return;}
var pix=this.document.createElement('IMG');pix.style.display='none';pix.width=0;pix.height=0;pix.src=src;pix.onload=onloadWrap(cb);document.body.appendChild(pix);};FirePix.prototype.fireJS=function(src){if(!src){return;}
var script=document.createElement('SCRIPT');script.setAttribute('type','text/javascript');script.src=src;this.hook.parentElement.insertBefore(script,this.hook)}
FirePix.prototype.makeSrc=function(url,endpoint,queryStringParams){var cleanQueryStringParams=this.removeNullAndUndefined(queryStringParams);cleanQueryStringParams.cb=this.randInt(100000);var queryString=this.stringifyParamsObj(cleanQueryStringParams);var urlSlashRemoved=url.replace(/\/$/,'');return'//'+urlSlashRemoved+'/'+endpoint+'?'+queryString;}
function onloadWrap(cb){return function(event){event=event||this;if(typeof cb==='function'){cb();}
var pix=event?event.target||event.srcElement:this;pix.parentElement.removeChild(pix);};}
window._tlModuleLoader.onReady(pn,FirePix);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/FirePix.js");


(function(pn){var ViewabilityController=function(nativeAdInfo,continueAd){this.nativeAdInfo=nativeAdInfo;this.continueAd=continueAd;this.document=nativeAdInfo.docInfo.document;this.window=nativeAdInfo.docInfo.window;this.analytics=nativeAdInfo.analytics;var enabled=nativeAdInfo.modules.placementDetails.customOptions.viewabilityEnabled;var vbasRate=nativeAdInfo.modules.placementDetails.customOptions.viewabilitySamplingRate;if(enabled&&vbasRate){var nonVBASRate=1-vbasRate;if(nonVBASRate>=0.67){if(!nativeAdInfo.browserInfo.isSafari){this.vbasEnabled=false;}else{this.vbasEnabled=Math.random()>(nonVBASRate-0.67)/0.33;}}else{if(!nativeAdInfo.browserInfo.isSafari){this.vbasEnabled=Math.random()<(vbasRate-0.33)/0.67;}else{this.vbasEnabled=true;}}
if(this.vbasEnabled){this.vbasElement=this.getVbasElement(nativeAdInfo.hook);}}else{this.vbasEnabled=false;}};ViewabilityController.prototype.getVbasElement=function(hook){var ve=hook;while(!ve.offsetTop&&(ve.previousElementSibling||ve.parentElement)){ve=ve.previousElementSibling||ve.parentElement;}
return ve;};ViewabilityController.prototype.start=function(){if(this.vbasEnabled){this.analytics.viewabilityStart();this.listenForNearView(this.vbasElement,this.continueAd);}else{this.continueAd();}};ViewabilityController.prototype.couldBeViewed=function(elem){var win=top.window;var docViewTop=win.pageYOffset;var docViewBottom=docViewTop+getWindowHeight(win);var offset=getOffset(elem);var elemTop=offset.top;var elemBottom=elemTop+elem.offsetHeight;return checkForViewability(elemTop,elemBottom,docViewTop,docViewBottom);};var getOffset=function(el){var offset={};offset.top=0;offset.left=0;while(el){if(el.offsetTop){offset.top+=el.offsetTop;}
if(el.offsetLeft){offset.left+=el.offsetLeft;}
el=el.offsetParent;}
return offset;};var getPct=ViewabilityController.prototype.getPct=function(p1,p2,bounding1,bounding2){if(p1>p2||bounding1>bounding2){return false;}
var length=p2-p1;var lengthBounding=bounding2-bounding1;if(lengthBounding===0){return 0;}
if(length===0){return(p1>bounding1&&p1<bounding2)?1:0;}
var in1=p1<bounding1?bounding1:p1;var in2=p2>bounding2?bounding2:p2;var lengthInView=in2-in1;return lengthInView/length;};var checkForViewability=function(elemTop,elemBottom,docViewTop,docViewBottom){var inView;var pct;if((elemTop<docViewBottom)&&(elemBottom>docViewTop)){inView=true;}else{inView=false;}
if(inView){pct=getPct(elemTop,elemBottom,docViewTop,docViewBottom);}else{pct=0;}
var buffer=50;var closeToView=elemTop<=(docViewBottom+buffer);return{inView:inView,closeToView:closeToView,pct:pct};};var getWindowHeight=function(win){if(win.innerHeight===undefined){return win.document.documentElement.clientHeight;}
return win.innerHeight;};ViewabilityController.prototype.listenForNearView=function(el,cb){var that=this;var recursiveListener=function(){var info=that.couldBeViewed(el);if(info.closeToView){if(cb){cb();}
return;}
setTimeout(recursiveListener,300);};recursiveListener();};ViewabilityController.prototype.listenForInView=function(viewabilityElement,cb,pct,time){pct=pct||1;time=time||0;var interval=100;var that=this;var onSuccess=function(){if(cb){cb();}};var onFail=function(){var that=this;setTimeout(function(){that.run();},interval);};var action=function(){var info=that.couldBeViewed(viewabilityElement);if(info.inView&&info.pct>=pct&&this.duration&&this.duration>=time){this.onSuccess();}
else if(info.inView&&info.pct>=pct){this.duration=(this.duration||0)+interval;this.onFail();}
else{this.duration=0;this.onFail();}};new RecursiveListener(action,onSuccess,onFail).run();};var RecursiveListener=function(action,onSuccess,onFail){this.onSuccess=onSuccess;this.onFail=onFail;this.run=function(){action.call(this);};};window._tlModuleLoader.onReady(pn,ViewabilityController);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/ViewabilityController.js");


(function(pn){var corners=['NW','NE','SW','SE'];var ButtonManager=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;this.document=nativeAdInfo.docInfo.document;this.cssHelper=nativeAdInfo.cssHelper;this.ad=nativeAdInfo.ad.getAd();this.impediments={};this.buttons;this.corners={'NW':[],'NE':[],'SW':[],'SE':[]};};ButtonManager.prototype.clearButtons=function(){this.iterateButtons(function(button){button.el.parentNode.removeChild(button.el);});this.corners={'NW':[],'NE':[],'SW':[],'SE':[]};};ButtonManager.prototype.registerBlock=function(block){this.block=block;};ButtonManager.prototype.FIXED_OFFSET=10;ButtonManager.prototype.BUTTON_SPACING=5;ButtonManager.prototype.addImpediment=function(corner){this.impediments[corner]=true;};ButtonManager.prototype.isCorner=function(corner){return corners.indexOf(corner)>=0;};ButtonManager.prototype.getFreeCorner=function(){var c;var that=this;var iter=function(corner){if(!that.impediments[corner]&&!that.corners[corner].length){c=corner;}};corners.forEach(iter);return c;};ButtonManager.prototype.setStyleDimensions=function(button){var buttonWidth=button.width;if(buttonWidth.match&&buttonWidth.match('%')){button.styleWidth=button.width;button.width=Math.round((parseInt(buttonWidth,10)/100)*this.block.offsetWidth);}
else{button.styleWidth=button.width+"px";button.styleHeight=button.height+"px";}};ButtonManager.prototype.getCornerOffset=function(corner,button){var that=this;that.setStyleDimensions(button);var buttonWidth=button.width;var xoff;var offsetParentTop,offsetParentLeft;if(that.block.tagName==='DIV'){offsetParentTop=0;offsetParentLeft=0;}
else{offsetParentTop=that.block.offsetTop;offsetParentLeft=that.block.offsetLeft;}
if(corner.match('E')){xoff=that.block.offsetWidth+offsetParentLeft-(that.FIXED_OFFSET+buttonWidth);that.corners[corner].forEach(function(cornerButton){xoff-=(cornerButton.width+that.BUTTON_SPACING);});}
else{xoff=that.FIXED_OFFSET+offsetParentLeft;that.corners[corner].forEach(function(cornerButton){xoff+=(cornerButton.width+that.BUTTON_SPACING);});}
var yoff;if(corner.match('S')){yoff=(that.block.offsetHeight+offsetParentTop)-(that.FIXED_OFFSET+button.height);}
else{yoff=that.FIXED_OFFSET+offsetParentTop;}
return[xoff,yoff];};ButtonManager.prototype.addCornerButton=function(button,corner,handler){button.offset=this.getCornerOffset(corner,button);this.corners[corner].push(button);button.el=this.appendButton(button,handler);return button.el;};ButtonManager.prototype.setRefresh=function(el,buttonDetails){if(el.offsetParent==this.block){return;}
var blockTop=this.block.offsetTop;var blockLeft=this.block.offsetLeft;var topDiff=buttonDetails.offset[1]-blockTop;var leftDiff=buttonDetails.offset[0]-blockLeft;var that=this;this.setDOMEvent(this.nativeAdInfo.ad.getMainImage(),'mouseenter',function(){var newBlockTop=that.block.offsetTop;var newBlockLeft=that.block.offsetLeft;if((newBlockTop!==blockTop)||(newBlockLeft!==blockLeft)){if(that.nativeAdInfo.resetButtons){blockTop=newBlockTop;blockLeft=newBlockLeft;that.nativeAdInfo.resetButtons();that.displayButtons();}}});};ButtonManager.prototype.appendButton=function(button,handler){var i=this.document.createElement('IMG');i.onload=handler||function(){};i.src=button.src;var width=button.styleWidth;var height=button.styleHeight;this.cssHelper.setStyle(i.style,'width',width,'important');this.cssHelper.setStyle(i.style,'max-width',width,'important');this.cssHelper.setStyle(i.style,'height',height,'important');this.cssHelper.setStyle(i.style,'max-height',height,'important');this.cssHelper.setStyle(i.style,'position','absolute','important');this.cssHelper.setStyle(i.style,'top',button.offset[1]+'px','important');this.cssHelper.setStyle(i.style,'left',button.offset[0]+'px','important');if(this.block.tagName==='IMG'){this.block.parentNode.insertBefore(i,this.block);}
else{this.block.appendChild(i);}
if(!this.refreshSet){this.refreshSet=true;this.setRefresh(i,button);}
return i;};ButtonManager.prototype.addButtonGroup=function(buttonArr,corner){var that=this;var buttons=[];buttonArr.forEach(function(button){buttons.push(that.addCornerButton(button,corner));});return buttons;};ButtonManager.prototype.addCenterButton=function(button,handler){var xoff=Math.round(this.block.offsetWidth/2);xoff-=Math.round(button.width/2);var yoff=Math.round(this.block.offsetHeight/2);yoff-=Math.round(button.height/2);button.offset=[xoff,yoff];this.center=button;this.setStyleDimensions(button);return this.appendButton(button,handler);};ButtonManager.prototype.addBottomBar=function(button,offsetHeight){button.width=this.block.offsetWidth;this.setStyleDimensions(button);button.offset=[0,this.block.offsetHeight-button.height-offsetHeight];return this.appendButton(button);};ButtonManager.prototype.displayButtons=function(){this.iterateButtons(function(button){button.el.style.display="";});};ButtonManager.prototype.iterateButtons=function(func){var c;for(c in this.corners){this.corners[c].forEach(function(button){func.call(this,button);});}};ButtonManager.prototype.showOnHover=function(button,hoverEl){hoverEl=hoverEl||this.ad;this.setDOMEvent(hoverEl,'mouseenter',displayInherit);this.setDOMEvent(hoverEl,'mouseleave',displayNone);function displayInherit(){!button.noShow&&(button.style.display="");}
function displayNone(){button.style.display="none";}};ButtonManager.prototype.getButtons=function(){return{corners:this.corners,center:this.center};};window._tlModuleLoader.onReady(pn,ButtonManager);})("/rev/81d01d070b8b597d7662d1f533f6aaddbc1a179f/ButtonManager.js");

